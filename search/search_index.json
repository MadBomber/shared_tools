{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"SharedTools","text":"<p>A comprehensive Ruby gem providing LLM-callable tools for browser automation, file operations, code evaluation, database operations, and document processing.</p>"},{"location":"#overview","title":"Overview","text":"<p>SharedTools provides a collection of reusable tools designed to work seamlessly with the RubyLLM framework. Each tool extends <code>RubyLLM::Tool</code> and provides a clean, consistent interface for common operations that LLM agents need to perform.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Browser Automation: Control web browsers with Watir for visiting pages, clicking elements, filling forms, and taking screenshots</li> <li>File System Operations: Secure file and directory operations with path traversal protection</li> <li>Code Evaluation: Execute Ruby, Python, and shell commands with authorization controls</li> <li>Database Operations: Execute SQL queries against SQLite and PostgreSQL databases</li> <li>Document Processing: Read and extract content from PDF documents</li> <li>Authorization System: Human-in-the-loop confirmation for potentially dangerous operations</li> <li>Driver Architecture: Pluggable driver system for extensibility</li> </ul>"},{"location":"#design-principles","title":"Design Principles","text":"<p>Facade Pattern: Each tool acts as a facade, providing a unified interface to complex subsystems:</p> <pre><code># Single tool, multiple actions\nbrowser = SharedTools::Tools::BrowserTool.new\nbrowser.execute(action: \"visit\", url: \"https://example.com\")\nbrowser.execute(action: \"click\", selector: \"button[type='submit']\")\nbrowser.execute(action: \"screenshot\")\n</code></pre> <p>Safety First: Authorization system protects against unintended operations:</p> <pre><code># By default, requires human confirmation\nSharedTools.execute?(tool: 'eval_tool', stuff: 'rm -rf /')  # Prompts user\n\n# Can be disabled for automation\nSharedTools.auto_execute(true)  # Bypass confirmation\n</code></pre> <p>Driver-Based: Extensible architecture allows custom implementations:</p> <pre><code># Use built-in driver\ndisk = SharedTools::Tools::DiskTool.new  # Uses LocalDriver\n\n# Or provide custom driver\ncustom_driver = MyCustomDriver.new\ndisk = SharedTools::Tools::DiskTool.new(driver: custom_driver)\n</code></pre>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>require 'shared_tools'\n\n# Initialize tools\nbrowser = SharedTools::Tools::BrowserTool.new\ndisk = SharedTools::Tools::DiskTool.new\n\n# Scrape data from a website\nbrowser.execute(action: \"visit\", url: \"https://example.com/products\")\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n\n# Save to file\ndisk.execute(\n  action: \"file_create\",\n  path: \"./scraped_data.html\"\n)\ndisk.execute(\n  action: \"file_write\",\n  path: \"./scraped_data.html\",\n  text: html\n)\n\n# Clean up\nbrowser.cleanup!\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Installation - Install and configure SharedTools</li> <li>Quickstart Guide - Get up and running in 5 minutes</li> <li>Basic Usage - Learn fundamental patterns</li> </ul>"},{"location":"#available-tools","title":"Available Tools","text":"<ul> <li>BrowserTool - Web browser automation with Watir</li> <li>DiskTool - File and directory operations</li> <li>EvalTool - Code execution (Ruby, Python, Shell)</li> <li>DocTool - PDF document processing</li> <li>DatabaseTool - SQL database operations</li> </ul>"},{"location":"#guides","title":"Guides","text":"<ul> <li>Authorization System - Control when operations require approval</li> <li>Working with Drivers - Extend tools with custom drivers</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Ruby &gt;= 3.3.0</li> <li>RubyLLM gem</li> <li>Optional: watir (for browser automation), sqlite3 or pg (for databases), pdf-reader (for PDFs)</li> </ul>"},{"location":"#license","title":"License","text":"<p>MIT License - see LICENSE for details.</p>"},{"location":"#credits","title":"Credits","text":"<p>Originally inspired by Kevin Sylvestre's omniai-tools gem. SharedTools has evolved to focus exclusively on RubyLLM support with enhanced features and an extended tool collection.</p>"},{"location":"api/","title":"API Reference","text":"<p>Complete API documentation for SharedTools, covering the base tool classes, facade patterns, driver interfaces, and all available tools.</p>"},{"location":"api/#core-concepts","title":"Core Concepts","text":"<p>SharedTools is built around several key architectural patterns:</p> <ul> <li>Tool Base Class: All tools extend <code>RubyLLM::Tool</code> which provides the DSL for defining parameters and descriptions</li> <li>Facade Pattern: Complex tools like BrowserTool, DiskTool, and DatabaseTool act as facades that delegate to specialized sub-tools</li> <li>Driver Interface: Tools that interact with external systems use pluggable drivers (browser drivers, database drivers, etc.)</li> <li>Authorization System: Human-in-the-loop confirmation via <code>SharedTools.execute?</code></li> </ul>"},{"location":"api/#quick-reference","title":"Quick Reference","text":""},{"location":"api/#available-tools","title":"Available Tools","text":"Tool Purpose Driver Required Example Use Case BrowserTool Web automation Browser driver (Watir) Scraping, testing, automation DiskTool File system operations Local driver Reading/writing files DatabaseTool SQL execution Database driver Data storage, queries ComputerTool System control Computer driver (Mac) Screenshots, mouse/keyboard EvalTool Code execution None Running Ruby/Python/Shell DocTool Document processing None Reading PDFs"},{"location":"api/#tool-actions-reference","title":"Tool Actions Reference","text":"<p>Quick lookup for tool actions and their required parameters:</p>"},{"location":"api/#browsertool-actions","title":"BrowserTool Actions","text":"<pre><code># Visit a URL\naction: \"visit\", url: \"https://example.com\"\n\n# Get page HTML/summary\naction: \"page_inspect\", full_html: true/false\n\n# Find elements by text\naction: \"ui_inspect\", text_content: \"Search\", context_size: 2\n\n# Find elements by CSS selector\naction: \"selector_inspect\", selector: \".button\", context_size: 2\n\n# Click an element\naction: \"click\", selector: \"button[type='submit']\"\n\n# Fill in text field\naction: \"text_field_set\", selector: \"#input\", value: \"text\"\n\n# Take screenshot\naction: \"screenshot\"\n</code></pre>"},{"location":"api/#disktool-actions","title":"DiskTool Actions","text":"<pre><code># Directory operations\naction: \"directory_create\", path: \"./new_dir\"\naction: \"directory_delete\", path: \"./old_dir\"\naction: \"directory_move\", path: \"./src\", destination: \"./dest\"\naction: \"directory_list\", path: \".\"\n\n# File operations\naction: \"file_create\", path: \"./new.txt\"\naction: \"file_delete\", path: \"./old.txt\"\naction: \"file_move\", path: \"./src.txt\", destination: \"./dest.txt\"\naction: \"file_read\", path: \"./file.txt\"\naction: \"file_write\", path: \"./file.txt\", text: \"content\"\naction: \"file_replace\", path: \"./file.txt\", old_text: \"old\", new_text: \"new\"\n</code></pre>"},{"location":"api/#databasetool-actions","title":"DatabaseTool Actions","text":"<pre><code># Execute SQL statements\nstatements: [\n  \"CREATE TABLE users (id INTEGER, name TEXT)\",\n  \"INSERT INTO users VALUES (1, 'Alice')\",\n  \"SELECT * FROM users\"\n]\n</code></pre>"},{"location":"api/#documentation-structure","title":"Documentation Structure","text":""},{"location":"api/#tool-base-class","title":"Tool Base Class","text":"<p>Learn about the <code>RubyLLM::Tool</code> base class that all SharedTools extend:</p> <ul> <li>Parameter DSL with <code>param</code></li> <li>Description method</li> <li>Execute method signature</li> <li>Logger integration</li> <li>Common patterns</li> </ul>"},{"location":"api/#facade-pattern","title":"Facade Pattern","text":"<p>Understand how facade tools like BrowserTool orchestrate multiple specialized sub-tools:</p> <ul> <li>Architecture overview</li> <li>Sub-tool delegation</li> <li>Action routing</li> <li>Parameter validation</li> <li>Error handling</li> </ul>"},{"location":"api/#driver-interface","title":"Driver Interface","text":"<p>Details on implementing and using driver interfaces:</p> <ul> <li>BaseDriver pattern</li> <li>Required methods</li> <li>Custom driver implementation</li> <li>Testing with mock drivers</li> <li>Available drivers</li> </ul>"},{"location":"api/#tool-specific-documentation","title":"Tool-Specific Documentation","text":"<p>Detailed documentation for each tool:</p> <ul> <li>BrowserTool - Web automation and scraping</li> <li>DiskTool - File system operations</li> <li>DatabaseTool - SQL database operations</li> <li>ComputerTool - System-level automation</li> <li>EvalTool - Code evaluation</li> <li>DocTool - Document processing</li> </ul>"},{"location":"api/#common-api-patterns","title":"Common API Patterns","text":""},{"location":"api/#initialization-patterns","title":"Initialization Patterns","text":"<p>Most tools follow consistent initialization patterns:</p> <pre><code># With default driver\ntool = SharedTools::Tools::BrowserTool.new\n\n# With custom driver\ndriver = MyCustomDriver.new\ntool = SharedTools::Tools::BrowserTool.new(driver: driver)\n\n# With logger\ntool = SharedTools::Tools::BrowserTool.new(logger: my_logger)\n\n# With multiple options\ntool = SharedTools::Tools::BrowserTool.new(\n  driver: driver,\n  logger: logger\n)\n</code></pre>"},{"location":"api/#execution-patterns","title":"Execution Patterns","text":"<p>All tools use the <code>execute</code> method with keyword arguments:</p> <pre><code># Single action\nresult = tool.execute(\n  action: \"visit\",\n  url: \"https://example.com\"\n)\n\n# Multiple parameters\nresult = tool.execute(\n  action: \"text_field_set\",\n  selector: \"#search\",\n  value: \"query\"\n)\n\n# Optional parameters\nresult = tool.execute(\n  action: \"ui_inspect\",\n  text_content: \"Login\",\n  context_size: 3  # optional\n)\n</code></pre>"},{"location":"api/#result-patterns","title":"Result Patterns","text":"<p>Tools return consistent result formats:</p> <pre><code># String results\nresult = disk.execute(action: \"file_read\", path: \"./file.txt\")\n# =&gt; \"file contents...\"\n\n# Hash results (DatabaseTool)\nresults = database.execute(statements: [\"SELECT * FROM users\"])\n# =&gt; [{ status: :ok, statement: \"SELECT...\", result: [...] }]\n\n# Structured responses\ninfo = computer.execute(action: \"screen_info\")\n# =&gt; { width: 1920, height: 1080, ... }\n</code></pre>"},{"location":"api/#error-handling-patterns","title":"Error Handling Patterns","text":"<pre><code># Exception-based errors\nbegin\n  result = tool.execute(action: \"invalid_action\")\nrescue ArgumentError =&gt; e\n  puts \"Invalid parameters: #{e.message}\"\nend\n\n# Status-based errors (DatabaseTool)\nresults = database.execute(statements: [\"BAD SQL\"])\nif results.first[:status] == :error\n  puts \"SQL error: #{results.first[:result]}\"\nend\n\n# Nil results\nresult = disk.execute(action: \"file_read\", path: \"./missing.txt\")\n# =&gt; nil (or error depending on tool)\n</code></pre>"},{"location":"api/#authorization-system","title":"Authorization System","text":"<p>All tools respect the SharedTools authorization system:</p> <pre><code># Enable human-in-the-loop (default)\nSharedTools.auto_execute(false)\n\n# When tool executes, user is prompted:\n# \"The AI (tool: disk_tool) wants to do the following ...\"\n# \"Is it okay to proceed? (y/N)\"\n\ndisk.execute(action: \"file_delete\", path: \"./important.txt\")\n\n# Disable for automated workflows\nSharedTools.auto_execute(true)\n</code></pre>"},{"location":"api/#checking-authorization-in-custom-tools","title":"Checking Authorization in Custom Tools","text":"<pre><code>class MyTool &lt; RubyLLM::Tool\n  def execute(action:)\n    return unless SharedTools.execute?(\n      tool: self.class.name,\n      stuff: \"Delete all files\"\n    )\n\n    # Proceed with dangerous operation\n    perform_action(action)\n  end\nend\n</code></pre>"},{"location":"api/#logger-integration","title":"Logger Integration","text":"<p>All tools support optional logger parameters:</p> <pre><code>require 'logger'\n\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::DEBUG\n\ntool = SharedTools::Tools::BrowserTool.new(logger: logger)\n# Tool operations will now log to STDOUT\n</code></pre> <p>Default logger uses <code>RubyLLM.logger</code>:</p> <pre><code># Configure RubyLLM logger globally\nRubyLLM.configure do |config|\n  config.logger = Logger.new('llm.log')\nend\n\n# Tools will automatically use this logger\ntool = SharedTools::Tools::BrowserTool.new\n</code></pre>"},{"location":"api/#parameter-types","title":"Parameter Types","text":"<p>Tools use consistent parameter types:</p>"},{"location":"api/#string-parameters","title":"String Parameters","text":"<pre><code>url: \"https://example.com\"           # URLs\npath: \"./file.txt\"                   # File paths\ntext: \"Hello, World!\"                # Text content\nselector: \"button.submit\"            # CSS selectors\naction: \"visit\"                      # Action names\n</code></pre>"},{"location":"api/#integer-parameters","title":"Integer Parameters","text":"<pre><code>context_size: 2                      # Context window size\npage: 1                              # Page numbers\ntimeout: 30                          # Timeouts in seconds\n</code></pre>"},{"location":"api/#boolean-parameters","title":"Boolean Parameters","text":"<pre><code>full_html: true                      # Return full HTML vs summary\nsummarize: false                     # Enable summarization\n</code></pre>"},{"location":"api/#array-parameters","title":"Array Parameters","text":"<pre><code>statements: [                        # Array of SQL statements\n  \"SELECT * FROM users\",\n  \"INSERT INTO logs VALUES (...)\"\n]\n</code></pre>"},{"location":"api/#hash-parameters","title":"Hash Parameters","text":"<pre><code>options: {                           # Tool-specific options\n  headless: true,\n  timeout: 60\n}\n</code></pre>"},{"location":"api/#tool-naming-convention","title":"Tool Naming Convention","text":"<p>All tools follow a consistent naming pattern:</p> <pre><code># Class name\nSharedTools::Tools::BrowserTool\n\n# Tool name (for LLM)\nBrowserTool.name  # =&gt; \"browser_tool\"\n\n# Action constants\nSharedTools::Tools::BrowserTool::Action::VISIT\n\n# Sub-tools (internal)\nSharedTools::Tools::Browser::VisitTool\n</code></pre>"},{"location":"api/#version-compatibility","title":"Version Compatibility","text":"<p>Current version: 0.2.1</p> <ul> <li>RubyLLM: Required, version ~&gt; 0.4</li> <li>Zeitwerk: For autoloading</li> <li>Optional Dependencies:</li> <li><code>watir</code> for BrowserTool</li> <li><code>sqlite3</code> for SQLite database support</li> <li><code>pg</code> for PostgreSQL support</li> <li><code>pdf-reader</code> for DocTool</li> </ul>"},{"location":"api/#framework-evolution","title":"Framework Evolution","text":"<p>Starting with version 0.3.0, SharedTools will focus exclusively on RubyLLM support. Earlier versions included support for:</p> <ul> <li>OmniAI (deprecated)</li> <li>llm.rb (deprecated)</li> <li>Raix (deprecated)</li> </ul> <p>Migration guides will be provided for projects using older versions.</p>"},{"location":"api/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about RubyLLM::Tool base class</li> <li>Understand the Facade Pattern</li> <li>Read about Driver Interfaces</li> <li>Explore Example Workflows</li> <li>Review individual Tool Documentation</li> </ul>"},{"location":"api/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Issues: Report bugs or request features</li> <li>Examples: Check <code>/examples</code> directory for working code</li> <li>Tests: Review test files for usage patterns</li> <li>Source Code: All code is documented with YARD comments</li> </ul>"},{"location":"api/driver-interface/","title":"Driver Interface Documentation","text":"<p>Drivers are pluggable components that allow tools to work with different underlying implementations. This guide covers the driver interface pattern, implementing custom drivers, and using mock drivers for testing.</p>"},{"location":"api/driver-interface/#what-is-a-driver","title":"What is a Driver?","text":"<p>A driver is an adapter that translates tool commands into operations on an external system:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Tool     \u2502\u2500\u2500\u2500\u2500\u25b6\u2502    Driver    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502 External System \u2502\n\u2502 (BrowserTool)\u2502     \u2502(WatirDriver) \u2502     \u2502  (Web Browser)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"api/driver-interface/#benefits","title":"Benefits","text":"<ol> <li>Swappable Implementations: Use different browser engines, databases, etc.</li> <li>Testing: Use mock drivers for fast, deterministic tests</li> <li>Platform Independence: Different drivers for Mac, Linux, Windows</li> <li>Development: Mock responses during development</li> </ol>"},{"location":"api/driver-interface/#driver-types-in-sharedtools","title":"Driver Types in SharedTools","text":""},{"location":"api/driver-interface/#browserdriver","title":"BrowserDriver","text":"<p>Interfaces with web browsers:</p> <ul> <li>WatirDriver: Uses Watir gem for browser automation</li> <li>MockBrowserDriver: Returns predefined HTML for testing</li> </ul>"},{"location":"api/driver-interface/#databasedriver","title":"DatabaseDriver","text":"<p>Interfaces with databases:</p> <ul> <li>SqliteDriver: SQLite database operations</li> <li>PostgresDriver: PostgreSQL database operations</li> <li>MockDatabaseDriver: In-memory database simulation</li> </ul>"},{"location":"api/driver-interface/#diskdriver","title":"DiskDriver","text":"<p>Interfaces with file systems:</p> <ul> <li>LocalDriver: Real file system operations</li> <li>MockDiskDriver: In-memory file system for testing</li> </ul>"},{"location":"api/driver-interface/#computerdriver","title":"ComputerDriver","text":"<p>Interfaces with operating systems:</p> <ul> <li>MacDriver: macOS-specific operations (screenshots, mouse, keyboard)</li> <li>LinuxDriver: Linux-specific operations (future)</li> </ul>"},{"location":"api/driver-interface/#basedriver-classes","title":"BaseDriver Classes","text":"<p>Each driver type has a base class defining the interface:</p>"},{"location":"api/driver-interface/#browserbasedriver","title":"Browser::BaseDriver","text":"<pre><code>module SharedTools\n  module Tools\n    module Browser\n      class BaseDriver\n        TIMEOUT = Integer(ENV.fetch(\"OMNIAI_BROWSER_TIMEOUT\", 10))\n\n        def initialize(logger: Logger.new(IO::NULL))\n          @logger = logger\n        end\n\n        # Close the browser\n        def close\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Get current URL\n        # @return [String]\n        def url\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Get page title\n        # @return [String]\n        def title\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Get page HTML\n        # @return [String]\n        def html\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Take screenshot\n        # @yield [file]\n        def screenshot\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Navigate to URL\n        # @param url [String]\n        # @return [Hash]\n        def goto(url:)\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Fill in form field\n        # @param selector [String]\n        # @param text [String]\n        # @return [Hash]\n        def fill_in(selector:, text:)\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n\n        # Click element\n        # @param selector [String]\n        # @return [Hash]\n        def click(selector:)\n          raise NotImplementedError, \"#{self.class.name}##{__method__} undefined\"\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#databasebasedriver","title":"Database::BaseDriver","text":"<pre><code>module SharedTools\n  module Tools\n    module Database\n      class BaseDriver\n        # Execute SQL statement\n        # @param statement [String] e.g. \"SELECT * FROM users\"\n        # @return [Hash] e.g. { status: :ok, result: [[1, \"John\"], [2, \"Jane\"]] }\n        def perform(statement:)\n          raise NotImplementedError, \"#{self.class}##{__method__} undefined\"\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#diskbasedriver","title":"Disk::BaseDriver","text":"<pre><code>module SharedTools\n  module Tools\n    module Disk\n      class BaseDriver\n        # Directory operations\n        def directory_create(path:)\n          raise NotImplementedError\n        end\n\n        def directory_delete(path:)\n          raise NotImplementedError\n        end\n\n        def directory_move(path:, destination:)\n          raise NotImplementedError\n        end\n\n        def directory_list(path:)\n          raise NotImplementedError\n        end\n\n        # File operations\n        def file_create(path:)\n          raise NotImplementedError\n        end\n\n        def file_delete(path:)\n          raise NotImplementedError\n        end\n\n        def file_move(path:, destination:)\n          raise NotImplementedError\n        end\n\n        def file_read(path:)\n          raise NotImplementedError\n        end\n\n        def file_write(path:, text:)\n          raise NotImplementedError\n        end\n\n        def file_replace(path:, old_text:, new_text:)\n          raise NotImplementedError\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#computerbasedriver","title":"Computer::BaseDriver","text":"<pre><code>module SharedTools\n  module Tools\n    module Computer\n      class BaseDriver\n        def screenshot\n          raise NotImplementedError\n        end\n\n        def screen_info\n          raise NotImplementedError\n        end\n\n        def mouse_move(x:, y:)\n          raise NotImplementedError\n        end\n\n        def mouse_click(button: :left)\n          raise NotImplementedError\n        end\n\n        def keyboard_type(text:)\n          raise NotImplementedError\n        end\n\n        def clipboard_get\n          raise NotImplementedError\n        end\n\n        def clipboard_set(text:)\n          raise NotImplementedError\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#implementing-custom-drivers","title":"Implementing Custom Drivers","text":""},{"location":"api/driver-interface/#example-custom-browser-driver","title":"Example: Custom Browser Driver","text":"<pre><code>require 'selenium-webdriver'\n\nmodule SharedTools\n  module Tools\n    module Browser\n      class SeleniumDriver &lt; BaseDriver\n        def initialize(browser: :chrome, logger: Logger.new(IO::NULL))\n          super(logger: logger)\n          @driver = Selenium::WebDriver.for(browser)\n        end\n\n        def close\n          @driver.quit\n        end\n\n        def url\n          @driver.current_url\n        end\n\n        def title\n          @driver.title\n        end\n\n        def html\n          @driver.page_source\n        end\n\n        def screenshot\n          tempfile = Tempfile.new(['screenshot', '.png'])\n          @driver.save_screenshot(tempfile.path)\n          yield tempfile\n        ensure\n          tempfile.close\n          tempfile.unlink\n        end\n\n        def goto(url:)\n          @logger.info(\"Navigating to #{url}\")\n          @driver.get(url)\n          { status: :ok, message: \"Navigated to #{url}\" }\n        end\n\n        def fill_in(selector:, text:)\n          @logger.info(\"Filling #{selector} with text\")\n          element = @driver.find_element(:css, selector)\n          element.clear\n          element.send_keys(text)\n          { status: :ok }\n        end\n\n        def click(selector:)\n          @logger.info(\"Clicking #{selector}\")\n          element = @driver.find_element(:css, selector)\n          element.click\n          { status: :ok }\n        end\n      end\n    end\n  end\nend\n\n# Usage\ndriver = SharedTools::Tools::Browser::SeleniumDriver.new(browser: :firefox)\nbrowser = SharedTools::Tools::BrowserTool.new(driver: driver)\n</code></pre>"},{"location":"api/driver-interface/#example-custom-database-driver","title":"Example: Custom Database Driver","text":"<pre><code>require 'mysql2'\n\nmodule SharedTools\n  module Tools\n    module Database\n      class MysqlDriver &lt; BaseDriver\n        def initialize(host:, database:, username:, password:)\n          @client = Mysql2::Client.new(\n            host: host,\n            database: database,\n            username: username,\n            password: password\n          )\n        end\n\n        def perform(statement:)\n          if statement.match?(/^\\s*SELECT/i)\n            result = @client.query(statement)\n            rows = result.map { |row| row.values }\n            { status: :ok, result: rows }\n          else\n            @client.query(statement)\n            { status: :ok, result: \"#{@client.affected_rows} rows affected\" }\n          end\n        rescue Mysql2::Error =&gt; e\n          { status: :error, result: e.message }\n        end\n\n        def close\n          @client.close\n        end\n      end\n    end\n  end\nend\n\n# Usage\ndriver = SharedTools::Tools::Database::MysqlDriver.new(\n  host: 'localhost',\n  database: 'mydb',\n  username: 'user',\n  password: 'pass'\n)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"api/driver-interface/#example-custom-disk-driver-s3","title":"Example: Custom Disk Driver (S3)","text":"<pre><code>require 'aws-sdk-s3'\n\nmodule SharedTools\n  module Tools\n    module Disk\n      class S3Driver &lt; BaseDriver\n        def initialize(bucket:, region: 'us-east-1')\n          @bucket = bucket\n          @s3 = Aws::S3::Client.new(region: region)\n        end\n\n        def file_read(path:)\n          response = @s3.get_object(bucket: @bucket, key: path)\n          response.body.read\n        rescue Aws::S3::Errors::NoSuchKey\n          raise \"File not found: #{path}\"\n        end\n\n        def file_write(path:, text:)\n          @s3.put_object(\n            bucket: @bucket,\n            key: path,\n            body: text\n          )\n          \"Wrote to s3://#{@bucket}/#{path}\"\n        end\n\n        def file_delete(path:)\n          @s3.delete_object(bucket: @bucket, key: path)\n          \"Deleted s3://#{@bucket}/#{path}\"\n        end\n\n        def directory_list(path:)\n          response = @s3.list_objects_v2(\n            bucket: @bucket,\n            prefix: path\n          )\n          response.contents.map(&amp;:key)\n        end\n\n        # Implement other required methods...\n      end\n    end\n  end\nend\n\n# Usage\ndriver = SharedTools::Tools::Disk::S3Driver.new(bucket: 'my-bucket')\ndisk = SharedTools::Tools::DiskTool.new(driver: driver)\n</code></pre>"},{"location":"api/driver-interface/#mock-drivers-for-testing","title":"Mock Drivers for Testing","text":""},{"location":"api/driver-interface/#mockbrowserdriver","title":"MockBrowserDriver","text":"<pre><code>class MockBrowserDriver &lt; SharedTools::Tools::Browser::BaseDriver\n  attr_reader :current_url, :actions\n\n  def initialize(responses: {})\n    @responses = responses\n    @current_url = nil\n    @actions = []\n  end\n\n  def goto(url:)\n    @actions &lt;&lt; { action: :goto, url: url }\n    @current_url = url\n    \"Navigated to #{url}\"\n  end\n\n  def html\n    @responses[@current_url] || \"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Default Page&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\n  end\n\n  def title\n    \"Mock Page\"\n  end\n\n  def url\n    @current_url\n  end\n\n  def click(selector:)\n    @actions &lt;&lt; { action: :click, selector: selector }\n    \"Clicked #{selector}\"\n  end\n\n  def fill_in(selector:, text:)\n    @actions &lt;&lt; { action: :fill_in, selector: selector, text: text }\n    \"Filled #{selector}\"\n  end\n\n  def screenshot\n    # Return mock PNG data\n    yield StringIO.new(\"fake-png-data\")\n  end\n\n  def close\n    # No-op\n  end\nend\n\n# Usage in tests\nRSpec.describe \"Web scraping\" do\n  let(:responses) do\n    {\n      \"https://example.com/products\" =&gt; &lt;&lt;~HTML\n        &lt;html&gt;\n          &lt;body&gt;\n            &lt;div class=\"product\"&gt;Widget&lt;/div&gt;\n          &lt;/body&gt;\n        &lt;/html&gt;\n      HTML\n    }\n  end\n\n  let(:driver) { MockBrowserDriver.new(responses: responses) }\n  let(:browser) { SharedTools::Tools::BrowserTool.new(driver: driver) }\n\n  it \"scrapes products\" do\n    browser.execute(action: \"visit\", url: \"https://example.com/products\")\n    html = browser.execute(action: \"page_inspect\", full_html: true)\n\n    expect(html).to include(\"Widget\")\n    expect(driver.actions).to include(\n      hash_including(action: :goto, url: \"https://example.com/products\")\n    )\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#mockdatabasedriver","title":"MockDatabaseDriver","text":"<pre><code>class MockDatabaseDriver &lt; SharedTools::Tools::Database::BaseDriver\n  def initialize\n    @tables = {}\n    @statements = []\n  end\n\n  def perform(statement:)\n    @statements &lt;&lt; statement\n\n    case statement\n    when /CREATE TABLE (\\w+)/\n      table_name = $1\n      @tables[table_name] = []\n      { status: :ok, result: \"Table #{table_name} created\" }\n\n    when /INSERT INTO (\\w+).*VALUES \\((.*)\\)/\n      table_name = $1\n      values = $2.split(',').map(&amp;:strip).map { |v| v.gsub(/['\"]/, '') }\n      @tables[table_name] ||= []\n      @tables[table_name] &lt;&lt; values\n      { status: :ok, result: \"1 row inserted\" }\n\n    when /SELECT \\* FROM (\\w+)/\n      table_name = $1\n      { status: :ok, result: @tables[table_name] || [] }\n\n    else\n      { status: :error, result: \"Unsupported statement\" }\n    end\n  end\n\n  attr_reader :statements, :tables\nend\n\n# Usage in tests\nRSpec.describe \"Database operations\" do\n  let(:driver) { MockDatabaseDriver.new }\n  let(:database) { SharedTools::Tools::DatabaseTool.new(driver: driver) }\n\n  it \"creates table and inserts data\" do\n    results = database.execute(statements: [\n      \"CREATE TABLE users (id, name)\",\n      \"INSERT INTO users VALUES (1, 'Alice')\",\n      \"SELECT * FROM users\"\n    ])\n\n    expect(results.last[:result]).to eq([[\"1\", \"Alice\"]])\n    expect(driver.tables[\"users\"]).to eq([[\"1\", \"Alice\"]])\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#driver-configuration","title":"Driver Configuration","text":""},{"location":"api/driver-interface/#environment-based-configuration","title":"Environment-based Configuration","text":"<pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def initialize(driver: nil, logger: nil)\n    @driver = driver || default_driver\n    @logger = logger || RubyLLM.logger\n  end\n\n  private\n\n  def default_driver\n    case ENV.fetch('BROWSER_DRIVER', 'watir')\n    when 'watir'\n      Browser::WatirDriver.new(logger: @logger)\n    when 'selenium'\n      Browser::SeleniumDriver.new(logger: @logger)\n    else\n      raise \"Unknown browser driver: #{ENV['BROWSER_DRIVER']}\"\n    end\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#configuration-objects","title":"Configuration Objects","text":"<pre><code>class DriverConfig\n  attr_accessor :browser_driver, :database_driver, :disk_driver\n\n  def initialize\n    @browser_driver = :watir\n    @database_driver = :sqlite\n    @disk_driver = :local\n  end\nend\n\nSharedTools.configure do |config|\n  config.browser_driver = :selenium\n  config.database_driver = :postgres\nend\n</code></pre>"},{"location":"api/driver-interface/#driver-best-practices","title":"Driver Best Practices","text":""},{"location":"api/driver-interface/#1-implement-all-required-methods","title":"1. Implement All Required Methods","text":"<pre><code>class MyDriver &lt; BaseDriver\n  # Implement EVERY method from BaseDriver\n  # Use NotImplementedError for unsupported operations:\n  def unsupported_method\n    raise NotImplementedError, \"This driver does not support this operation\"\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#2-handle-errors-consistently","title":"2. Handle Errors Consistently","text":"<pre><code>def perform(statement:)\n  result = execute_statement(statement)\n  { status: :ok, result: result }\nrescue SpecificError =&gt; e\n  { status: :error, result: e.message }\nend\n</code></pre>"},{"location":"api/driver-interface/#3-log-operations","title":"3. Log Operations","text":"<pre><code>def goto(url:)\n  @logger.info(\"Navigating to #{url}\")\n  perform_navigation(url)\n  @logger.info(\"Navigation complete\")\nend\n</code></pre>"},{"location":"api/driver-interface/#4-clean-up-resources","title":"4. Clean Up Resources","text":"<pre><code>def close\n  @connection&amp;.close\n  @temp_files.each(&amp;:unlink)\n  @connection = nil\nend\n</code></pre>"},{"location":"api/driver-interface/#5-provide-helpful-error-messages","title":"5. Provide Helpful Error Messages","text":"<pre><code>def click(selector:)\n  element = find_element(selector)\n  raise \"Element not found: #{selector}\" unless element\n\n  element.click\nrescue ElementNotClickableError =&gt; e\n  raise \"Cannot click #{selector}: #{e.message}\"\nend\n</code></pre>"},{"location":"api/driver-interface/#testing-drivers","title":"Testing Drivers","text":"<pre><code>RSpec.describe SharedTools::Tools::Browser::WatirDriver do\n  let(:driver) { described_class.new }\n\n  after { driver.close }\n\n  it \"navigates to URL\" do\n    result = driver.goto(url: \"https://example.com\")\n    expect(result).to include(status: :ok)\n    expect(driver.url).to eq(\"https://example.com\")\n  end\n\n  it \"gets page HTML\" do\n    driver.goto(url: \"https://example.com\")\n    html = driver.html\n    expect(html).to include(\"&lt;html\")\n  end\n\n  it \"clicks elements\" do\n    driver.goto(url: \"https://example.com\")\n    expect {\n      driver.click(selector: \"#button\")\n    }.not_to raise_error\n  end\nend\n</code></pre>"},{"location":"api/driver-interface/#next-steps","title":"Next Steps","text":"<ul> <li>Review Tool Base Class documentation</li> <li>Learn about Facade Pattern</li> <li>See Example Implementations</li> <li>Check out existing Driver Source Code</li> </ul>"},{"location":"api/facade-pattern/","title":"Facade Pattern in SharedTools","text":"<p>Complex tools in SharedTools use the Facade pattern to provide a simple, unified interface while delegating to specialized sub-tools. This guide explains the architecture, benefits, and implementation patterns.</p>"},{"location":"api/facade-pattern/#what-is-the-facade-pattern","title":"What is the Facade Pattern?","text":"<p>The Facade pattern provides a simplified interface to a complex subsystem. In SharedTools:</p> <ul> <li>Facade Tool: A high-level tool (e.g., BrowserTool) that LLMs interact with</li> <li>Sub-tools: Specialized tools (e.g., VisitTool, ClickTool) that do the actual work</li> <li>Driver: The underlying implementation (e.g., WatirDriver) that interfaces with external systems</li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              BrowserTool (Facade)                \u2502\n\u2502  - Unified execute(action:, **params) interface \u2502\n\u2502  - Parameter validation                          \u2502\n\u2502  - Action routing                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502             \u2502              \u2502             \u2502\n    \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502VisitTool \u2502  \u2502ClickTool \u2502  \u2502InspectToo\u2502  \u2502Screenshot\u2502\n    \u2502          \u2502  \u2502          \u2502  \u2502l         \u2502  \u2502Tool      \u2502\n    \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502             \u2502              \u2502             \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                            \u2502\n                     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                     \u2502WatirDriver  \u2502\n                     \u2502(Browser API)\u2502\n                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"api/facade-pattern/#why-use-the-facade-pattern","title":"Why Use the Facade Pattern?","text":""},{"location":"api/facade-pattern/#benefits-for-llms","title":"Benefits for LLMs","text":"<ol> <li>Single Interface: LLMs interact with one tool instead of many</li> <li>Consistent API: All actions use the same <code>execute</code> method</li> <li>Action-based: Natural verb-based interface (visit, click, inspect)</li> <li>Parameter Validation: Centralized validation before delegation</li> </ol>"},{"location":"api/facade-pattern/#benefits-for-developers","title":"Benefits for Developers","text":"<ol> <li>Separation of Concerns: Each sub-tool handles one responsibility</li> <li>Testability: Test sub-tools independently</li> <li>Maintainability: Changes to one action don't affect others</li> <li>Extensibility: Add new actions by adding sub-tools</li> </ol>"},{"location":"api/facade-pattern/#benefits-for-users","title":"Benefits for Users","text":"<ol> <li>Simplicity: One tool to learn instead of many</li> <li>Discoverability: All actions documented in one place</li> <li>Consistency: Similar patterns across all tools</li> </ol>"},{"location":"api/facade-pattern/#facade-architecture","title":"Facade Architecture","text":""},{"location":"api/facade-pattern/#the-facade-tool","title":"The Facade Tool","text":"<p>The facade tool provides the public interface:</p> <pre><code>module SharedTools\n  module Tools\n    class BrowserTool &lt; ::RubyLLM::Tool\n      def self.name = 'browser_tool'\n\n      # Define action constants\n      module Action\n        VISIT = \"visit\"\n        CLICK = \"click\"\n        PAGE_INSPECT = \"page_inspect\"\n        SCREENSHOT = \"screenshot\"\n      end\n\n      # Comprehensive description\n      description &lt;&lt;~TEXT\n        Automates a web browser to perform various actions...\n\n        1. `visit` - Navigate to a website\n        2. `click` - Click an element\n        3. `page_inspect` - Get page HTML\n        4. `screenshot` - Take a screenshot\n      TEXT\n\n      # Define all possible parameters\n      param :action, desc: \"The action to perform\"\n      param :url, desc: \"URL (required for visit)\"\n      param :selector, desc: \"CSS selector (required for click)\"\n      param :full_html, desc: \"Get full HTML vs summary\"\n\n      def initialize(driver: nil, logger: nil)\n        @driver = driver || default_driver\n        @logger = logger || RubyLLM.logger\n      end\n\n      # Central routing method\n      def execute(action:, **params)\n        case action.to_s.downcase\n        when Action::VISIT\n          require_param!(:url, params[:url])\n          visit_tool.execute(url: params[:url])\n\n        when Action::CLICK\n          require_param!(:selector, params[:selector])\n          click_tool.execute(selector: params[:selector])\n\n        when Action::PAGE_INSPECT\n          page_inspect_tool.execute(full_html: params[:full_html] || false)\n\n        when Action::SCREENSHOT\n          screenshot_tool.execute\n\n        else\n          raise ArgumentError, \"Unknown action: #{action}\"\n        end\n      end\n\n      private\n\n      # Lazy-load sub-tools\n      def visit_tool\n        @visit_tool ||= Browser::VisitTool.new(\n          driver: @driver,\n          logger: @logger\n        )\n      end\n\n      def click_tool\n        @click_tool ||= Browser::ClickTool.new(\n          driver: @driver,\n          logger: @logger\n        )\n      end\n\n      def page_inspect_tool\n        @page_inspect_tool ||= Browser::PageInspectTool.new(\n          driver: @driver,\n          logger: @logger\n        )\n      end\n\n      def screenshot_tool\n        @screenshot_tool ||= Browser::PageScreenshotTool.new(\n          driver: @driver,\n          logger: @logger\n        )\n      end\n\n      def require_param!(name, value)\n        raise ArgumentError, \"#{name} required for this action\" if value.nil?\n      end\n\n      def default_driver\n        if defined?(Watir)\n          Browser::WatirDriver.new(logger: @logger)\n        else\n          raise LoadError, \"BrowserTool requires watir gem or a driver\"\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#sub-tools","title":"Sub-tools","text":"<p>Sub-tools handle specific operations:</p> <pre><code>module SharedTools\n  module Tools\n    module Browser\n      # Sub-tool for visiting URLs\n      class VisitTool\n        def initialize(driver:, logger:)\n          @driver = driver\n          @logger = logger\n        end\n\n        def execute(url:)\n          @logger.info(\"Visiting #{url}\")\n          @driver.goto(url: url)\n          \"Navigated to #{url}\"\n        end\n      end\n\n      # Sub-tool for clicking elements\n      class ClickTool\n        def initialize(driver:, logger:)\n          @driver = driver\n          @logger = logger\n        end\n\n        def execute(selector:)\n          @logger.info(\"Clicking #{selector}\")\n          @driver.click(selector: selector)\n          \"Clicked element: #{selector}\"\n        end\n      end\n\n      # Sub-tool for page inspection\n      class PageInspectTool\n        def initialize(driver:, logger:)\n          @driver = driver\n          @logger = logger\n        end\n\n        def execute(full_html: false, summarize: false)\n          @logger.info(\"Inspecting page (full: #{full_html}, summary: #{summarize})\")\n\n          if full_html\n            @driver.html\n          elsif summarize\n            HTMLSummarizer.new(@driver.html).summarize\n          else\n            @driver.html\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#sub-tool-guidelines","title":"Sub-tool Guidelines","text":"<ol> <li>Single Responsibility: Each sub-tool does one thing</li> <li>No RubyLLM::Tool: Sub-tools are plain Ruby classes</li> <li>Shared Dependencies: Driver and logger passed from facade</li> <li>Simple Interface: Usually one <code>execute</code> method</li> <li>Return Values: Return meaningful results</li> </ol>"},{"location":"api/facade-pattern/#real-world-examples","title":"Real-World Examples","text":""},{"location":"api/facade-pattern/#disktool-facade","title":"DiskTool Facade","text":"<pre><code>class DiskTool &lt; ::RubyLLM::Tool\n  module Action\n    FILE_READ = \"file_read\"\n    FILE_WRITE = \"file_write\"\n    FILE_CREATE = \"file_create\"\n    FILE_DELETE = \"file_delete\"\n    FILE_MOVE = \"file_move\"\n    FILE_REPLACE = \"file_replace\"\n    DIRECTORY_CREATE = \"directory_create\"\n    DIRECTORY_DELETE = \"directory_delete\"\n    DIRECTORY_MOVE = \"directory_move\"\n    DIRECTORY_LIST = \"directory_list\"\n  end\n\n  def execute(action:, path:, **params)\n    case action\n    when Action::FILE_READ\n      @driver.file_read(path: path)\n    when Action::FILE_WRITE\n      @driver.file_write(path: path, text: params[:text])\n    when Action::FILE_CREATE\n      @driver.file_create(path: path)\n    when Action::FILE_DELETE\n      @driver.file_delete(path: path)\n    when Action::FILE_MOVE\n      @driver.file_move(path: path, destination: params[:destination])\n    when Action::FILE_REPLACE\n      @driver.file_replace(\n        path: path,\n        old_text: params[:old_text],\n        new_text: params[:new_text]\n      )\n    when Action::DIRECTORY_CREATE\n      @driver.directory_create(path: path)\n    when Action::DIRECTORY_DELETE\n      @driver.directory_delete(path: path)\n    when Action::DIRECTORY_MOVE\n      @driver.directory_move(path: path, destination: params[:destination])\n    when Action::DIRECTORY_LIST\n      @driver.directory_list(path: path)\n    end\n  end\nend\n</code></pre> <p>Note: DiskTool delegates directly to driver methods rather than sub-tools. This is valid when operations are simple enough not to require separate classes.</p>"},{"location":"api/facade-pattern/#databasetool-facade","title":"DatabaseTool Facade","text":"<pre><code>class DatabaseTool &lt; ::RubyLLM::Tool\n  def execute(statements:)\n    results = []\n\n    statements.each do |statement|\n      result = perform(statement: statement)\n      results &lt;&lt; result.merge(statement: statement)\n      break unless result[:status] == :ok\n    end\n\n    results\n  end\n\n  private\n\n  def perform(statement:)\n    @logger&amp;.info(\"Executing: #{statement}\")\n    @driver.perform(statement: statement)\n  end\nend\n</code></pre> <p>DatabaseTool uses a simpler pattern with statement execution loop.</p>"},{"location":"api/facade-pattern/#implementation-patterns","title":"Implementation Patterns","text":""},{"location":"api/facade-pattern/#pattern-1-sub-tool-delegation","title":"Pattern 1: Sub-tool Delegation","text":"<p>Best for complex operations requiring multiple steps:</p> <pre><code>def execute(action:, **params)\n  case action\n  when \"complex_action\"\n    complex_action_tool.execute(**params)\n  end\nend\n\nprivate\n\ndef complex_action_tool\n  @complex_action_tool ||= ComplexActionTool.new(\n    driver: @driver,\n    logger: @logger,\n    config: @config\n  )\nend\n</code></pre>"},{"location":"api/facade-pattern/#pattern-2-direct-driver-delegation","title":"Pattern 2: Direct Driver Delegation","text":"<p>Best for simple operations:</p> <pre><code>def execute(action:, path:)\n  case action\n  when \"simple_action\"\n    @driver.simple_action(path: path)\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#pattern-3-mixed-approach","title":"Pattern 3: Mixed Approach","text":"<p>Use sub-tools for complex operations, direct calls for simple ones:</p> <pre><code>def execute(action:, **params)\n  case action\n  when \"complex_action\"\n    complex_tool.execute(**params)  # Delegate to sub-tool\n  when \"simple_action\"\n    @driver.simple_action(**params)  # Direct driver call\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#parameter-handling","title":"Parameter Handling","text":""},{"location":"api/facade-pattern/#extracting-required-parameters","title":"Extracting Required Parameters","text":"<pre><code>def execute(action:, **params)\n  case action\n  when Action::VISIT\n    url = params.fetch(:url) { raise ArgumentError, \"url required\" }\n    visit_tool.execute(url: url)\n\n  when Action::CLICK\n    selector = params.fetch(:selector) { raise \"selector required\" }\n    click_tool.execute(selector: selector)\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#optional-parameters-with-defaults","title":"Optional Parameters with Defaults","text":"<pre><code>def execute(action:, **params)\n  case action\n  when Action::PAGE_INSPECT\n    full_html = params.fetch(:full_html, false)\n    context_size = params.fetch(:context_size, 2)\n\n    page_inspect_tool.execute(\n      full_html: full_html,\n      context_size: context_size\n    )\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#parameter-validation-helper","title":"Parameter Validation Helper","text":"<pre><code>private\n\ndef require_param!(name, value)\n  raise ArgumentError, \"#{name} is required for this action\" if value.nil?\nend\n\ndef require_params!(params, *names)\n  names.each do |name|\n    require_param!(name, params[name])\n  end\nend\n\n# Usage\ndef execute(action:, **params)\n  case action\n  when Action::TEXT_FIELD_SET\n    require_params!(params, :selector, :value)\n    text_field_tool.execute(\n      selector: params[:selector],\n      value: params[:value]\n    )\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#testing-facade-tools","title":"Testing Facade Tools","text":""},{"location":"api/facade-pattern/#test-the-facade","title":"Test the Facade","text":"<pre><code>RSpec.describe SharedTools::Tools::BrowserTool do\n  let(:driver) { instance_double(Browser::WatirDriver) }\n  let(:tool) { described_class.new(driver: driver) }\n\n  describe \"action routing\" do\n    it \"routes visit action to driver\" do\n      expect(driver).to receive(:goto).with(url: \"https://test.com\")\n      tool.execute(action: \"visit\", url: \"https://test.com\")\n    end\n\n    it \"routes click action to driver\" do\n      expect(driver).to receive(:click).with(selector: \".button\")\n      tool.execute(action: \"click\", selector: \".button\")\n    end\n\n    it \"raises error for invalid action\" do\n      expect {\n        tool.execute(action: \"invalid\")\n      }.to raise_error(ArgumentError, /Unknown action/)\n    end\n  end\n\n  describe \"parameter validation\" do\n    it \"requires url for visit action\" do\n      expect {\n        tool.execute(action: \"visit\")\n      }.to raise_error(ArgumentError, /url.*required/)\n    end\n\n    it \"requires selector for click action\" do\n      expect {\n        tool.execute(action: \"click\")\n      }.to raise_error(ArgumentError, /selector.*required/)\n    end\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#test-sub-tools-independently","title":"Test Sub-tools Independently","text":"<pre><code>RSpec.describe SharedTools::Tools::Browser::VisitTool do\n  let(:driver) { instance_double(Browser::WatirDriver) }\n  let(:logger) { instance_double(Logger) }\n  let(:tool) { described_class.new(driver: driver, logger: logger) }\n\n  it \"navigates to URL\" do\n    expect(driver).to receive(:goto).with(url: \"https://test.com\")\n    expect(logger).to receive(:info).with(/Visiting/)\n\n    result = tool.execute(url: \"https://test.com\")\n    expect(result).to include(\"Navigated\")\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"api/facade-pattern/#action-registry","title":"Action Registry","text":"<p>For tools with many actions:</p> <pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  ACTIONS = {\n    \"visit\" =&gt; :handle_visit,\n    \"click\" =&gt; :handle_click,\n    \"inspect\" =&gt; :handle_inspect\n  }.freeze\n\n  def execute(action:, **params)\n    handler = ACTIONS[action.to_s.downcase]\n    raise ArgumentError, \"Unknown action: #{action}\" unless handler\n\n    send(handler, **params)\n  end\n\n  private\n\n  def handle_visit(url:, **_)\n    visit_tool.execute(url: url)\n  end\n\n  def handle_click(selector:, **_)\n    click_tool.execute(selector: selector)\n  end\n\n  def handle_inspect(full_html: false, **_)\n    inspect_tool.execute(full_html: full_html)\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#middleware-pattern","title":"Middleware Pattern","text":"<p>Add cross-cutting concerns:</p> <pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def execute(action:, **params)\n    with_authorization(action, params) do\n      with_timing(action) do\n        with_error_handling(action) do\n          route_action(action, **params)\n        end\n      end\n    end\n  end\n\n  private\n\n  def with_authorization(action, params)\n    return yield if SharedTools.auto_execute\n\n    if SharedTools.execute?(tool: self.class.name, stuff: describe_action(action, params))\n      yield\n    end\n  end\n\n  def with_timing(action)\n    start = Time.now\n    result = yield\n    @logger.info(\"#{action} took #{Time.now - start}s\")\n    result\n  end\n\n  def with_error_handling(action)\n    yield\n  rescue =&gt; e\n    @logger.error(\"#{action} failed: #{e.message}\")\n    raise\n  end\n\n  def route_action(action, **params)\n    case action\n    when \"visit\" then visit_tool.execute(**params)\n    when \"click\" then click_tool.execute(**params)\n    end\n  end\nend\n</code></pre>"},{"location":"api/facade-pattern/#when-to-use-facades","title":"When to Use Facades","text":""},{"location":"api/facade-pattern/#use-facades-when","title":"Use Facades When:","text":"<ul> <li>Tool has multiple related operations (visit, click, inspect)</li> <li>Operations share common resources (driver, logger)</li> <li>LLM needs simple, action-based interface</li> <li>Sub-operations are complex enough to warrant separate classes</li> </ul>"},{"location":"api/facade-pattern/#dont-use-facades-when","title":"Don't Use Facades When:","text":"<ul> <li>Tool has only one operation</li> <li>Operations are too simple to warrant sub-tools</li> <li>No shared state or resources</li> <li>Direct driver delegation is clearer</li> </ul>"},{"location":"api/facade-pattern/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Driver Interfaces</li> <li>Review the RubyLLM::Tool Base Class</li> <li>Explore BrowserTool implementation</li> <li>See Example Workflows using facades</li> </ul>"},{"location":"api/tool-base/","title":"RubyLLM::Tool Base Class","text":"<p>All SharedTools extend <code>RubyLLM::Tool</code>, which provides a consistent DSL for defining tool parameters, descriptions, and execution logic. This guide covers the base class API and patterns.</p>"},{"location":"api/tool-base/#overview","title":"Overview","text":"<p><code>RubyLLM::Tool</code> is the foundation class from the RubyLLM gem that provides:</p> <ul> <li>Parameter definition DSL</li> <li>Tool description methods</li> <li>Standardized execute interface</li> <li>Integration with RubyLLM's tool system</li> </ul>"},{"location":"api/tool-base/#basic-tool-structure","title":"Basic Tool Structure","text":"<p>Every tool follows this basic structure:</p> <pre><code>module SharedTools\n  module Tools\n    class MyTool &lt; ::RubyLLM::Tool\n      # 1. Define tool name (as snake_case)\n      def self.name = 'my_tool'\n\n      # 2. Describe what the tool does\n      description &lt;&lt;~TEXT\n        A brief description of what this tool does.\n\n        Include usage examples and important notes.\n      TEXT\n\n      # 3. Define parameters\n      param :action, desc: \"The action to perform\"\n      param :path, desc: \"The file path (optional)\", required: false\n\n      # 4. Implement initialization\n      def initialize(driver: nil, logger: nil)\n        @driver = driver\n        @logger = logger || RubyLLM.logger\n      end\n\n      # 5. Implement execute method\n      def execute(action:, path: nil)\n        @logger&amp;.info(\"Executing #{action} on #{path}\")\n        # Implementation here\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#the-parameter-dsl","title":"The Parameter DSL","text":""},{"location":"api/tool-base/#defining-parameters-with-param","title":"Defining Parameters with <code>param</code>","text":"<p>The <code>param</code> method defines the parameters your tool accepts:</p> <pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  # Required parameter\n  param :action, desc: \"The browser action to perform\"\n\n  # Optional parameter\n  param :url, desc: \"The URL to visit (required for visit action)\"\n\n  # Parameter with detailed description\n  param :selector, desc: &lt;&lt;~TEXT\n    A CSS selector to locate an element:\n\n    * 'button[type=\"submit\"]': selects a submit button\n    * '.class-name': selects elements by class\n    * '#id-name': selects an element by ID\n\n    Required for click and text_field_set actions.\n  TEXT\n\n  # Parameter with examples\n  param :context_size, desc: &lt;&lt;~TEXT\n    Number of parent elements to include (default: 2).\n\n    Examples:\n    - 1: Show only immediate parent\n    - 2: Show parent and grandparent (default)\n    - 3: Show three levels of context\n  TEXT\nend\n</code></pre>"},{"location":"api/tool-base/#parameter-description-best-practices","title":"Parameter Description Best Practices","text":"<ol> <li>Be Specific: Clearly state what the parameter does</li> <li>Include Examples: Show concrete usage examples</li> <li>Note Requirements: Indicate when the parameter is required</li> <li>Explain Defaults: Document default values</li> <li>List Options: For enum-like parameters, list all valid values</li> </ol> <p>Example of a well-documented parameter:</p> <pre><code>param :action, desc: &lt;&lt;~TEXT\n  The browser action to perform. Options:\n  * `visit`: Navigate to a website (requires url)\n  * `page_inspect`: Get page HTML or summary (optional: full_html)\n  * `click`: Click an element (requires selector)\n  * `text_field_set`: Enter text (requires selector and value)\n\n  Example: action: \"visit\"\nTEXT\n</code></pre>"},{"location":"api/tool-base/#the-description-method","title":"The Description Method","text":"<p>The <code>description</code> method provides a comprehensive overview of your tool:</p> <pre><code>description &lt;&lt;~TEXT\n  A tool for interacting with files and directories.\n\n  This tool can:\n  - Create, read, write, and delete files\n  - Create, list, move, and delete directories\n  - Replace text within files\n\n  ## Important Notes\n\n  - All paths are relative to the configured root directory\n  - File operations require proper permissions\n  - Use with caution as operations are destructive\n\n  ## Example Usage\n\n  Create and write to a file:\n    {\"action\": \"file_create\", \"path\": \"./demo.txt\"}\n    {\"action\": \"file_write\", \"path\": \"./demo.txt\", \"text\": \"Hello\"}\n\n  Read a file:\n    {\"action\": \"file_read\", \"path\": \"./demo.txt\"}\n\n  Replace text in a file:\n    {\"action\": \"file_replace\", \"path\": \"./demo.txt\",\n     \"old_text\": \"Hello\", \"new_text\": \"Hi\"}\nTEXT\n</code></pre>"},{"location":"api/tool-base/#description-best-practices","title":"Description Best Practices","text":"<ol> <li>Start with Purpose: Begin with what the tool does</li> <li>List Capabilities: Bullet point the main features</li> <li>Include Warnings: Note any dangerous or destructive operations</li> <li>Provide Examples: Show concrete usage examples</li> <li>Document Actions: List all available actions with required parameters</li> <li>Add Context: Explain when to use this tool vs others</li> </ol>"},{"location":"api/tool-base/#the-execute-method","title":"The Execute Method","text":"<p>The <code>execute</code> method is where your tool's logic lives:</p>"},{"location":"api/tool-base/#method-signature","title":"Method Signature","text":"<pre><code>def execute(action:, param1: nil, param2: default_value)\n  # Implementation\nend\n</code></pre> <p>Key points:</p> <ul> <li>Use keyword arguments for all parameters</li> <li>Provide default values for optional parameters</li> <li>Match parameters defined with <code>param</code> DSL</li> <li>Return consistent result types</li> </ul>"},{"location":"api/tool-base/#parameter-validation","title":"Parameter Validation","text":"<p>Always validate required parameters:</p> <pre><code>def execute(action:, url: nil, selector: nil)\n  case action\n  when \"visit\"\n    require_param!(:url, url)\n    visit(url)\n  when \"click\"\n    require_param!(:selector, selector)\n    click(selector)\n  else\n    raise ArgumentError, \"Unknown action: #{action}\"\n  end\nend\n\nprivate\n\ndef require_param!(name, value)\n  raise ArgumentError, \"#{name} is required for this action\" if value.nil?\nend\n</code></pre>"},{"location":"api/tool-base/#action-routing-pattern","title":"Action Routing Pattern","text":"<p>Use action constants and case statements for routing:</p> <pre><code>module Action\n  VISIT = \"visit\"\n  CLICK = \"click\"\n  SCREENSHOT = \"screenshot\"\nend\n\nACTIONS = [Action::VISIT, Action::CLICK, Action::SCREENSHOT].freeze\n\ndef execute(action:, **params)\n  case action.to_s.downcase\n  when Action::VISIT\n    handle_visit(**params)\n  when Action::CLICK\n    handle_click(**params)\n  when Action::SCREENSHOT\n    handle_screenshot(**params)\n  else\n    raise ArgumentError, \"Unknown action: #{action}. \" \\\n                        \"Valid actions: #{ACTIONS.join(', ')}\"\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#return-values","title":"Return Values","text":"<p>Be consistent with return values:</p> <pre><code>def execute(action:, path:)\n  case action\n  when \"file_read\"\n    # Return string content\n    File.read(path)\n\n  when \"file_write\"\n    File.write(path, text)\n    # Return success message\n    \"Successfully wrote to #{path}\"\n\n  when \"directory_list\"\n    # Return array of entries\n    Dir.entries(path)\n\n  when \"database_query\"\n    # Return hash with status\n    {\n      status: :ok,\n      result: db.execute(sql),\n      rows_affected: db.changes\n    }\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#initialization-patterns","title":"Initialization Patterns","text":""},{"location":"api/tool-base/#basic-initialization","title":"Basic Initialization","text":"<pre><code>class SimpleTool &lt; ::RubyLLM::Tool\n  def initialize(logger: nil)\n    @logger = logger || RubyLLM.logger\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#with-required-driver","title":"With Required Driver","text":"<pre><code>class DatabaseTool &lt; ::RubyLLM::Tool\n  def initialize(driver:, logger: nil)\n    raise ArgumentError, \"driver is required\" if driver.nil?\n    @driver = driver\n    @logger = logger || RubyLLM.logger\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#with-optional-driver-auto-detection","title":"With Optional Driver (Auto-detection)","text":"<pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def initialize(driver: nil, logger: nil)\n    @logger = logger || RubyLLM.logger\n    @driver = driver || default_driver\n  end\n\n  private\n\n  def default_driver\n    if defined?(Watir)\n      Browser::WatirDriver.new(logger: @logger)\n    else\n      raise LoadError, \"BrowserTool requires a driver or the watir gem\"\n    end\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#with-configuration-options","title":"With Configuration Options","text":"<pre><code>class CustomTool &lt; ::RubyLLM::Tool\n  def initialize(root: Dir.pwd, timeout: 30, logger: nil)\n    @root = root\n    @timeout = timeout\n    @logger = logger || RubyLLM.logger\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#logger-integration","title":"Logger Integration","text":"<p>All tools should support optional logging:</p> <pre><code>class MyTool &lt; ::RubyLLM::Tool\n  def initialize(logger: nil)\n    @logger = logger || RubyLLM.logger\n  end\n\n  def execute(action:, path:)\n    @logger&amp;.info(\"Executing #{action} on #{path}\")\n\n    begin\n      result = perform_action(action, path)\n      @logger&amp;.debug(\"Result: #{result.inspect}\")\n      result\n    rescue =&gt; e\n      @logger&amp;.error(\"Failed: #{e.message}\")\n      raise\n    end\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#logging-levels","title":"Logging Levels","text":"<p>Follow these conventions:</p> <pre><code># INFO: High-level operations\n@logger.info(\"BrowserTool: Navigating to #{url}\")\n\n# DEBUG: Detailed parameter values\n@logger.debug(\"Parameters: #{params.inspect}\")\n\n# WARN: Recoverable issues\n@logger.warn(\"Element not found, retrying...\")\n\n# ERROR: Failures and exceptions\n@logger.error(\"Failed to execute: #{e.message}\")\n</code></pre>"},{"location":"api/tool-base/#tool-naming-convention","title":"Tool Naming Convention","text":"<p>The <code>name</code> class method should return a snake_case string:</p> <pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def self.name = 'browser_tool'\nend\n\nclass MyCustomTool &lt; ::RubyLLM::Tool\n  def self.name = 'my_custom_tool'\nend\n</code></pre> <p>This name is used by:</p> <ul> <li>RubyLLM for tool registration</li> <li>LLM for tool invocation</li> <li>Logging and debugging</li> <li>Error messages</li> </ul>"},{"location":"api/tool-base/#resource-cleanup","title":"Resource Cleanup","text":"<p>Tools that manage resources should provide cleanup methods:</p> <pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def initialize(driver: nil)\n    @driver = driver || Browser::WatirDriver.new\n  end\n\n  def cleanup!\n    @driver&amp;.close\n    @driver = nil\n  end\n\n  # Alternative: Use Ruby's ObjectSpace finalizer\n  def initialize(driver: nil)\n    @driver = driver || Browser::WatirDriver.new\n\n    ObjectSpace.define_finalizer(self, self.class.finalize(@driver))\n  end\n\n  def self.finalize(driver)\n    proc { driver&amp;.close }\n  end\nend\n</code></pre> <p>Usage:</p> <pre><code>browser = SharedTools::Tools::BrowserTool.new\nbegin\n  browser.execute(action: \"visit\", url: \"https://example.com\")\nensure\n  browser.cleanup!\nend\n</code></pre>"},{"location":"api/tool-base/#testing-tool-implementations","title":"Testing Tool Implementations","text":""},{"location":"api/tool-base/#unit-testing","title":"Unit Testing","text":"<p>Test the tool in isolation:</p> <pre><code>RSpec.describe SharedTools::Tools::MyTool do\n  let(:logger) { instance_double(Logger) }\n  let(:tool) { described_class.new(logger: logger) }\n\n  describe \"#execute\" do\n    it \"handles valid action\" do\n      result = tool.execute(action: \"test_action\", path: \"./test\")\n      expect(result).to eq(\"success\")\n    end\n\n    it \"raises error for invalid action\" do\n      expect {\n        tool.execute(action: \"invalid\")\n      }.to raise_error(ArgumentError, /Unknown action/)\n    end\n\n    it \"requires path parameter\" do\n      expect {\n        tool.execute(action: \"test_action\")\n      }.to raise_error(ArgumentError, /path is required/)\n    end\n\n    it \"logs execution\" do\n      expect(logger).to receive(:info).with(/Executing test_action/)\n      tool.execute(action: \"test_action\", path: \"./test\")\n    end\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#integration-testing","title":"Integration Testing","text":"<p>Test with real or mock drivers:</p> <pre><code>RSpec.describe SharedTools::Tools::BrowserTool do\n  let(:driver) { MockBrowserDriver.new }\n  let(:tool) { described_class.new(driver: driver) }\n\n  it \"navigates to URL using driver\" do\n    expect(driver).to receive(:goto).with(url: \"https://test.com\")\n    tool.execute(action: \"visit\", url: \"https://test.com\")\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#common-patterns","title":"Common Patterns","text":""},{"location":"api/tool-base/#parameter-extraction","title":"Parameter Extraction","text":"<pre><code>def execute(action:, **params)\n  url = params[:url]\n  selector = params[:selector]\n  # Or use destructuring\n  # url, selector = params.values_at(:url, :selector)\n\n  perform_action(action, url, selector)\nend\n</code></pre>"},{"location":"api/tool-base/#default-values","title":"Default Values","text":"<pre><code>def execute(action:, timeout: 30, retries: 3)\n  options = {\n    timeout: timeout,\n    retries: retries\n  }\n\n  perform_with_options(action, options)\nend\n</code></pre>"},{"location":"api/tool-base/#boolean-flags","title":"Boolean Flags","text":"<pre><code>def execute(action:, full_html: false, summarize: true)\n  if full_html\n    get_full_html\n  elsif summarize\n    get_summary\n  else\n    get_basic_html\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#array-parameters","title":"Array Parameters","text":"<pre><code>def execute(statements:)\n  results = []\n\n  statements.each do |statement|\n    result = execute_single(statement)\n    results &lt;&lt; result\n    break if result[:status] == :error\n  end\n\n  results\nend\n</code></pre>"},{"location":"api/tool-base/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"api/tool-base/#delegation-to-sub-tools","title":"Delegation to Sub-tools","text":"<pre><code>class BrowserTool &lt; ::RubyLLM::Tool\n  def execute(action:, **params)\n    case action\n    when \"visit\"\n      visit_tool.execute(**params)\n    when \"click\"\n      click_tool.execute(**params)\n    end\n  end\n\n  private\n\n  def visit_tool\n    @visit_tool ||= Browser::VisitTool.new(driver: @driver, logger: @logger)\n  end\n\n  def click_tool\n    @click_tool ||= Browser::ClickTool.new(driver: @driver, logger: @logger)\n  end\nend\n</code></pre>"},{"location":"api/tool-base/#memoization","title":"Memoization","text":"<pre><code>def execute(action:, path:)\n  case action\n  when \"read\"\n    cached_read(path)\n  end\nend\n\nprivate\n\ndef cached_read(path)\n  @cache ||= {}\n  @cache[path] ||= File.read(path)\nend\n</code></pre>"},{"location":"api/tool-base/#authorization-checks","title":"Authorization Checks","text":"<pre><code>def execute(action:, path:)\n  return unless authorize!(action, path)\n\n  perform_action(action, path)\nend\n\nprivate\n\ndef authorize!(action, path)\n  return true if SharedTools.auto_execute\n\n  SharedTools.execute?(\n    tool: self.class.name,\n    stuff: \"#{action} on #{path}\"\n  )\nend\n</code></pre>"},{"location":"api/tool-base/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about the Facade Pattern used by complex tools</li> <li>Understand Driver Interfaces for pluggable backends</li> <li>Review Example Tools for implementation patterns</li> <li>Read about Testing Strategies</li> </ul>"},{"location":"development/","title":"Development Guide","text":"<p>Welcome to the SharedTools development guide. This section covers everything you need to know to contribute to SharedTools, understand its architecture, and develop new tools.</p>"},{"location":"development/#quick-start-for-contributors","title":"Quick Start for Contributors","text":"<pre><code># Clone the repository\ngit clone https://github.com/madbomber/shared_tools.git\ncd shared_tools\n\n# Install dependencies\nbundle install\n\n# Run tests\nbundle exec rspec\n\n# Check test coverage\nopen coverage/index.html\n</code></pre>"},{"location":"development/#documentation-structure","title":"Documentation Structure","text":""},{"location":"development/#architecture","title":"Architecture","text":"<p>Deep dive into SharedTools architecture:</p> <ul> <li>Module organization and Zeitwerk autoloading</li> <li>Tool hierarchy and inheritance</li> <li>Facade pattern implementation</li> <li>Driver interface design</li> <li>Authorization system</li> <li>Framework detection and compatibility</li> </ul>"},{"location":"development/#contributing","title":"Contributing","text":"<p>Guidelines for contributing:</p> <ul> <li>Code style and conventions</li> <li>Git workflow and branch strategy</li> <li>Pull request process</li> <li>Issue reporting</li> <li>Adding new tools</li> <li>Writing documentation</li> <li>Community guidelines</li> </ul>"},{"location":"development/#testing","title":"Testing","text":"<p>Comprehensive testing guide:</p> <ul> <li>Test structure and organization</li> <li>Using RSpec effectively</li> <li>Mock drivers and fixtures</li> <li>Test coverage requirements</li> <li>Integration testing</li> <li>Testing LLM interactions</li> <li>Performance testing</li> </ul>"},{"location":"development/#changelog","title":"Changelog","text":"<p>Version history and migration guides:</p> <ul> <li>Current version: 0.2.1</li> <li>Breaking changes</li> <li>New features</li> <li>Bug fixes</li> <li>Deprecations</li> <li>Migration guides</li> </ul>"},{"location":"development/#development-setup","title":"Development Setup","text":""},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Ruby 3.0 or higher</li> <li>Bundler</li> <li>Git</li> </ul>"},{"location":"development/#optional-dependencies","title":"Optional Dependencies","text":"<p>For full functionality, install:</p> <pre><code># Browser automation\ngem install watir selenium-webdriver\n\n# Database support\ngem install sqlite3 pg\n\n# PDF processing\ngem install pdf-reader\n\n# Development tools\ngem install rubocop yard\n</code></pre>"},{"location":"development/#project-structure","title":"Project Structure","text":"<pre><code>shared_tools/\n\u251c\u2500\u2500 lib/\n\u2502   \u2514\u2500\u2500 shared_tools/\n\u2502       \u251c\u2500\u2500 tools/          # Tool implementations\n\u2502       \u2502   \u251c\u2500\u2500 browser/    # Browser sub-tools\n\u2502       \u2502   \u251c\u2500\u2500 database/   # Database drivers\n\u2502       \u2502   \u251c\u2500\u2500 disk/       # Disk drivers\n\u2502       \u2502   \u251c\u2500\u2500 computer/   # Computer drivers\n\u2502       \u2502   \u251c\u2500\u2500 eval/       # Eval sub-tools\n\u2502       \u2502   \u2514\u2500\u2500 doc/        # Doc sub-tools\n\u2502       \u2514\u2500\u2500 shared_tools.rb # Main module\n\u251c\u2500\u2500 examples/               # Usage examples\n\u251c\u2500\u2500 test/                   # Test files\n\u2514\u2500\u2500 docs/                   # Documentation\n</code></pre>"},{"location":"development/#key-files","title":"Key Files","text":"<ul> <li><code>lib/shared_tools.rb</code>: Main module with authorization system</li> <li><code>lib/shared_tools/tools/browser_tool.rb</code>: BrowserTool facade</li> <li><code>lib/shared_tools/tools/disk_tool.rb</code>: DiskTool facade</li> <li><code>lib/shared_tools/tools/database_tool.rb</code>: DatabaseTool facade</li> <li><code>shared_tools.gemspec</code>: Gem specification</li> </ul>"},{"location":"development/#development-workflow","title":"Development Workflow","text":""},{"location":"development/#1-pick-an-issue-or-feature","title":"1. Pick an Issue or Feature","text":"<ul> <li>Check GitHub issues for open items</li> <li>Comment on the issue to claim it</li> <li>Or create a new issue to discuss your idea</li> </ul>"},{"location":"development/#2-create-a-branch","title":"2. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/bug-description\n</code></pre>"},{"location":"development/#3-develop-with-tdd","title":"3. Develop with TDD","text":"<p>Write tests first:</p> <pre><code># spec/shared_tools/tools/my_new_tool_spec.rb\nRSpec.describe SharedTools::Tools::MyNewTool do\n  describe \"#execute\" do\n    it \"performs the action\" do\n      tool = described_class.new\n      result = tool.execute(action: \"test\")\n      expect(result).to eq(\"expected\")\n    end\n  end\nend\n</code></pre> <p>Then implement:</p> <pre><code># lib/shared_tools/tools/my_new_tool.rb\nmodule SharedTools\n  module Tools\n    class MyNewTool &lt; ::RubyLLM::Tool\n      def self.name = 'my_new_tool'\n\n      description \"Tool description\"\n\n      param :action, desc: \"Action to perform\"\n\n      def execute(action:)\n        # Implementation\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/#4-run-tests","title":"4. Run Tests","text":"<pre><code># Run all tests\nbundle exec rspec\n\n# Run specific test\nbundle exec rspec spec/shared_tools/tools/my_new_tool_spec.rb\n\n# Run with coverage\nCOVERAGE=true bundle exec rspec\n</code></pre>"},{"location":"development/#5-check-code-style","title":"5. Check Code Style","text":"<pre><code># Run Rubocop\nbundle exec rubocop\n\n# Auto-fix issues\nbundle exec rubocop -a\n</code></pre>"},{"location":"development/#6-update-documentation","title":"6. Update Documentation","text":"<ul> <li>Add/update YARD comments in code</li> <li>Update relevant markdown documentation</li> <li>Add examples if applicable</li> </ul>"},{"location":"development/#7-commit-changes","title":"7. Commit Changes","text":"<pre><code>git add .\ngit commit -m \"feat: add MyNewTool for XYZ functionality\"\n</code></pre> <p>Follow Conventional Commits:</p> <ul> <li><code>feat:</code> New feature</li> <li><code>fix:</code> Bug fix</li> <li><code>docs:</code> Documentation only</li> <li><code>test:</code> Adding tests</li> <li><code>refactor:</code> Code refactoring</li> <li><code>chore:</code> Maintenance tasks</li> </ul>"},{"location":"development/#8-push-and-create-pr","title":"8. Push and Create PR","text":"<pre><code>git push origin feature/your-feature-name\n</code></pre> <p>Then create a Pull Request on GitHub.</p>"},{"location":"development/#adding-a-new-tool","title":"Adding a New Tool","text":""},{"location":"development/#step-by-step-guide","title":"Step-by-Step Guide","text":"<ol> <li>Create the tool file:</li> </ol> <pre><code># lib/shared_tools/tools/my_tool.rb\nmodule SharedTools\n  module Tools\n    class MyTool &lt; ::RubyLLM::Tool\n      def self.name = 'my_tool'\n\n      description &lt;&lt;~TEXT\n        What this tool does.\n\n        ## Usage\n        - Example usage\n      TEXT\n\n      param :action, desc: \"Action to perform\"\n      param :required_param, desc: \"Required parameter\"\n      param :optional_param, desc: \"Optional parameter\"\n\n      def initialize(driver: nil, logger: nil)\n        @driver = driver\n        @logger = logger || RubyLLM.logger\n      end\n\n      def execute(action:, required_param:, optional_param: nil)\n        @logger&amp;.info(\"Executing #{action}\")\n        # Implementation\n      end\n    end\n  end\nend\n</code></pre> <ol> <li>Create tests:</li> </ol> <pre><code># spec/shared_tools/tools/my_tool_spec.rb\nrequire 'spec_helper'\n\nRSpec.describe SharedTools::Tools::MyTool do\n  let(:tool) { described_class.new }\n\n  describe \"#execute\" do\n    it \"works\" do\n      result = tool.execute(\n        action: \"test\",\n        required_param: \"value\"\n      )\n      expect(result).to be_truthy\n    end\n  end\nend\n</code></pre> <ol> <li>Add example:</li> </ol> <pre><code># examples/my_tool_example.rb\nrequire 'bundler/setup'\nrequire 'shared_tools'\n\ntool = SharedTools::Tools::MyTool.new\nresult = tool.execute(\n  action: \"demo\",\n  required_param: \"test\"\n)\n\nputs result\n</code></pre> <ol> <li> <p>Update documentation:</p> </li> <li> <p>Add tool to <code>docs/tools/my-tool.md</code></p> </li> <li>Reference in <code>docs/api/index.md</code></li> <li>Add to examples index</li> </ol>"},{"location":"development/#testing-guidelines","title":"Testing Guidelines","text":""},{"location":"development/#test-organization","title":"Test Organization","text":"<pre><code>RSpec.describe SharedTools::Tools::MyTool do\n  # Context for different scenarios\n  context \"when action is valid\" do\n    it \"performs the action\" do\n      # Test implementation\n    end\n  end\n\n  context \"when action is invalid\" do\n    it \"raises an error\" do\n      expect {\n        tool.execute(action: \"invalid\")\n      }.to raise_error(ArgumentError)\n    end\n  end\n\n  # Test parameter validation\n  describe \"parameter validation\" do\n    it \"requires action parameter\" do\n      expect {\n        tool.execute(required_param: \"value\")\n      }.to raise_error(ArgumentError, /action/)\n    end\n  end\n\n  # Test different actions\n  describe \"actions\" do\n    describe \"test_action\" do\n      it \"returns expected result\" do\n        result = tool.execute(action: \"test_action\", required_param: \"value\")\n        expect(result).to eq(\"expected\")\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/#using-mock-drivers","title":"Using Mock Drivers","text":"<pre><code>let(:mock_driver) do\n  instance_double(\n    SharedTools::Tools::Browser::BaseDriver,\n    goto: \"navigated\",\n    html: \"&lt;html&gt;test&lt;/html&gt;\",\n    click: \"clicked\"\n  )\nend\n\nlet(:tool) { described_class.new(driver: mock_driver) }\n</code></pre>"},{"location":"development/#code-style","title":"Code Style","text":""},{"location":"development/#ruby-style-guide","title":"Ruby Style Guide","text":"<p>Follow the Ruby Style Guide:</p> <ul> <li>Use 2 spaces for indentation</li> <li>Maximum line length: 120 characters</li> <li>Use snake_case for methods and variables</li> <li>Use CamelCase for classes and modules</li> </ul>"},{"location":"development/#documentation-style","title":"Documentation Style","text":"<p>Use YARD for code documentation:</p> <pre><code># Description of what the method does\n#\n# @param action [String] the action to perform\n# @param options [Hash] optional parameters\n# @option options [String] :url URL to visit\n# @option options [Integer] :timeout timeout in seconds\n#\n# @return [String] result of the operation\n#\n# @raise [ArgumentError] if action is invalid\n#\n# @example Basic usage\n#   tool.execute(action: \"visit\", options: { url: \"https://example.com\" })\ndef execute(action:, options: {})\n  # Implementation\nend\n</code></pre>"},{"location":"development/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Use lazy loading for sub-tools and drivers</li> <li>Cache expensive computations</li> <li>Avoid unnecessary object creation</li> <li>Use connection pooling for databases</li> <li>Profile code with <code>ruby-prof</code> if needed</li> </ul>"},{"location":"development/#security-considerations","title":"Security Considerations","text":"<ul> <li>Validate all user inputs</li> <li>Use authorization system for dangerous operations</li> <li>Sanitize SQL to prevent injection</li> <li>Escape HTML/CSS selectors</li> <li>Don't log sensitive information</li> <li>Use secure temp files</li> </ul>"},{"location":"development/#release-process","title":"Release Process","text":"<ol> <li>Update version in <code>lib/shared_tools/tools/version.rb</code></li> <li>Update <code>CHANGELOG.md</code></li> <li>Run full test suite</li> <li>Commit changes</li> <li>Tag release: <code>git tag v0.x.x</code></li> <li>Push: <code>git push &amp;&amp; git push --tags</code></li> <li>Build gem: <code>gem build shared_tools.gemspec</code></li> <li>Publish: <code>gem push shared_tools-0.x.x.gem</code></li> </ol>"},{"location":"development/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Discussions: Ask questions</li> <li>GitHub Issues: Report bugs</li> <li>Code Review: Request feedback on PRs</li> <li>Documentation: Read the docs</li> </ul>"},{"location":"development/#resources","title":"Resources","text":"<ul> <li>RubyLLM Documentation</li> <li>Watir Documentation</li> <li>RSpec Documentation</li> <li>YARD Documentation</li> </ul>"},{"location":"development/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Architecture Guide</li> <li>Review Contributing Guidelines</li> <li>Learn about Testing Strategies</li> <li>Check the Changelog</li> </ul>"},{"location":"development/architecture/","title":"SharedTools Architecture","text":"<p>This document provides a comprehensive overview of SharedTools' architecture, design patterns, and implementation details.</p>"},{"location":"development/architecture/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    LLM Application                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u2502 uses\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   SharedTools Module                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502           Authorization System                      \u2502 \u2502\n\u2502  \u2502  - Human-in-the-loop (@auto_execute)              \u2502 \u2502\n\u2502  \u2502  - execute? method for confirmations               \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u2502 provides\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Tool Layer                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502 Browser  \u2502  \u2502   Disk   \u2502  \u2502 Database \u2502  \u2502Computer \u2502\u2502\n\u2502  \u2502   Tool   \u2502  \u2502   Tool   \u2502  \u2502   Tool   \u2502  \u2502  Tool   \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\u2502\n\u2502       \u2502             \u2502              \u2502              \u2502     \u2502\n\u2502       \u2502 delegates   \u2502 delegates    \u2502 delegates    \u2502     \u2502\n\u2502       \u25bc             \u25bc              \u25bc              \u25bc     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502Sub-tools\u2502   \u2502 Driver  \u2502   \u2502 Driver  \u2502  \u2502 Driver  \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502             \u2502              \u2502             \u2502\n        \u2502 uses        \u2502 uses         \u2502 uses        \u2502 uses\n        \u25bc             \u25bc              \u25bc             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              External Systems                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502  Watir   \u2502  \u2502FileSystem\u2502  \u2502 Database \u2502  \u2502   OS    \u2502\u2502\n\u2502  \u2502(Browser) \u2502  \u2502          \u2502  \u2502 (SQLite) \u2502  \u2502  API    \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"development/architecture/#module-organization","title":"Module Organization","text":""},{"location":"development/architecture/#core-module-libshared_toolsrb","title":"Core Module (<code>lib/shared_tools.rb</code>)","text":"<p>The main SharedTools module provides:</p> <ol> <li> <p>Authorization System: <pre><code>module SharedTools\n  @auto_execute ||= false\n\n  def self.auto_execute(wildwest=true)\n    @auto_execute = wildwest\n  end\n\n  def self.execute?(tool: 'unknown', stuff: '')\n    return true if @auto_execute == true\n\n    # Prompt user for confirmation\n    puts \"The AI (tool: #{tool}) wants to do the following ...\"\n    puts stuff\n    print \"Is it okay to proceed? (y/N\"\n    STDIN.getch == \"y\"\n  end\nend\n</code></pre></p> </li> <li> <p>Zeitwerk Autoloading: <pre><code>require \"zeitwerk\"\nloader = Zeitwerk::Loader.for_gem\nloader.ignore(\"#{__dir__}/shared_tools/ruby_llm.rb\")\nloader.setup\n</code></pre></p> </li> </ol>"},{"location":"development/architecture/#tool-hierarchy","title":"Tool Hierarchy","text":"<p>All tools follow this inheritance structure:</p> <pre><code>::RubyLLM::Tool (from ruby_llm gem)\n    \u2502\n    \u251c\u2500\u2500 SharedTools::Tools::BrowserTool\n    \u251c\u2500\u2500 SharedTools::Tools::DiskTool\n    \u251c\u2500\u2500 SharedTools::Tools::DatabaseTool\n    \u251c\u2500\u2500 SharedTools::Tools::ComputerTool\n    \u251c\u2500\u2500 SharedTools::Tools::EvalTool\n    \u2514\u2500\u2500 SharedTools::Tools::DocTool\n</code></pre>"},{"location":"development/architecture/#design-patterns","title":"Design Patterns","text":""},{"location":"development/architecture/#1-facade-pattern","title":"1. Facade Pattern","text":"<p>Used by: BrowserTool, ComputerTool</p> <p>Purpose: Provide a simplified interface to complex subsystems</p> <p>Structure: <pre><code>BrowserTool (Facade)\n    \u251c\u2500\u2500 Browser::VisitTool\n    \u251c\u2500\u2500 Browser::ClickTool\n    \u251c\u2500\u2500 Browser::InspectTool\n    \u251c\u2500\u2500 Browser::PageInspectTool\n    \u251c\u2500\u2500 Browser::SelectorInspectTool\n    \u251c\u2500\u2500 Browser::TextFieldAreaSetTool\n    \u2514\u2500\u2500 Browser::PageScreenshotTool\n</code></pre></p> <p>Benefits: - Single unified interface for LLMs - Action-based routing - Easier testing of individual operations - Clear separation of concerns</p>"},{"location":"development/architecture/#2-strategy-pattern-driver-interface","title":"2. Strategy Pattern (Driver Interface)","text":"<p>Used by: All tools that interact with external systems</p> <p>Purpose: Make the implementation swappable</p> <p>Structure: <pre><code>Tool\n  \u2514\u2500\u2500 uses Driver (via strategy pattern)\n        \u251c\u2500\u2500 WatirDriver (production)\n        \u251c\u2500\u2500 SeleniumDriver (alternative)\n        \u2514\u2500\u2500 MockDriver (testing)\n</code></pre></p> <p>Benefits: - Testability with mock drivers - Platform independence - Easy to add new implementations</p>"},{"location":"development/architecture/#3-template-method-pattern","title":"3. Template Method Pattern","text":"<p>Used by: BaseDriver classes</p> <p>Purpose: Define algorithm structure, let subclasses implement steps</p> <p>Example: <pre><code>class BaseDriver\n  def perform_action\n    validate_input    # concrete\n    execute_action    # abstract - subclass implements\n    log_result       # concrete\n  end\n\n  def execute_action\n    raise NotImplementedError\n  end\nend\n</code></pre></p>"},{"location":"development/architecture/#4-command-pattern","title":"4. Command Pattern","text":"<p>Used by: Action-based tools</p> <p>Purpose: Encapsulate actions as objects</p> <p>Structure: <pre><code>module Action\n  VISIT = \"visit\"\n  CLICK = \"click\"\nend\n\ndef execute(action:, **params)\n  case action\n  when Action::VISIT then execute_visit(**params)\n  when Action::CLICK then execute_click(**params)\n  end\nend\n</code></pre></p>"},{"location":"development/architecture/#component-details","title":"Component Details","text":""},{"location":"development/architecture/#authorization-system","title":"Authorization System","text":""},{"location":"development/architecture/#design-goals","title":"Design Goals","text":"<ol> <li>Safety First: Default to requiring confirmation</li> <li>Flexibility: Allow automation when needed</li> <li>Clarity: Show exactly what will be executed</li> <li>Non-blocking: Works with both interactive and automated contexts</li> </ol>"},{"location":"development/architecture/#implementation","title":"Implementation","text":"<pre><code>module SharedTools\n  class &lt;&lt; self\n    def auto_execute(wildwest=true)\n      @auto_execute = wildwest\n    end\n\n    def execute?(tool: 'unknown', stuff: '')\n      return true if @auto_execute == true\n\n      # Present action to user\n      puts \"\\n\\nThe AI (tool: #{tool}) wants to do the following ...\"\n      puts \"=\" * 42\n      puts(stuff.empty? ? \"unknown strange and mysterious things\" : stuff)\n      puts \"=\" * 42\n\n      sleep 0.2 if defined?(AIA) # Allow CLI spinner to recycle\n      print \"\\nIs it okay to proceed? (y/N\"\n      STDIN.getch == \"y\"\n    end\n  end\nend\n</code></pre>"},{"location":"development/architecture/#usage-in-tools","title":"Usage in Tools","text":"<pre><code>def execute(action:, path:)\n  return unless SharedTools.execute?(\n    tool: self.class.name,\n    stuff: \"#{action} on #{path}\"\n  )\n\n  perform_action(action, path)\nend\n</code></pre>"},{"location":"development/architecture/#zeitwerk-autoloading","title":"Zeitwerk Autoloading","text":""},{"location":"development/architecture/#configuration","title":"Configuration","text":"<pre><code>require \"zeitwerk\"\nloader = Zeitwerk::Loader.for_gem\n\n# Ignore aggregate loader files\nloader.ignore(\"#{__dir__}/shared_tools/ruby_llm.rb\")\n\nloader.setup\n</code></pre>"},{"location":"development/architecture/#benefits","title":"Benefits","text":"<ul> <li>Automatic code loading on first use</li> <li>Convention over configuration (file names match class names)</li> <li>Faster startup times</li> <li>Reloading support in development</li> </ul>"},{"location":"development/architecture/#file-naming-convention","title":"File Naming Convention","text":"<pre><code>lib/shared_tools/tools/browser_tool.rb\n    \u2514\u2500\u25b6 SharedTools::Tools::BrowserTool\n\nlib/shared_tools/tools/browser/visit_tool.rb\n    \u2514\u2500\u25b6 SharedTools::Tools::Browser::VisitTool\n</code></pre>"},{"location":"development/architecture/#tool-base-class-integration","title":"Tool Base Class Integration","text":"<p>All tools extend <code>RubyLLM::Tool</code>:</p> <pre><code>class MyTool &lt; ::RubyLLM::Tool\n  # Class method for tool name\n  def self.name = 'my_tool'\n\n  # DSL for description\n  description \"What this tool does\"\n\n  # DSL for parameters\n  param :action, desc: \"Action to perform\"\n  param :path, desc: \"Path parameter\"\n\n  # Initialize with optional dependencies\n  def initialize(driver: nil, logger: nil)\n    @driver = driver\n    @logger = logger || RubyLLM.logger\n  end\n\n  # Execute method with keyword args\n  def execute(action:, path:)\n    # Implementation\n  end\nend\n</code></pre>"},{"location":"development/architecture/#data-flow","title":"Data Flow","text":""},{"location":"development/architecture/#simple-tool-execution","title":"Simple Tool Execution","text":"<pre><code>1. LLM decides to use tool\n   \u2514\u2500\u25b6 tool_name: \"disk_tool\"\n       parameters: {action: \"file_read\", path: \"./file.txt\"}\n\n2. RubyLLM routes to SharedTools::Tools::DiskTool\n\n3. Authorization check\n   \u2514\u2500\u25b6 SharedTools.execute?\n       \u251c\u2500\u25b6 auto_execute=true? \u2192 proceed\n       \u2514\u2500\u25b6 auto_execute=false? \u2192 ask user\n\n4. Tool execution\n   \u2514\u2500\u25b6 execute(action: \"file_read\", path: \"./file.txt\")\n\n5. Driver delegation\n   \u2514\u2500\u25b6 @driver.file_read(path: \"./file.txt\")\n\n6. Return result to LLM\n   \u2514\u2500\u25b6 \"File contents: ...\"\n</code></pre>"},{"location":"development/architecture/#complex-tool-execution-facade","title":"Complex Tool Execution (Facade)","text":"<pre><code>1. LLM: BrowserTool with action=\"visit\"\n\n2. BrowserTool.execute(action: \"visit\", url: \"...\")\n   \u251c\u2500\u25b6 Authorization check\n   \u251c\u2500\u25b6 Parameter validation\n   \u2514\u2500\u25b6 Route to sub-tool\n\n3. visit_tool.execute(url: \"...\")\n   \u2514\u2500\u25b6 Sub-tool logic\n\n4. Driver call\n   \u2514\u2500\u25b6 @driver.goto(url: \"...\")\n\n5. Watir/browser operation\n   \u2514\u2500\u25b6 Actual browser navigation\n\n6. Result flows back\n   \u2514\u2500\u25b6 Sub-tool \u2192 Facade \u2192 RubyLLM \u2192 LLM\n</code></pre>"},{"location":"development/architecture/#error-handling-architecture","title":"Error Handling Architecture","text":""},{"location":"development/architecture/#error-propagation","title":"Error Propagation","text":"<pre><code>External System Error\n  \u2514\u2500\u25b6 Driver catches and wraps\n      \u2514\u2500\u25b6 Tool handles or propagates\n          \u2514\u2500\u25b6 RubyLLM catches\n              \u2514\u2500\u25b6 LLM receives error message\n</code></pre>"},{"location":"development/architecture/#error-types","title":"Error Types","text":"<ol> <li> <p>ArgumentError: Invalid parameters <pre><code>raise ArgumentError, \"url required for visit action\" if url.nil?\n</code></pre></p> </li> <li> <p>LoadError: Missing dependencies <pre><code>raise LoadError, \"watir gem required\" unless defined?(Watir)\n</code></pre></p> </li> <li> <p>NotImplementedError: Unimplemented driver methods <pre><code>def unsupported_method\n  raise NotImplementedError, \"#{self.class}##{__method__} undefined\"\nend\n</code></pre></p> </li> <li> <p>RuntimeError: Operational errors <pre><code>raise \"Element not found: #{selector}\" unless element\n</code></pre></p> </li> </ol>"},{"location":"development/architecture/#error-responses-databasetool-pattern","title":"Error Responses (DatabaseTool pattern)","text":"<pre><code>def perform(statement:)\n  result = execute(statement)\n  { status: :ok, result: result }\nrescue DatabaseError =&gt; e\n  { status: :error, result: e.message }\nend\n</code></pre>"},{"location":"development/architecture/#testing-architecture","title":"Testing Architecture","text":""},{"location":"development/architecture/#test-organization","title":"Test Organization","text":"<pre><code>spec/\n\u251c\u2500\u2500 shared_tools/\n\u2502   \u2514\u2500\u2500 tools/\n\u2502       \u251c\u2500\u2500 browser_tool_spec.rb      # Tool tests\n\u2502       \u251c\u2500\u2500 browser/\n\u2502       \u2502   \u251c\u2500\u2500 visit_tool_spec.rb    # Sub-tool tests\n\u2502       \u2502   \u2514\u2500\u2500 watir_driver_spec.rb  # Driver tests\n\u2502       \u2514\u2500\u2500 disk_tool_spec.rb\n\u2514\u2500\u2500 spec_helper.rb\n</code></pre>"},{"location":"development/architecture/#test-doubles-strategy","title":"Test Doubles Strategy","text":"<ol> <li> <p>Mock Drivers: For tool testing <pre><code>let(:mock_driver) { instance_double(Browser::WatirDriver) }\nlet(:tool) { BrowserTool.new(driver: mock_driver) }\n</code></pre></p> </li> <li> <p>Real Drivers: For integration testing <pre><code>let(:driver) { Browser::WatirDriver.new }\nafter { driver.close }\n</code></pre></p> </li> <li> <p>Fixture Data: For consistent test data <pre><code>let(:sample_html) { File.read('spec/fixtures/sample.html') }\n</code></pre></p> </li> </ol>"},{"location":"development/architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"development/architecture/#lazy-loading","title":"Lazy Loading","text":"<p>Sub-tools and drivers are loaded only when needed:</p> <pre><code>def visit_tool\n  @visit_tool ||= Browser::VisitTool.new(\n    driver: @driver,\n    logger: @logger\n  )\nend\n</code></pre>"},{"location":"development/architecture/#connection-pooling","title":"Connection Pooling","text":"<p>For database tools:</p> <pre><code>@connection_pool = ConnectionPool.new(size: 5) do\n  Database.connect\nend\n</code></pre>"},{"location":"development/architecture/#caching","title":"Caching","text":"<p>Expensive operations can be cached:</p> <pre><code>def expensive_operation\n  @cache ||= {}\n  @cache[key] ||= perform_expensive_operation\nend\n</code></pre>"},{"location":"development/architecture/#security-architecture","title":"Security Architecture","text":""},{"location":"development/architecture/#input-validation","title":"Input Validation","text":"<p>All user inputs are validated:</p> <pre><code>def execute(action:, path:)\n  validate_action!(action)\n  validate_path!(path)\n  # ...\nend\n</code></pre>"},{"location":"development/architecture/#authorization-layer","title":"Authorization Layer","text":"<pre><code>SharedTools.execute?(\n  tool: self.class.name,\n  stuff: describe_operation\n)\n</code></pre>"},{"location":"development/architecture/#safe-defaults","title":"Safe Defaults","text":"<ul> <li><code>@auto_execute = false</code> by default</li> <li>Read-only operations don't require confirmation</li> <li>Destructive operations always show preview</li> </ul>"},{"location":"development/architecture/#extensibility-points","title":"Extensibility Points","text":""},{"location":"development/architecture/#adding-new-tools","title":"Adding New Tools","text":"<ol> <li>Create class extending <code>RubyLLM::Tool</code></li> <li>Implement <code>self.name</code>, <code>description</code>, <code>param</code>s</li> <li>Implement <code>execute</code> method</li> <li>Add tests</li> <li>Zeitwerk handles loading</li> </ol>"},{"location":"development/architecture/#adding-new-drivers","title":"Adding New Drivers","text":"<ol> <li>Extend appropriate <code>BaseDriver</code></li> <li>Implement required methods</li> <li>Register in tool's <code>default_driver</code> or pass explicitly</li> </ol>"},{"location":"development/architecture/#adding-new-actions","title":"Adding New Actions","text":"<p>For facade tools:</p> <ol> <li>Add action constant</li> <li>Add to description</li> <li>Add to <code>execute</code> case statement</li> <li>Create sub-tool if complex</li> <li>Add tests</li> </ol>"},{"location":"development/architecture/#future-architecture-goals","title":"Future Architecture Goals","text":""},{"location":"development/architecture/#planned-improvements","title":"Planned Improvements","text":"<ol> <li>Plugin System: Load tools from external gems</li> <li>Middleware: Chain operations (logging, caching, retry)</li> <li>Event System: Hook into tool lifecycle</li> <li>Configuration: Centralized tool configuration</li> <li>Metrics: Built-in performance monitoring</li> </ol>"},{"location":"development/architecture/#diagrams","title":"Diagrams","text":""},{"location":"development/architecture/#component-interaction","title":"Component Interaction","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 uses  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 delegates \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   LLM   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 BrowserTool  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  Sub-tool  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502                          \u2502\n                         \u2502 uses                     \u2502 uses\n                         \u25bc                          \u25bc\n                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                  \u2502 Authorization\u2502            \u2502  Driver   \u2502\n                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                    \u2502\n                                                    \u2502 uses\n                                                    \u25bc\n                                             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                             \u2502  External  \u2502\n                                             \u2502   System   \u2502\n                                             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"development/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Review Contributing Guidelines</li> <li>Learn about Testing Strategies</li> <li>Explore Tool Implementation Examples</li> </ul>"},{"location":"development/changelog/","title":"Changelog","text":"<p>All notable changes to SharedTools will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"development/changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"development/changelog/#changed","title":"Changed","text":"<ul> <li>Changing direction. Beginning with 0.3.0 will only support RubyLLM framework</li> </ul>"},{"location":"development/changelog/#deprecated","title":"Deprecated","text":"<ul> <li>Support for OmniAI framework (use RubyLLM instead)</li> <li>Support for llm.rb framework (use RubyLLM instead)</li> <li>Support for Raix framework (use RubyLLM instead)</li> </ul>"},{"location":"development/changelog/#021-2025-07-03","title":"[0.2.1] - 2025-07-03","text":""},{"location":"development/changelog/#fixed","title":"Fixed","text":"<ul> <li>iMCP server app for MacOS is noisy logger, now redirects stderr to /dev/null</li> </ul>"},{"location":"development/changelog/#020-2025-07-01","title":"[0.2.0] - 2025-07-01","text":""},{"location":"development/changelog/#added","title":"Added","text":"<ul> <li><code>ruby_llm/mcp/github_mcp_server.rb</code> example integration</li> <li><code>SharedTools.mcp_servers</code> as an Array to track MCP server instances</li> <li>Class method <code>name</code> to all tool classes (snake_case of class name)</li> <li><code>ruby_llm/mcp/imcp.rb</code> for MacOS app integration</li> <li><code>ruby_llm/incomplete/</code> directory with under-development example tools</li> </ul>"},{"location":"development/changelog/#changed_1","title":"Changed","text":"<ul> <li>Tool naming convention now consistent across all tools</li> </ul>"},{"location":"development/changelog/#013-2025-06-18","title":"[0.1.3] - 2025-06-18","text":""},{"location":"development/changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Tweaked the load-all-tools process for better reliability</li> </ul>"},{"location":"development/changelog/#012-2025-06-10","title":"[0.1.2] - 2025-06-10","text":""},{"location":"development/changelog/#added_1","title":"Added","text":"<ul> <li>Zeitwerk gem for automatic code loading</li> </ul>"},{"location":"development/changelog/#changed_2","title":"Changed","text":"<ul> <li>Migrated from manual requires to Zeitwerk autoloading</li> </ul>"},{"location":"development/changelog/#010-2025-06-05","title":"[0.1.0] - 2025-06-05","text":"<p>Initial gem release</p>"},{"location":"development/changelog/#added_2","title":"Added","text":"<ul> <li>SharedTools core module with authorization system</li> <li>Human-in-the-loop confirmation (<code>SharedTools.execute?</code>)</li> <li>RubyLLM tool implementations:</li> <li><code>EditFile</code>: Edit files with find/replace</li> <li><code>ListFiles</code>: Directory listing</li> <li><code>PdfPageReader</code>: PDF content extraction</li> <li><code>ReadFile</code>: File reading with error handling</li> <li><code>RunShellCommand</code>: Shell command execution</li> <li>Framework detection system</li> <li>Logger integration with RubyLLM</li> <li>Zeitwerk autoloading support</li> <li>Basic documentation and examples</li> </ul>"},{"location":"development/changelog/#version-history-format","title":"Version History Format","text":"<p>Each version should document changes in these categories:</p>"},{"location":"development/changelog/#added_3","title":"Added","text":"<p>New features and capabilities</p>"},{"location":"development/changelog/#changed_3","title":"Changed","text":"<p>Changes to existing functionality</p>"},{"location":"development/changelog/#deprecated_1","title":"Deprecated","text":"<p>Features that will be removed in future versions</p>"},{"location":"development/changelog/#removed","title":"Removed","text":"<p>Features that have been removed</p>"},{"location":"development/changelog/#fixed_2","title":"Fixed","text":"<p>Bug fixes</p>"},{"location":"development/changelog/#security","title":"Security","text":"<p>Security-related changes</p>"},{"location":"development/changelog/#migration-guides","title":"Migration Guides","text":""},{"location":"development/changelog/#migrating-to-030-rubyllm-only","title":"Migrating to 0.3.0 (RubyLLM Only)","text":"<p>Breaking Change: Version 0.3.0 drops support for OmniAI, llm.rb, and Raix.</p>"},{"location":"development/changelog/#before-02x-with-omniai","title":"Before (0.2.x with OmniAI)","text":"<pre><code>require 'omniai'\nrequire 'shared_tools'\n\n# Tools were loaded based on framework detection\ntools = SharedTools.tools_for(:omniai)\n</code></pre>"},{"location":"development/changelog/#after-030-with-rubyllm","title":"After (0.3.0 with RubyLLM)","text":"<pre><code>require 'ruby_llm'\nrequire 'shared_tools'\n\n# All tools now extend RubyLLM::Tool\nagent = RubyLLM::Agent.new(\n  tools: [\n    SharedTools::Tools::BrowserTool.new,\n    SharedTools::Tools::DiskTool.new\n  ]\n)\n</code></pre>"},{"location":"development/changelog/#required-changes","title":"Required Changes","text":"<ol> <li> <p>Update Gemfile: <pre><code># Remove\ngem 'omniai-tools'\n\n# Add\ngem 'ruby_llm'\ngem 'shared_tools', '~&gt; 0.3'\n</code></pre></p> </li> <li> <p>Update Tool Initialization: <pre><code># Old way (any framework)\ntools = SharedTools.load_tools_for(framework)\n\n# New way (RubyLLM only)\ntools = [\n  SharedTools::Tools::BrowserTool.new,\n  SharedTools::Tools::DiskTool.new,\n  SharedTools::Tools::DatabaseTool.new\n]\n</code></pre></p> </li> <li> <p>Update Custom Tools: <pre><code># Old way (OmniAI)\nclass MyTool &lt; OmniAI::Tool\n  # ...\nend\n\n# New way (RubyLLM)\nclass MyTool &lt; ::RubyLLM::Tool\n  def self.name = 'my_tool'\n\n  description \"Tool description\"\n\n  param :action, desc: \"Action to perform\"\n\n  def execute(action:)\n    # ...\n  end\nend\n</code></pre></p> </li> </ol>"},{"location":"development/changelog/#why-this-change","title":"Why This Change?","text":"<ul> <li>Focus: Better to support one framework well than many frameworks poorly</li> <li>Maintenance: Reduces maintenance burden significantly</li> <li>Features: Enables RubyLLM-specific features and optimizations</li> <li>Simplicity: Clearer codebase and documentation</li> </ul>"},{"location":"development/changelog/#need-help","title":"Need Help?","text":"<ul> <li>Open an issue on GitHub for migration assistance</li> <li>Check the RubyLLM documentation</li> <li>Review our examples directory for updated examples</li> </ul>"},{"location":"development/changelog/#release-process","title":"Release Process","text":"<p>For maintainers releasing a new version:</p>"},{"location":"development/changelog/#1-update-version","title":"1. Update Version","text":"<p>Edit <code>lib/shared_tools/tools/version.rb</code>:</p> <pre><code>module SharedTools\n  module Tools\n    VERSION = \"X.Y.Z\"\n  end\nend\n</code></pre>"},{"location":"development/changelog/#2-update-this-changelog","title":"2. Update This Changelog","text":"<p>Add new version section with changes:</p> <pre><code>## [X.Y.Z] - YYYY-MM-DD\n\n### Added\n- New feature description\n\n### Changed\n- Change description\n\n### Fixed\n- Bug fix description\n</code></pre>"},{"location":"development/changelog/#3-commit-changes","title":"3. Commit Changes","text":"<pre><code>git add lib/shared_tools/tools/version.rb CHANGELOG.md\ngit commit -m \"chore: bump version to X.Y.Z\"\n</code></pre>"},{"location":"development/changelog/#4-create-git-tag","title":"4. Create Git Tag","text":"<pre><code>git tag vX.Y.Z\ngit push origin main\ngit push origin vX.Y.Z\n</code></pre>"},{"location":"development/changelog/#5-build-and-push-gem","title":"5. Build and Push Gem","text":"<pre><code>gem build shared_tools.gemspec\ngem push shared_tools-X.Y.Z.gem\n</code></pre>"},{"location":"development/changelog/#6-create-github-release","title":"6. Create GitHub Release","text":"<ul> <li>Go to GitHub Releases</li> <li>Create new release from tag</li> <li>Copy changelog section for this version</li> <li>Publish release</li> </ul>"},{"location":"development/changelog/#semantic-versioning","title":"Semantic Versioning","text":"<p>SharedTools follows Semantic Versioning:</p> <ul> <li>MAJOR (X.0.0): Breaking changes</li> <li>MINOR (0.X.0): New features, backwards compatible</li> <li>PATCH (0.0.X): Bug fixes, backwards compatible</li> </ul>"},{"location":"development/changelog/#breaking-changes","title":"Breaking Changes","text":"<p>Breaking changes (major version bumps) include:</p> <ul> <li>Removing or renaming public APIs</li> <li>Changing method signatures</li> <li>Removing tools</li> <li>Changing default behavior in incompatible ways</li> <li>Dropping framework support</li> </ul>"},{"location":"development/changelog/#new-features","title":"New Features","text":"<p>New features (minor version bumps) include:</p> <ul> <li>Adding new tools</li> <li>Adding new actions to existing tools</li> <li>Adding optional parameters</li> <li>Adding new drivers</li> <li>Performance improvements</li> </ul>"},{"location":"development/changelog/#bug-fixes","title":"Bug Fixes","text":"<p>Bug fixes (patch version bumps) include:</p> <ul> <li>Fixing crashes</li> <li>Fixing incorrect behavior</li> <li>Documentation fixes</li> <li>Test improvements</li> <li>Performance optimizations (minor)</li> </ul>"},{"location":"development/changelog/#version-support","title":"Version Support","text":"Version Status Ruby Version RubyLLM Version End of Support 0.3.x Active 3.0+ 0.4+ TBD 0.2.x Maintenance 3.0+ 0.3+ 2025-12-31 0.1.x Unsupported 3.0+ 0.2+ 2025-06-30"},{"location":"development/changelog/#support-levels","title":"Support Levels","text":"<ul> <li>Active: Full support, new features, bug fixes</li> <li>Maintenance: Critical bug fixes and security updates only</li> <li>Unsupported: No updates, use at your own risk</li> </ul>"},{"location":"development/changelog/#upgrade-policy","title":"Upgrade Policy","text":""},{"location":"development/changelog/#minor-version-updates","title":"Minor Version Updates","text":"<p>Can be done safely:</p> <pre><code>bundle update shared_tools\n</code></pre>"},{"location":"development/changelog/#major-version-updates","title":"Major Version Updates","text":"<p>Require code changes:</p> <ol> <li>Review changelog for breaking changes</li> <li>Check migration guide</li> <li>Update code as needed</li> <li>Test thoroughly</li> <li>Deploy</li> </ol>"},{"location":"development/changelog/#deprecation-policy","title":"Deprecation Policy","text":"<p>Features marked as deprecated:</p> <ol> <li>Announcement: Deprecated in changelog</li> <li>Warning Period: At least one minor version</li> <li>Removal: In next major version</li> </ol> <p>Example:</p> <pre><code>0.2.0: Feature X deprecated (warning)\n0.2.x: Feature X still works with warning\n0.3.0: Feature X removed (breaking change)\n</code></pre>"},{"location":"development/changelog/#contributing-to-changelog","title":"Contributing to Changelog","text":"<p>When contributing:</p> <ol> <li>Add your changes to [Unreleased] section</li> <li>Use appropriate category (Added, Changed, Fixed, etc.)</li> <li>Write clear, user-focused descriptions</li> <li>Link to issues/PRs when relevant</li> <li>Maintainers will move to versioned section on release</li> </ol> <p>Example:</p> <pre><code>## [Unreleased]\n\n### Added\n- New ComputerTool for system automation ([#123](https://github.com/user/repo/pull/123))\n\n### Fixed\n- BrowserTool now handles missing elements gracefully ([#124](https://github.com/user/repo/issues/124))\n</code></pre>"},{"location":"development/changelog/#historical-releases","title":"Historical Releases","text":"<p>See GitHub Releases for:</p> <ul> <li>Full release notes</li> <li>Downloadable gems</li> <li>Source code archives</li> <li>Release checksums</li> </ul>"},{"location":"development/contributing/","title":"Contributing to SharedTools","text":"<p>Thank you for your interest in contributing to SharedTools! This guide will help you get started.</p>"},{"location":"development/contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Be respectful, inclusive, and professional. We're all here to build great tools for the Ruby LLM community.</p>"},{"location":"development/contributing/#ways-to-contribute","title":"Ways to Contribute","text":"<ul> <li>Report bugs and issues</li> <li>Suggest new features or tools</li> <li>Improve documentation</li> <li>Fix bugs</li> <li>Add new tools</li> <li>Improve existing tools</li> <li>Write examples</li> <li>Review pull requests</li> </ul>"},{"location":"development/contributing/#getting-started","title":"Getting Started","text":""},{"location":"development/contributing/#1-fork-and-clone","title":"1. Fork and Clone","text":"<pre><code># Fork on GitHub, then:\ngit clone https://github.com/YOUR_USERNAME/shared_tools.git\ncd shared_tools\n</code></pre>"},{"location":"development/contributing/#2-set-up-development-environment","title":"2. Set Up Development Environment","text":"<pre><code># Install dependencies\nbundle install\n\n# Run tests to verify setup\nbundle exec rspec\n\n# All tests should pass\n</code></pre>"},{"location":"development/contributing/#3-create-a-branch","title":"3. Create a Branch","text":"<pre><code># For new features\ngit checkout -b feature/tool-name\n\n# For bug fixes\ngit checkout -b fix/issue-description\n\n# For documentation\ngit checkout -b docs/what-you-are-documenting\n</code></pre>"},{"location":"development/contributing/#development-process","title":"Development Process","text":""},{"location":"development/contributing/#writing-code","title":"Writing Code","text":""},{"location":"development/contributing/#1-follow-ruby-style-guide","title":"1. Follow Ruby Style Guide","text":"<pre><code># Good\ndef execute(action:, path:)\n  validate_params!(action, path)\n  perform_action(action, path)\nend\n\n# Bad\ndef execute(action:,path:)\n    ValidateParams!(action,path)\n    PerformAction(action,path)\nend\n</code></pre>"},{"location":"development/contributing/#2-use-consistent-naming","title":"2. Use Consistent Naming","text":"<pre><code># Class names: CamelCase\nclass BrowserTool &lt; ::RubyLLM::Tool\nend\n\n# Method names: snake_case\ndef execute_action\nend\n\n# Constants: SCREAMING_SNAKE_CASE\nMODULE_VERSION = \"1.0.0\"\n\n# Action constants: SCREAMING_SNAKE_CASE\nmodule Action\n  VISIT = \"visit\"\nend\n</code></pre>"},{"location":"development/contributing/#3-add-yard-documentation","title":"3. Add YARD Documentation","text":"<pre><code># Describe what the method does\n#\n# @param action [String] the action to perform\n# @param path [String] file or directory path\n#\n# @return [String] result message\n#\n# @raise [ArgumentError] if action is invalid\n#\n# @example\n#   tool.execute(action: \"read\", path: \"./file.txt\")\ndef execute(action:, path:)\n  # ...\nend\n</code></pre>"},{"location":"development/contributing/#writing-tests","title":"Writing Tests","text":""},{"location":"development/contributing/#test-structure","title":"Test Structure","text":"<pre><code>RSpec.describe SharedTools::Tools::MyTool do\n  # Use let for test data\n  let(:tool) { described_class.new }\n  let(:mock_driver) { instance_double(Driver) }\n\n  # Group related tests\n  describe \"#execute\" do\n    context \"when action is valid\" do\n      it \"performs the action\" do\n        result = tool.execute(action: \"test\")\n        expect(result).to eq(\"expected\")\n      end\n    end\n\n    context \"when action is invalid\" do\n      it \"raises ArgumentError\" do\n        expect {\n          tool.execute(action: \"invalid\")\n        }.to raise_error(ArgumentError, /Unknown action/)\n      end\n    end\n  end\n\n  describe \"parameter validation\" do\n    it \"requires action parameter\" do\n      expect {\n        tool.execute\n      }.to raise_error(ArgumentError)\n    end\n  end\nend\n</code></pre>"},{"location":"development/contributing/#test-coverage","title":"Test Coverage","text":"<ul> <li>Aim for 80%+ coverage (enforced by SimpleCov)</li> <li>Test happy paths</li> <li>Test error cases</li> <li>Test edge cases</li> <li>Test parameter validation</li> </ul>"},{"location":"development/contributing/#running-tests","title":"Running Tests","text":"<pre><code># All tests\nbundle exec rspec\n\n# Specific file\nbundle exec rspec spec/shared_tools/tools/my_tool_spec.rb\n\n# Specific test\nbundle exec rspec spec/shared_tools/tools/my_tool_spec.rb:23\n\n# With coverage\nCOVERAGE=true bundle exec rspec\n\n# Watch mode (if guard is installed)\nbundle exec guard\n</code></pre>"},{"location":"development/contributing/#code-quality","title":"Code Quality","text":""},{"location":"development/contributing/#run-rubocop","title":"Run Rubocop","text":"<pre><code># Check style\nbundle exec rubocop\n\n# Auto-fix issues\nbundle exec rubocop -a\n\n# Check specific files\nbundle exec rubocop lib/shared_tools/tools/my_tool.rb\n</code></pre>"},{"location":"development/contributing/#common-rubocop-issues","title":"Common Rubocop Issues","text":"<pre><code># Line too long - split it\nlong_method_call(param1, param2, param3)\n# \u2192\nlong_method_call(\n  param1,\n  param2,\n  param3\n)\n\n# Missing frozen_string_literal\n# Add to top of file:\n# frozen_string_literal: true\n\n# Trailing whitespace - remove it\nputs \"hello\"   # \u2190 remove these spaces\n\n# Missing documentation - add YARD comments\n</code></pre>"},{"location":"development/contributing/#pull-request-process","title":"Pull Request Process","text":""},{"location":"development/contributing/#1-ensure-tests-pass","title":"1. Ensure Tests Pass","text":"<pre><code>bundle exec rspec\nbundle exec rubocop\n</code></pre>"},{"location":"development/contributing/#2-update-documentation","title":"2. Update Documentation","text":"<ul> <li>Add/update YARD comments</li> <li>Update relevant markdown docs</li> <li>Add examples if appropriate</li> </ul>"},{"location":"development/contributing/#3-write-good-commit-messages","title":"3. Write Good Commit Messages","text":"<p>Follow Conventional Commits:</p> <pre><code># Format\n&lt;type&gt;: &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n\n# Types\nfeat: new feature\nfix: bug fix\ndocs: documentation only\ntest: adding tests\nrefactor: code refactoring\nchore: maintenance\n\n# Examples\nfeat: add DatabaseTool for SQL execution\n\nAdd new DatabaseTool that supports multiple database backends\nthrough a driver interface. Includes SqliteDriver and PostgresDriver.\n\nCloses #42\n\n---\n\nfix: handle nil driver in BrowserTool\n\nPreviously would raise NoMethodError when driver was nil.\nNow raises ArgumentError with helpful message.\n\n---\n\ndocs: add architecture documentation\n\nAdd comprehensive architecture guide covering design patterns,\ncomponent interaction, and extensibility points.\n</code></pre>"},{"location":"development/contributing/#4-create-pull-request","title":"4. Create Pull Request","text":"<ol> <li> <p>Push your branch <pre><code>git push origin feature/my-feature\n</code></pre></p> </li> <li> <p>Go to GitHub and create PR</p> </li> <li> <p>Fill out PR template: <pre><code>## Description\nClear description of what this PR does\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Documentation update\n- [ ] Refactoring\n\n## Testing\n- [ ] Added tests for new functionality\n- [ ] All tests pass\n- [ ] Updated documentation\n\n## Checklist\n- [ ] Code follows style guidelines\n- [ ] Self-reviewed code\n- [ ] Commented complex code\n- [ ] Updated documentation\n- [ ] No new warnings\n- [ ] Added tests\n- [ ] All tests pass\n</code></pre></p> </li> <li> <p>Request review</p> </li> </ol>"},{"location":"development/contributing/#5-address-review-comments","title":"5. Address Review Comments","text":"<ul> <li>Be receptive to feedback</li> <li>Ask questions if unclear</li> <li>Make requested changes</li> <li>Update PR description if scope changes</li> </ul>"},{"location":"development/contributing/#6-merge","title":"6. Merge","text":"<p>Once approved: - Squash commits if requested - Maintainer will merge</p>"},{"location":"development/contributing/#adding-a-new-tool","title":"Adding a New Tool","text":""},{"location":"development/contributing/#step-by-step-guide","title":"Step-by-Step Guide","text":""},{"location":"development/contributing/#1-plan-the-tool","title":"1. Plan the Tool","text":"<p>Consider: - What problem does it solve? - What actions will it support? - Does it need a driver? - What are the parameters?</p>"},{"location":"development/contributing/#2-create-tool-file","title":"2. Create Tool File","text":"<pre><code># lib/shared_tools/tools/my_tool.rb\n# frozen_string_literal: true\n\nrequire_relative '../../shared_tools'\n\nmodule SharedTools\n  module Tools\n    class MyTool &lt; ::RubyLLM::Tool\n      def self.name = 'my_tool'\n\n      description &lt;&lt;~TEXT\n        Brief description of what this tool does.\n\n        ## Actions\n        - `action1`: What this action does\n        - `action2`: What this action does\n\n        ## Usage\n        {\"action\": \"action1\", \"param\": \"value\"}\n      TEXT\n\n      param :action, desc: \"The action to perform (action1, action2)\"\n      param :required_param, desc: \"Required parameter\"\n      param :optional_param, desc: \"Optional parameter (default: value)\"\n\n      def initialize(driver: nil, logger: nil)\n        @driver = driver\n        @logger = logger || RubyLLM.logger\n      end\n\n      def execute(action:, required_param:, optional_param: 'default')\n        @logger&amp;.info(\"Executing #{action}\")\n\n        case action\n        when \"action1\"\n          perform_action1(required_param)\n        when \"action2\"\n          perform_action2(required_param, optional_param)\n        else\n          raise ArgumentError, \"Unknown action: #{action}\"\n        end\n      end\n\n      private\n\n      def perform_action1(param)\n        # Implementation\n      end\n\n      def perform_action2(param, optional)\n        # Implementation\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/contributing/#3-create-tests","title":"3. Create Tests","text":"<pre><code># spec/shared_tools/tools/my_tool_spec.rb\nrequire 'spec_helper'\n\nRSpec.describe SharedTools::Tools::MyTool do\n  let(:tool) { described_class.new }\n\n  describe \".name\" do\n    it \"returns tool name\" do\n      expect(described_class.name).to eq('my_tool')\n    end\n  end\n\n  describe \"#execute\" do\n    context \"with action1\" do\n      it \"performs action1\" do\n        result = tool.execute(\n          action: \"action1\",\n          required_param: \"value\"\n        )\n        expect(result).to be_truthy\n      end\n    end\n\n    context \"with invalid action\" do\n      it \"raises ArgumentError\" do\n        expect {\n          tool.execute(action: \"invalid\", required_param: \"value\")\n        }.to raise_error(ArgumentError, /Unknown action/)\n      end\n    end\n\n    context \"with missing required parameter\" do\n      it \"raises ArgumentError\" do\n        expect {\n          tool.execute(action: \"action1\")\n        }.to raise_error(ArgumentError)\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/contributing/#4-create-example","title":"4. Create Example","text":"<pre><code># examples/my_tool_example.rb\n#!/usr/bin/env ruby\n# frozen_string_literal: true\n\nrequire 'bundler/setup'\nrequire 'shared_tools'\n\nputs \"=\" * 80\nputs \"MyTool Example\"\nputs \"=\" * 80\nputs\n\n# Initialize tool\ntool = SharedTools::Tools::MyTool.new\n\n# Example 1: Action 1\nputs \"Example 1: Action 1\"\nresult = tool.execute(\n  action: \"action1\",\n  required_param: \"test\"\n)\nputs \"Result: #{result}\"\nputs\n\n# Example 2: Action 2\nputs \"Example 2: Action 2\"\nresult = tool.execute(\n  action: \"action2\",\n  required_param: \"test\",\n  optional_param: \"custom\"\n)\nputs \"Result: #{result}\"\nputs\n\nputs \"=\" * 80\nputs \"Example completed!\"\nputs \"=\" * 80\n</code></pre>"},{"location":"development/contributing/#5-document-the-tool","title":"5. Document the Tool","text":"<pre><code># docs/tools/my-tool.md\n# MyTool\n\nBrief description.\n\n## Actions\n\n### action1\nDescription of action1\n\n**Parameters:**\n- `action`: \"action1\"\n- `required_param`: Description\n\n**Example:**\n```ruby\ntool.execute(action: \"action1\", required_param: \"value\")\n</code></pre>"},{"location":"development/contributing/#action2","title":"action2","text":"<p>Description of action2</p> <p>Parameters: - <code>action</code>: \"action2\" - <code>required_param</code>: Description - <code>optional_param</code>: Description (optional)</p> <p>Example: <pre><code>tool.execute(action: \"action2\", required_param: \"value\", optional_param: \"custom\")\n</code></pre> <pre><code>#### 6. Update API Index\n\nAdd your tool to `docs/api/index.md`:\n\n```markdown\n| [MyTool](../tools/my-tool.md) | Description | Driver | Use case |\n</code></pre></p>"},{"location":"development/contributing/#adding-a-driver","title":"Adding a Driver","text":""},{"location":"development/contributing/#1-create-driver-file","title":"1. Create Driver File","text":"<pre><code># lib/shared_tools/tools/my_system/my_driver.rb\nmodule SharedTools\n  module Tools\n    module MySystem\n      class MyDriver &lt; BaseDriver\n        def initialize(config:)\n          @config = config\n        end\n\n        def perform_action(params:)\n          # Implementation\n        end\n\n        # Implement all BaseDriver methods\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/contributing/#2-add-driver-tests","title":"2. Add Driver Tests","text":"<pre><code>RSpec.describe SharedTools::Tools::MySystem::MyDriver do\n  let(:driver) { described_class.new(config: test_config) }\n\n  describe \"#perform_action\" do\n    it \"performs the action\" do\n      result = driver.perform_action(params: { key: \"value\" })\n      expect(result).to be_truthy\n    end\n  end\nend\n</code></pre>"},{"location":"development/contributing/#documentation-standards","title":"Documentation Standards","text":""},{"location":"development/contributing/#code-comments","title":"Code Comments","text":"<pre><code># Brief description of class\n#\n# @example\n#   tool = MyTool.new\n#   tool.execute(action: \"test\")\nclass MyTool &lt; ::RubyLLM::Tool\n  # Brief description of method\n  #\n  # @param action [String] description\n  # @return [String] description\n  # @raise [ArgumentError] when action is invalid\n  def execute(action:)\n    # ...\n  end\nend\n</code></pre>"},{"location":"development/contributing/#markdown-documentation","title":"Markdown Documentation","text":"<ul> <li>Use clear headings</li> <li>Include code examples</li> <li>Link related pages</li> <li>Keep line length reasonable</li> <li>Use proper formatting</li> </ul>"},{"location":"development/contributing/#release-process","title":"Release Process","text":"<p>Maintainers only:</p> <ol> <li>Update version in <code>lib/shared_tools/tools/version.rb</code></li> <li>Update <code>CHANGELOG.md</code></li> <li>Commit: <code>git commit -am \"chore: bump version to X.Y.Z\"</code></li> <li>Tag: <code>git tag vX.Y.Z</code></li> <li>Push: <code>git push &amp;&amp; git push --tags</code></li> <li>Build: <code>gem build shared_tools.gemspec</code></li> <li>Publish: <code>gem push shared_tools-X.Y.Z.gem</code></li> </ol>"},{"location":"development/contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Questions: Open a GitHub Discussion</li> <li>Bugs: Create an issue with reproducible example</li> <li>Features: Create an issue with use case explanation</li> <li>PRs: Tag maintainers for review</li> </ul>"},{"location":"development/contributing/#recognition","title":"Recognition","text":"<p>Contributors are recognized in: - README.md contributors section - CHANGELOG.md release notes - Git history</p> <p>Thank you for contributing to SharedTools!</p>"},{"location":"development/testing/","title":"Testing Guide","text":"<p>Comprehensive guide to testing SharedTools, including unit tests, integration tests, and testing strategies for LLM applications.</p>"},{"location":"development/testing/#testing-philosophy","title":"Testing Philosophy","text":"<p>SharedTools follows Test-Driven Development (TDD):</p> <ol> <li>Write test first</li> <li>Watch it fail</li> <li>Write minimal code to pass</li> <li>Refactor</li> <li>Repeat</li> </ol>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":""},{"location":"development/testing/#directory-organization","title":"Directory Organization","text":"<pre><code>spec/\n\u251c\u2500\u2500 spec_helper.rb              # Test configuration\n\u251c\u2500\u2500 support/                    # Shared test utilities\n\u2502   \u251c\u2500\u2500 mock_drivers.rb        # Mock driver implementations\n\u2502   \u2514\u2500\u2500 shared_examples.rb      # Shared example groups\n\u251c\u2500\u2500 fixtures/                   # Test data files\n\u2502   \u251c\u2500\u2500 sample.html\n\u2502   \u2514\u2500\u2500 test.pdf\n\u2514\u2500\u2500 shared_tools/\n    \u2514\u2500\u2500 tools/\n        \u251c\u2500\u2500 browser_tool_spec.rb\n        \u251c\u2500\u2500 browser/\n        \u2502   \u251c\u2500\u2500 visit_tool_spec.rb\n        \u2502   \u2514\u2500\u2500 watir_driver_spec.rb\n        \u251c\u2500\u2500 disk_tool_spec.rb\n        \u2514\u2500\u2500 database_tool_spec.rb\n</code></pre>"},{"location":"development/testing/#spec_helperrb-configuration","title":"spec_helper.rb Configuration","text":"<pre><code># frozen_string_literal: true\n\nrequire 'bundler/setup'\nrequire 'ruby_llm'\nrequire 'shared_tools'\n\n# SimpleCov for coverage\nrequire 'simplecov'\nSimpleCov.start do\n  add_filter '/spec/'\n  minimum_coverage 80\nend\n\n# RSpec configuration\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n  config.shared_context_metadata_behavior = :apply_to_host_groups\n  config.filter_run_when_matching :focus\n  config.disable_monkey_patching!\n  config.warnings = true\n\n  if config.files_to_run.one?\n    config.default_formatter = \"doc\"\n  end\n\n  config.order = :random\n  Kernel.srand config.seed\nend\n</code></pre>"},{"location":"development/testing/#unit-testing-tools","title":"Unit Testing Tools","text":""},{"location":"development/testing/#basic-tool-tests","title":"Basic Tool Tests","text":"<pre><code>RSpec.describe SharedTools::Tools::MyTool do\n  let(:tool) { described_class.new }\n\n  describe \".name\" do\n    it \"returns snake_case name\" do\n      expect(described_class.name).to eq('my_tool')\n    end\n  end\n\n  describe \"#initialize\" do\n    it \"initializes without parameters\" do\n      expect { described_class.new }.not_to raise_error\n    end\n\n    it \"accepts logger parameter\" do\n      logger = instance_double(Logger)\n      tool = described_class.new(logger: logger)\n      expect(tool.instance_variable_get(:@logger)).to eq(logger)\n    end\n\n    it \"accepts driver parameter\" do\n      driver = instance_double(Driver)\n      tool = described_class.new(driver: driver)\n      expect(tool.instance_variable_get(:@driver)).to eq(driver)\n    end\n  end\n\n  describe \"#execute\" do\n    context \"with valid action\" do\n      it \"executes successfully\" do\n        result = tool.execute(action: \"valid_action\", param: \"value\")\n        expect(result).to be_truthy\n      end\n\n      it \"returns expected result\" do\n        result = tool.execute(action: \"valid_action\", param: \"value\")\n        expect(result).to eq(\"expected result\")\n      end\n    end\n\n    context \"with invalid action\" do\n      it \"raises ArgumentError\" do\n        expect {\n          tool.execute(action: \"invalid_action\")\n        }.to raise_error(ArgumentError, /Unknown action/)\n      end\n    end\n\n    context \"parameter validation\" do\n      it \"requires action parameter\" do\n        expect {\n          tool.execute(param: \"value\")\n        }.to raise_error(ArgumentError)\n      end\n\n      it \"validates required parameters\" do\n        expect {\n          tool.execute(action: \"needs_param\")\n        }.to raise_error(ArgumentError, /param.*required/)\n      end\n\n      it \"uses default for optional parameters\" do\n        result = tool.execute(action: \"with_default\")\n        expect(result).to include(\"default_value\")\n      end\n    end\n  end\nend\n</code></pre>"},{"location":"development/testing/#testing-with-mock-drivers","title":"Testing with Mock Drivers","text":"<pre><code>RSpec.describe SharedTools::Tools::BrowserTool do\n  let(:mock_driver) do\n    instance_double(\n      SharedTools::Tools::Browser::BaseDriver,\n      goto: { status: :ok },\n      html: \"&lt;html&gt;&lt;body&gt;Test&lt;/body&gt;&lt;/html&gt;\",\n      title: \"Test Page\",\n      url: \"https://example.com\",\n      click: { status: :ok },\n      fill_in: { status: :ok },\n      screenshot: nil,\n      close: nil\n    )\n  end\n\n  let(:tool) { described_class.new(driver: mock_driver) }\n\n  describe \"visit action\" do\n    it \"calls driver goto method\" do\n      expect(mock_driver).to receive(:goto).with(url: \"https://test.com\")\n      tool.execute(action: \"visit\", url: \"https://test.com\")\n    end\n\n    it \"returns navigation message\" do\n      result = tool.execute(action: \"visit\", url: \"https://test.com\")\n      expect(result).to include(\"Navigated\")\n    end\n  end\n\n  describe \"page_inspect action\" do\n    it \"returns HTML from driver\" do\n      result = tool.execute(action: \"page_inspect\", full_html: true)\n      expect(result).to include(\"&lt;html&gt;\")\n    end\n\n    it \"calls driver html method\" do\n      expect(mock_driver).to receive(:html)\n      tool.execute(action: \"page_inspect\", full_html: true)\n    end\n  end\nend\n</code></pre>"},{"location":"development/testing/#shared-examples","title":"Shared Examples","text":"<p>Create reusable test patterns:</p> <pre><code># spec/support/shared_examples.rb\nRSpec.shared_examples \"a tool\" do\n  it \"has a name method\" do\n    expect(described_class).to respond_to(:name)\n  end\n\n  it \"returns snake_case name\" do\n    expect(described_class.name).to match(/^[a-z_]+$/)\n  end\n\n  it \"extends RubyLLM::Tool\" do\n    expect(described_class.ancestors).to include(RubyLLM::Tool)\n  end\n\n  it \"has execute method\" do\n    expect(described_class.new).to respond_to(:execute)\n  end\nend\n\n# Usage\nRSpec.describe SharedTools::Tools::MyTool do\n  it_behaves_like \"a tool\"\nend\n</code></pre>"},{"location":"development/testing/#integration-testing","title":"Integration Testing","text":""},{"location":"development/testing/#testing-with-real-drivers","title":"Testing with Real Drivers","text":"<pre><code>RSpec.describe SharedTools::Tools::BrowserTool, :integration do\n  let(:driver) { SharedTools::Tools::Browser::WatirDriver.new }\n  let(:tool) { described_class.new(driver: driver) }\n\n  after { driver.close }\n\n  it \"navigates to real website\" do\n    result = tool.execute(action: \"visit\", url: \"https://example.com\")\n    expect(result).to include(\"Navigated\")\n    expect(driver.url).to eq(\"https://example.com\")\n  end\n\n  it \"gets real page HTML\" do\n    tool.execute(action: \"visit\", url: \"https://example.com\")\n    html = tool.execute(action: \"page_inspect\", full_html: true)\n    expect(html).to include(\"Example Domain\")\n  end\nend\n</code></pre>"},{"location":"development/testing/#testing-database-operations","title":"Testing Database Operations","text":"<pre><code>RSpec.describe SharedTools::Tools::DatabaseTool do\n  let(:db) { SQLite3::Database.new(':memory:') }\n  let(:driver) { SharedTools::Tools::Database::SqliteDriver.new(db: db) }\n  let(:tool) { described_class.new(driver: driver) }\n\n  after { db.close }\n\n  it \"creates table\" do\n    results = tool.execute(statements: [\n      \"CREATE TABLE users (id INTEGER, name TEXT)\"\n    ])\n\n    expect(results.first[:status]).to eq(:ok)\n  end\n\n  it \"inserts and queries data\" do\n    tool.execute(statements: [\n      \"CREATE TABLE users (id INTEGER, name TEXT)\",\n      \"INSERT INTO users VALUES (1, 'Alice')\",\n      \"INSERT INTO users VALUES (2, 'Bob')\"\n    ])\n\n    results = tool.execute(statements: [\"SELECT * FROM users\"])\n    expect(results.first[:result]).to have(2).items\n  end\nend\n</code></pre>"},{"location":"development/testing/#testing-file-operations","title":"Testing File Operations","text":"<pre><code>RSpec.describe SharedTools::Tools::DiskTool do\n  let(:temp_dir) { Dir.mktmpdir }\n  let(:driver) { SharedTools::Tools::Disk::LocalDriver.new(root: temp_dir) }\n  let(:tool) { described_class.new(driver: driver) }\n\n  after { FileUtils.rm_rf(temp_dir) }\n\n  it \"creates and reads file\" do\n    tool.execute(action: \"file_create\", path: \"./test.txt\")\n    tool.execute(action: \"file_write\", path: \"./test.txt\", text: \"Hello\")\n\n    content = tool.execute(action: \"file_read\", path: \"./test.txt\")\n    expect(content).to eq(\"Hello\")\n  end\n\n  it \"creates directory\" do\n    tool.execute(action: \"directory_create\", path: \"./subdir\")\n    expect(File.directory?(File.join(temp_dir, \"subdir\"))).to be true\n  end\nend\n</code></pre>"},{"location":"development/testing/#testing-workflows","title":"Testing Workflows","text":""},{"location":"development/testing/#multi-tool-integration","title":"Multi-Tool Integration","text":"<pre><code>RSpec.describe \"Web scraping workflow\" do\n  let(:html_response) do\n    &lt;&lt;~HTML\n      &lt;html&gt;\n        &lt;body&gt;\n          &lt;div class=\"product\"&gt;Widget A&lt;/div&gt;\n          &lt;div class=\"product\"&gt;Widget B&lt;/div&gt;\n        &lt;/body&gt;\n      &lt;/html&gt;\n    HTML\n  end\n\n  let(:browser_driver) do\n    instance_double(\n      SharedTools::Tools::Browser::BaseDriver,\n      goto: nil,\n      html: html_response\n    )\n  end\n\n  let(:db) { SQLite3::Database.new(':memory:') }\n  let(:db_driver) { SharedTools::Tools::Database::SqliteDriver.new(db: db) }\n\n  let(:browser) { SharedTools::Tools::BrowserTool.new(driver: browser_driver) }\n  let(:database) { SharedTools::Tools::DatabaseTool.new(driver: db_driver) }\n\n  after { db.close }\n\n  it \"scrapes and stores data\" do\n    # Phase 1: Scrape\n    browser.execute(action: \"visit\", url: \"https://example.com\")\n    html = browser.execute(action: \"page_inspect\", full_html: true)\n\n    # Parse products (simplified)\n    products = html.scan(/Widget \\w/)\n\n    # Phase 2: Store\n    database.execute(statements: [\n      \"CREATE TABLE products (name TEXT)\"\n    ])\n\n    products.each do |product|\n      database.execute(statements: [\n        \"INSERT INTO products VALUES ('#{product}')\"\n      ])\n    end\n\n    # Verify\n    results = database.execute(statements: [\"SELECT * FROM products\"])\n    expect(results.first[:result]).to have(2).items\n  end\nend\n</code></pre>"},{"location":"development/testing/#test-fixtures","title":"Test Fixtures","text":""},{"location":"development/testing/#html-fixtures","title":"HTML Fixtures","text":"<pre><code># spec/fixtures/sample.html\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;&lt;title&gt;Test Page&lt;/title&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Welcome&lt;/h1&gt;\n    &lt;button id=\"submit\"&gt;Submit&lt;/button&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n# Usage in tests\nlet(:sample_html) { File.read('spec/fixtures/sample.html') }\nlet(:mock_driver) do\n  instance_double(Driver, html: sample_html)\nend\n</code></pre>"},{"location":"development/testing/#database-fixtures","title":"Database Fixtures","text":"<pre><code># spec/support/database_helper.rb\nmodule DatabaseHelper\n  def setup_test_database(db)\n    db.execute(&lt;&lt;~SQL)\n      CREATE TABLE users (\n        id INTEGER PRIMARY KEY,\n        name TEXT NOT NULL,\n        email TEXT UNIQUE\n      );\n\n      INSERT INTO users VALUES (1, 'Alice', 'alice@example.com');\n      INSERT INTO users VALUES (2, 'Bob', 'bob@example.com');\n    SQL\n  end\nend\n\nRSpec.configure do |config|\n  config.include DatabaseHelper\nend\n\n# Usage\nRSpec.describe \"Database queries\" do\n  let(:db) { SQLite3::Database.new(':memory:') }\n\n  before { setup_test_database(db) }\n\n  it \"queries users\" do\n    results = db.execute(\"SELECT * FROM users\")\n    expect(results).to have(2).items\n  end\nend\n</code></pre>"},{"location":"development/testing/#mock-driver-implementations","title":"Mock Driver Implementations","text":""},{"location":"development/testing/#complete-mock-browser-driver","title":"Complete Mock Browser Driver","text":"<pre><code># spec/support/mock_browser_driver.rb\nclass MockBrowserDriver &lt; SharedTools::Tools::Browser::BaseDriver\n  attr_reader :current_url, :actions, :form_data\n\n  def initialize(responses: {})\n    @responses = responses\n    @current_url = nil\n    @actions = []\n    @form_data = {}\n  end\n\n  def goto(url:)\n    @actions &lt;&lt; { type: :goto, url: url }\n    @current_url = url\n    \"Navigated to #{url}\"\n  end\n\n  def html\n    @responses[@current_url] || \"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Default&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\n  end\n\n  def title\n    \"Mock Page - #{@current_url}\"\n  end\n\n  def url\n    @current_url\n  end\n\n  def click(selector:)\n    @actions &lt;&lt; { type: :click, selector: selector }\n    \"Clicked #{selector}\"\n  end\n\n  def fill_in(selector:, text:)\n    @actions &lt;&lt; { type: :fill_in, selector: selector, text: text }\n    @form_data[selector] = text\n    \"Filled #{selector}\"\n  end\n\n  def screenshot\n    @actions &lt;&lt; { type: :screenshot }\n    StringIO.new(\"fake-png-data\")\n  end\n\n  def close\n    @actions &lt;&lt; { type: :close }\n  end\n\n  # Helper methods for assertions\n  def visited?(url)\n    @actions.any? { |a| a[:type] == :goto &amp;&amp; a[:url] == url }\n  end\n\n  def clicked?(selector)\n    @actions.any? { |a| a[:type] == :click &amp;&amp; a[:selector] == selector }\n  end\n\n  def filled?(selector, text)\n    @form_data[selector] == text\n  end\nend\n</code></pre>"},{"location":"development/testing/#complete-mock-database-driver","title":"Complete Mock Database Driver","text":"<pre><code># spec/support/mock_database_driver.rb\nclass MockDatabaseDriver &lt; SharedTools::Tools::Database::BaseDriver\n  attr_reader :statements, :tables\n\n  def initialize\n    @statements = []\n    @tables = {}\n  end\n\n  def perform(statement:)\n    @statements &lt;&lt; statement\n\n    case statement\n    when /CREATE TABLE (\\w+)/i\n      create_table($1)\n    when /INSERT INTO (\\w+).*VALUES\\s*\\((.*)\\)/i\n      insert_into($1, $2)\n    when /SELECT \\* FROM (\\w+)/i\n      select_from($1)\n    when /DELETE FROM (\\w+)/i\n      delete_from($1)\n    else\n      { status: :error, result: \"Unsupported: #{statement}\" }\n    end\n  end\n\n  private\n\n  def create_table(name)\n    @tables[name] = []\n    { status: :ok, result: \"Table #{name} created\" }\n  end\n\n  def insert_into(table, values)\n    @tables[table] ||= []\n    row = values.split(',').map { |v| v.strip.gsub(/['\"]/, '') }\n    @tables[table] &lt;&lt; row\n    { status: :ok, result: \"1 row inserted\" }\n  end\n\n  def select_from(table)\n    { status: :ok, result: @tables[table] || [] }\n  end\n\n  def delete_from(table)\n    count = @tables[table]&amp;.size || 0\n    @tables[table] = []\n    { status: :ok, result: \"#{count} rows deleted\" }\n  end\nend\n</code></pre>"},{"location":"development/testing/#test-coverage","title":"Test Coverage","text":""},{"location":"development/testing/#running-coverage-reports","title":"Running Coverage Reports","text":"<pre><code># Generate coverage report\nCOVERAGE=true bundle exec rspec\n\n# Open in browser\nopen coverage/index.html\n</code></pre>"},{"location":"development/testing/#coverage-requirements","title":"Coverage Requirements","text":"<ul> <li>Minimum 80% overall coverage</li> <li>90%+ for critical paths</li> <li>100% for utility methods</li> <li>Lower acceptable for:</li> <li>Error handling branches</li> <li>Logging statements</li> <li>Defensive code</li> </ul>"},{"location":"development/testing/#improving-coverage","title":"Improving Coverage","text":"<pre><code># Before: Untested error branch\ndef execute(action:)\n  case action\n  when \"valid\" then \"ok\"\n  else raise \"Invalid\"  # Untested!\n  end\nend\n\n# After: Test the error\nit \"raises error for invalid action\" do\n  expect {\n    tool.execute(action: \"invalid\")\n  }.to raise_error(/Invalid/)\nend\n</code></pre>"},{"location":"development/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"development/testing/#benchmarking","title":"Benchmarking","text":"<pre><code>require 'benchmark'\n\nRSpec.describe \"Performance\" do\n  it \"executes within time limit\" do\n    time = Benchmark.realtime do\n      1000.times { tool.execute(action: \"fast_action\") }\n    end\n\n    expect(time).to be &lt; 1.0  # Should complete in under 1 second\n  end\nend\n</code></pre>"},{"location":"development/testing/#memory-testing","title":"Memory Testing","text":"<pre><code>require 'memory_profiler'\n\nRSpec.describe \"Memory usage\" do\n  it \"doesn't leak memory\" do\n    report = MemoryProfiler.report do\n      1000.times { tool.execute(action: \"action\") }\n    end\n\n    expect(report.total_allocated_memsize).to be &lt; 10_000_000  # 10MB\n  end\nend\n</code></pre>"},{"location":"development/testing/#testing-llm-interactions","title":"Testing LLM Interactions","text":""},{"location":"development/testing/#mocking-rubyllm","title":"Mocking RubyLLM","text":"<pre><code>RSpec.describe \"LLM integration\" do\n  let(:mock_llm) do\n    instance_double(\n      RubyLLM::Agent,\n      call: { tool: \"browser_tool\", parameters: { action: \"visit\", url: \"https://example.com\" } }\n    )\n  end\n\n  it \"tool is called by LLM\" do\n    response = mock_llm.call(\"Visit example.com\")\n    tool_name = response[:tool]\n    params = response[:parameters]\n\n    tool = SharedTools::Tools.const_get(tool_name.camelize)\n    result = tool.new.execute(**params)\n\n    expect(result).to include(\"Navigated\")\n  end\nend\n</code></pre>"},{"location":"development/testing/#best-practices","title":"Best Practices","text":""},{"location":"development/testing/#do","title":"DO:","text":"<ul> <li>Write tests before code (TDD)</li> <li>Test one thing per test</li> <li>Use descriptive test names</li> <li>Clean up resources (after blocks)</li> <li>Use let for test data</li> <li>Mock external dependencies</li> <li>Test error cases</li> <li>Test edge cases</li> </ul>"},{"location":"development/testing/#dont","title":"DON'T:","text":"<ul> <li>Test implementation details</li> <li>Have interdependent tests</li> <li>Use sleep for timing</li> <li>Leave temp files</li> <li>Test private methods directly</li> <li>Ignore flaky tests</li> <li>Skip error cases</li> <li>Hard-code test data</li> </ul>"},{"location":"development/testing/#debugging-tests","title":"Debugging Tests","text":"<pre><code># Add focus to run one test\nit \"specific test\", :focus do\n  # ...\nend\n\n# Use binding.pry for debugging\nit \"debuggable test\" do\n  result = tool.execute(action: \"test\")\n  binding.pry  # Drops into console\n  expect(result).to eq(\"expected\")\nend\n\n# Print debug info\nit \"test with output\" do\n  result = tool.execute(action: \"test\")\n  puts \"Result: #{result.inspect}\"\n  expect(result).to be_truthy\nend\n</code></pre>"},{"location":"development/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Review Contributing Guidelines</li> <li>Understand Architecture</li> <li>Explore Example Tests</li> <li>Read Error Handling Guide</li> </ul>"},{"location":"examples/","title":"Examples","text":"<p>This section contains practical examples demonstrating how to use SharedTools in your LLM applications.</p>"},{"location":"examples/#available-examples","title":"Available Examples","text":""},{"location":"examples/#basic-tool-examples","title":"Basic Tool Examples","text":"<p>Each tool has a dedicated example file in the <code>/examples</code> directory showing basic usage:</p>"},{"location":"examples/#browser-tool-example","title":"Browser Tool Example","text":"<p>Demonstrates web automation capabilities including:</p> <ul> <li>Navigating to web pages</li> <li>Inspecting page content and HTML</li> <li>Finding elements by text or CSS selectors</li> <li>Clicking elements</li> <li>Filling in forms</li> <li>Taking screenshots</li> </ul> <pre><code>require 'shared_tools'\n\n# Initialize browser tool with Watir driver\nbrowser = SharedTools::Tools::BrowserTool.new\n\n# Navigate to a website\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::VISIT,\n  url: \"https://example.com\"\n)\n\n# Get page summary\nsummary = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::PAGE_INSPECT\n)\n</code></pre>"},{"location":"examples/#disk-tool-example","title":"Disk Tool Example","text":"<p>Shows file system operations including:</p> <ul> <li>Creating and deleting directories</li> <li>Reading and writing files</li> <li>Moving files and directories</li> <li>Listing directory contents</li> <li>Replacing text in files</li> </ul> <pre><code>require 'shared_tools'\n\n# Initialize disk tool\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create a file\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n  path: \"./demo.txt\"\n)\n\n# Write content\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n  path: \"./demo.txt\",\n  text: \"Hello, World!\"\n)\n\n# Read content\ncontent = disk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_READ,\n  path: \"./demo.txt\"\n)\n</code></pre>"},{"location":"examples/#database-tool-example","title":"Database Tool Example","text":"<p>Illustrates database operations including:</p> <ul> <li>Creating tables</li> <li>Inserting data</li> <li>Querying with SELECT statements</li> <li>Updating and deleting records</li> <li>Transaction handling</li> </ul> <pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\n# Setup database connection\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Execute SQL statements\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)\",\n    \"INSERT INTO users (name) VALUES ('Alice')\",\n    \"SELECT * FROM users\"\n  ]\n)\n</code></pre>"},{"location":"examples/#computer-tool-example","title":"Computer Tool Example","text":"<p>Demonstrates system-level operations:</p> <ul> <li>Taking screenshots</li> <li>Getting screen information</li> <li>Performing mouse actions</li> <li>Keyboard input simulation</li> <li>Accessing system clipboard</li> </ul> <pre><code>require 'shared_tools'\n\n# Initialize computer tool (Mac-specific in this example)\ncomputer = SharedTools::Tools::ComputerTool.new\n\n# Take a screenshot\nscreenshot = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::SCREENSHOT\n)\n\n# Get screen dimensions\ninfo = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::SCREEN_INFO\n)\n</code></pre>"},{"location":"examples/#eval-tool-example","title":"Eval Tool Example","text":"<p>Shows code evaluation capabilities:</p> <ul> <li>Ruby code evaluation</li> <li>Python code evaluation (with safe sandboxing)</li> <li>Shell command execution</li> <li>Error handling and output capture</li> </ul> <pre><code>require 'shared_tools'\n\n# Initialize eval tool\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Evaluate Ruby code\nresult = eval_tool.execute(\n  language: 'ruby',\n  code: 'puts [1, 2, 3].sum'\n)\n\n# Execute shell commands\noutput = eval_tool.execute(\n  language: 'shell',\n  code: 'ls -la'\n)\n</code></pre>"},{"location":"examples/#doc-tool-example","title":"Doc Tool Example","text":"<p>Demonstrates document processing:</p> <ul> <li>Reading PDF files</li> <li>Extracting text from specific pages</li> <li>Processing multi-page documents</li> <li>Handling PDF metadata</li> </ul> <pre><code>require 'shared_tools'\n\n# Initialize doc tool\ndoc = SharedTools::Tools::DocTool.new\n\n# Read PDF content\ncontent = doc.execute(\n  action: 'read_pdf',\n  path: './document.pdf',\n  page: 1\n)\n</code></pre>"},{"location":"examples/#advanced-workflow-example","title":"Advanced Workflow Example","text":""},{"location":"examples/#comprehensive-workflow-example","title":"Comprehensive Workflow Example","text":"<p>A complete end-to-end example showing how multiple tools work together in a realistic workflow:</p> <p>Scenario: Web Scraping to Database with Report Generation</p> <p>This example demonstrates:</p> <ol> <li>Web Scraping Phase</li> <li>Using BrowserTool to navigate to a product catalog</li> <li>Extracting structured data from HTML</li> <li> <p>Parsing and transforming the data</p> </li> <li> <p>Database Storage Phase</p> </li> <li>Creating database tables with DatabaseTool</li> <li>Inserting scraped data</li> <li>Performing queries and aggregations</li> <li> <p>Generating statistics</p> </li> <li> <p>Report Generation Phase</p> </li> <li>Using DiskTool to create report directories</li> <li>Generating Markdown reports</li> <li>Exporting data to JSON and CSV formats</li> <li>Organizing output files</li> </ol> <pre><code># Phase 1: Scrape data\nbrowser = SharedTools::Tools::BrowserTool.new(driver: browser_driver)\nbrowser.execute(action: \"visit\", url: \"https://example.com/products\")\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n\n# Phase 2: Store in database\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: db_driver)\ndatabase.execute(statements: [\n  \"CREATE TABLE products (...)\",\n  \"INSERT INTO products VALUES (...)\"\n])\n\n# Phase 3: Generate reports\ndisk = SharedTools::Tools::DiskTool.new\ndisk.execute(action: \"file_write\", path: \"./report.md\", text: report_content)\n</code></pre> <p>See the Workflows Guide for a detailed breakdown of this example.</p>"},{"location":"examples/#running-the-examples","title":"Running the Examples","text":"<p>All examples are located in the <code>/examples</code> directory and can be run directly:</p> <pre><code># Install dependencies first\nbundle install\n\n# Run a specific example\nruby examples/browser_tool_example.rb\nruby examples/comprehensive_workflow_example.rb\n</code></pre>"},{"location":"examples/#mock-drivers-for-testing","title":"Mock Drivers for Testing","text":"<p>Many examples include mock driver implementations that demonstrate the driver interface pattern:</p> <ul> <li>MockBrowserDriver: Simulates browser behavior without requiring a real browser</li> <li>SimpleSqliteDriver: Minimal database driver implementation</li> <li>LocalDriver: File system operations within a specified root directory</li> </ul> <p>These mock drivers are useful for:</p> <ul> <li>Understanding the driver interface requirements</li> <li>Testing without external dependencies</li> <li>Creating your own custom drivers</li> </ul>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Multi-Tool Workflows</li> <li>Explore the Tool API Reference</li> <li>Read about Testing Your Tools</li> <li>Understand Error Handling Patterns</li> </ul>"},{"location":"examples/#example-categories","title":"Example Categories","text":""},{"location":"examples/#by-tool-type","title":"By Tool Type","text":"<ul> <li>Browser Automation: browser_tool_example.rb</li> <li>File System: disk_tool_example.rb</li> <li>Database: database_tool_example.rb</li> <li>System Control: computer_tool_example.rb</li> <li>Code Execution: eval_tool_example.rb</li> <li>Document Processing: doc_tool_example.rb</li> </ul>"},{"location":"examples/#by-complexity","title":"By Complexity","text":"<ul> <li>Beginner: Single-tool examples showing basic operations</li> <li>Intermediate: Examples with custom drivers and error handling</li> <li>Advanced: comprehensive_workflow_example.rb showing multi-tool integration</li> </ul>"},{"location":"examples/#by-use-case","title":"By Use Case","text":"<ul> <li>Data Collection: Web scraping and extraction</li> <li>Data Processing: Database operations and transformations</li> <li>Report Generation: Creating output files in multiple formats</li> <li>System Automation: Orchestrating multiple tools together</li> </ul>"},{"location":"examples/#common-patterns","title":"Common Patterns","text":""},{"location":"examples/#human-in-the-loop-authorization","title":"Human-in-the-Loop Authorization","text":"<p>All tools respect the SharedTools authorization system:</p> <pre><code># Require user confirmation (default)\nSharedTools.auto_execute(false)\n\n# The AI will ask permission before executing\ndisk.execute(action: \"file_delete\", path: \"./important.txt\")\n\n# Auto-execute for automated workflows\nSharedTools.auto_execute(true)\n</code></pre>"},{"location":"examples/#error-handling","title":"Error Handling","text":"<p>Examples demonstrate proper error handling:</p> <pre><code>begin\n  result = database.execute(statements: [\"SELECT * FROM missing_table\"])\n  if result.first[:status] == :error\n    puts \"Database error: #{result.first[:result]}\"\n  end\nrescue =&gt; e\n  puts \"Unexpected error: #{e.message}\"\nend\n</code></pre>"},{"location":"examples/#cleanup-and-resource-management","title":"Cleanup and Resource Management","text":"<p>Examples show proper resource cleanup:</p> <pre><code>browser = SharedTools::Tools::BrowserTool.new\nbegin\n  # Use the tool\n  browser.execute(action: \"visit\", url: \"https://example.com\")\nensure\n  # Always cleanup\n  browser.cleanup!\nend\n</code></pre>"},{"location":"examples/#contributing-examples","title":"Contributing Examples","text":"<p>Have a great example to share? See our Contributing Guide for information on submitting examples.</p> <p>Good examples:</p> <ul> <li>Solve a real-world problem</li> <li>Are well-commented and explain the \"why\"</li> <li>Include error handling</li> <li>Clean up resources properly</li> <li>Can run independently with minimal setup</li> </ul>"},{"location":"examples/browser/","title":"Browser Tool Example","text":"<p>The BrowserTool provides a unified interface for web automation tasks. It supports multiple actions like visiting pages, inspecting content, clicking elements, filling forms, and taking screenshots.</p>"},{"location":"examples/browser/#overview","title":"Overview","text":"<p>This example demonstrates how to use the BrowserTool facade to automate browser interactions. The tool uses a driver pattern, allowing you to swap different browser drivers (like WatirDriver for real browsers or a mock driver for testing).</p>"},{"location":"examples/browser/#example-code","title":"Example Code","text":"<p>View the complete example: browser_tool_example.rb</p>"},{"location":"examples/browser/#key-features","title":"Key Features","text":""},{"location":"examples/browser/#1-page-navigation","title":"1. Page Navigation","text":"<p>Navigate to any URL using the <code>VISIT</code> action:</p> <pre><code>browser = SharedTools::Tools::BrowserTool.new(driver: driver)\n\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::VISIT,\n  url: \"https://example.com\"\n)\n</code></pre>"},{"location":"examples/browser/#2-page-inspection","title":"2. Page Inspection","text":"<p>Inspect page content with the <code>PAGE_INSPECT</code> action:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::PAGE_INSPECT,\n  full_html: false  # Get summary instead of full HTML\n)\n</code></pre>"},{"location":"examples/browser/#3-finding-elements","title":"3. Finding Elements","text":"<p>Find elements by text content:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::UI_INSPECT,\n  text_content: \"Login\"\n)\n</code></pre> <p>Find elements by CSS selector:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::SELECTOR_INSPECT,\n  selector: \"input[type='text']\"\n)\n</code></pre>"},{"location":"examples/browser/#4-interacting-with-elements","title":"4. Interacting with Elements","text":"<p>Click elements:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::CLICK,\n  selector: \"button[type='submit']\"\n)\n</code></pre> <p>Fill in text fields:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::TEXT_FIELD_SET,\n  selector: \"#username\",\n  value: \"demo_user\"\n)\n</code></pre>"},{"location":"examples/browser/#5-screenshots","title":"5. Screenshots","text":"<p>Take screenshots:</p> <pre><code>result = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::SCREENSHOT\n)\n# Returns base64-encoded PNG image\n</code></pre>"},{"location":"examples/browser/#complete-workflow-example","title":"Complete Workflow Example","text":"<p>The example includes a complete login automation workflow:</p> <pre><code># Step 1: Navigate to login page\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::VISIT,\n  url: \"https://example.com/login\"\n)\n\n# Step 2: Fill in username\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::TEXT_FIELD_SET,\n  selector: \"#username\",\n  value: \"admin\"\n)\n\n# Step 3: Fill in password\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::TEXT_FIELD_SET,\n  selector: \"#password\",\n  value: \"secret123\"\n)\n\n# Step 4: Click login button\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::CLICK,\n  selector: \"button[type='submit']\"\n)\n\n# Cleanup\nbrowser.cleanup!\n</code></pre>"},{"location":"examples/browser/#available-actions","title":"Available Actions","text":"<ul> <li><code>VISIT</code> - Navigate to a URL</li> <li><code>PAGE_INSPECT</code> - Get page HTML content</li> <li><code>UI_INSPECT</code> - Find elements by text content</li> <li><code>SELECTOR_INSPECT</code> - Find elements by CSS selector</li> <li><code>CLICK</code> - Click an element</li> <li><code>TEXT_FIELD_SET</code> - Fill in a text field</li> <li><code>SCREENSHOT</code> - Take a screenshot</li> </ul>"},{"location":"examples/browser/#run-the-example","title":"Run the Example","text":"<pre><code>cd examples\nbundle exec ruby browser_tool_example.rb\n</code></pre> <p>The example uses a demo driver that simulates browser interactions. For real browser automation, you would use a driver like <code>WatirDriver</code> with a real browser instance.</p>"},{"location":"examples/browser/#related-documentation","title":"Related Documentation","text":"<ul> <li>BrowserTool Documentation</li> <li>Facade Pattern</li> <li>Driver Pattern Documentation</li> <li>Architecture Guide</li> </ul>"},{"location":"examples/browser/#notes","title":"Notes","text":"<ul> <li>The BrowserTool uses a driver pattern for flexibility</li> <li>Supports multiple browser drivers (Watir, Selenium, etc.)</li> <li>All actions return structured results</li> <li>Screenshots are returned as base64-encoded strings</li> <li>Remember to call <code>cleanup!</code> to close the browser when done</li> </ul>"},{"location":"examples/database/","title":"Database Tool Example","text":"<p>The DatabaseTool provides a unified interface for executing SQL operations on databases. This example demonstrates using SQLite3, but the tool supports any database with an appropriate driver.</p>"},{"location":"examples/database/#overview","title":"Overview","text":"<p>This example demonstrates how to use the DatabaseTool to execute SQL statements. It uses SQLite3 as the database backend and shows how to create tables, insert data, query, update, and delete records.</p>"},{"location":"examples/database/#example-code","title":"Example Code","text":"<p>View the complete example: database_tool_example.rb</p>"},{"location":"examples/database/#requirements","title":"Requirements","text":"<p>This example requires the <code>sqlite3</code> gem:</p> <pre><code>gem install sqlite3\n</code></pre>"},{"location":"examples/database/#key-features","title":"Key Features","text":""},{"location":"examples/database/#1-creating-a-database-driver","title":"1. Creating a Database Driver","text":"<p>First, create a driver that implements the <code>BaseDriver</code> interface:</p> <pre><code>class SimpleSqliteDriver &lt; SharedTools::Tools::Database::BaseDriver\n  def initialize(db:)\n    @db = db\n  end\n\n  def perform(statement:)\n    # Execute query or command\n    # Return structured result\n  end\nend\n\n# Create database connection\ndb = SQLite3::Database.new(':memory:')\ndriver = SimpleSqliteDriver.new(db: db)\ndatabase_tool = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"examples/database/#2-creating-tables","title":"2. Creating Tables","text":"<pre><code>results = database_tool.execute(\n  statements: [\n    \"CREATE TABLE users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL,\n      email TEXT NOT NULL,\n      age INTEGER\n    )\"\n  ]\n)\n\nresults.each do |result|\n  puts \"Status: #{result[:status]}\"\n  puts \"Result: #{result[:result]}\"\nend\n</code></pre>"},{"location":"examples/database/#3-inserting-data","title":"3. Inserting Data","text":"<p>Execute multiple INSERT statements:</p> <pre><code>results = database_tool.execute(\n  statements: [\n    \"INSERT INTO users (name, email, age) VALUES ('Alice Smith', 'alice@example.com', 30)\",\n    \"INSERT INTO users (name, email, age) VALUES ('Bob Johnson', 'bob@example.com', 25)\",\n    \"INSERT INTO users (name, email, age) VALUES ('Carol White', 'carol@example.com', 28)\"\n  ]\n)\n\nresults.each do |result|\n  puts \"Statement: #{result[:statement]}\"\n  puts \"Result: #{result[:result]}\"\nend\n</code></pre>"},{"location":"examples/database/#4-querying-data","title":"4. Querying Data","text":"<pre><code>results = database_tool.execute(\n  statements: [\"SELECT * FROM users\"]\n)\n\nresults.each do |result|\n  puts \"Results:\"\n  puts result[:result]\nend\n</code></pre> <p>With WHERE clause:</p> <pre><code>results = database_tool.execute(\n  statements: [\n    \"SELECT name, age FROM users WHERE age &gt; 25 ORDER BY age DESC\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#5-updating-data","title":"5. Updating Data","text":"<pre><code>results = database_tool.execute(\n  statements: [\n    \"UPDATE users SET age = 31 WHERE name = 'Alice Smith'\"\n  ]\n)\n\nputs \"Result: #{results.first[:result]}\"\n# Output: Command executed successfully (1 rows affected)\n</code></pre>"},{"location":"examples/database/#6-foreign-keys-and-relations","title":"6. Foreign Keys and Relations","text":"<p>Create tables with foreign keys:</p> <pre><code>results = database_tool.execute(\n  statements: [\n    \"CREATE TABLE posts (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER,\n      title TEXT,\n      body TEXT,\n      FOREIGN KEY(user_id) REFERENCES users(id)\n    )\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#7-join-queries","title":"7. JOIN Queries","text":"<p>Query with joins:</p> <pre><code>results = database_tool.execute(\n  statements: [\n    \"SELECT users.name, posts.title\n     FROM posts\n     JOIN users ON posts.user_id = users.id\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#8-aggregate-functions","title":"8. Aggregate Functions","text":"<pre><code>results = database_tool.execute(\n  statements: [\n    \"SELECT COUNT(*) as total_users FROM users\",\n    \"SELECT AVG(age) as average_age FROM users\",\n    \"SELECT name, COUNT(*) as post_count\n     FROM users\n     JOIN posts ON users.id = posts.user_id\n     GROUP BY users.name\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#9-deleting-data","title":"9. Deleting Data","text":"<pre><code>results = database_tool.execute(\n  statements: [\n    \"DELETE FROM posts WHERE user_id = 2\",\n    \"DELETE FROM users WHERE id = 2\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#10-dropping-tables","title":"10. Dropping Tables","text":"<pre><code>results = database_tool.execute(\n  statements: [\n    \"DROP TABLE posts\",\n    \"DROP TABLE users\"\n  ]\n)\n</code></pre>"},{"location":"examples/database/#sequential-execution-with-error-handling","title":"Sequential Execution with Error Handling","text":"<p>The tool stops execution on the first error (transaction-like behavior):</p> <pre><code>results = database_tool.execute(\n  statements: [\n    \"INSERT INTO users (name, email, age) VALUES ('David Brown', 'david@example.com', 35)\",\n    \"INSERT INTO invalid_table (foo) VALUES ('bar')\",  # This will fail\n    \"INSERT INTO users (name, email, age) VALUES ('Eve Wilson', 'eve@example.com', 32)\"  # Won't execute\n  ]\n)\n\n# Only the first statement executed\nputs \"Executed: #{results.size} statements\"  # 2 (success + failure)\n</code></pre>"},{"location":"examples/database/#result-structure","title":"Result Structure","text":"<p>Each statement returns a result hash:</p> <pre><code>{\n  statement: &lt;SQL statement&gt;,\n  status: :ok or :error,\n  result: &lt;result data or error message&gt;\n}\n</code></pre> <p>For queries: <pre><code>{\n  status: :ok,\n  result: \"id | name | email\n           1 | Alice Smith | alice@example.com\n           2 | Bob Johnson | bob@example.com\"\n}\n</code></pre></p> <p>For commands: <pre><code>{\n  status: :ok,\n  result: \"Command executed successfully (1 rows affected)\"\n}\n</code></pre></p> <p>For errors: <pre><code>{\n  status: :error,\n  result: \"no such table: invalid_table\"\n}\n</code></pre></p>"},{"location":"examples/database/#creating-custom-drivers","title":"Creating Custom Drivers","text":"<p>To support other databases, create a driver that extends <code>BaseDriver</code>:</p> <pre><code>class MyDatabaseDriver &lt; SharedTools::Tools::Database::BaseDriver\n  def initialize(connection:)\n    @connection = connection\n  end\n\n  def perform(statement:)\n    # Your implementation here\n    # Must return hash with :status and :result keys\n    {\n      status: :ok,\n      result: \"Your result\"\n    }\n  rescue =&gt; e\n    {\n      status: :error,\n      result: e.message\n    }\n  end\nend\n</code></pre>"},{"location":"examples/database/#run-the-example","title":"Run the Example","text":"<pre><code>cd examples\nbundle exec ruby database_tool_example.rb\n</code></pre> <p>The example creates an in-memory SQLite database, performs various operations, and demonstrates the tool's capabilities.</p>"},{"location":"examples/database/#related-documentation","title":"Related Documentation","text":"<ul> <li>DatabaseTool Documentation</li> <li>Facade Pattern</li> <li>Driver Interface</li> <li>Architecture Guide</li> </ul>"},{"location":"examples/database/#supported-databases","title":"Supported Databases","text":"<p>With appropriate drivers, DatabaseTool can work with:</p> <ul> <li>SQLite3</li> <li>PostgreSQL</li> <li>MySQL/MariaDB</li> <li>SQL Server</li> <li>Any database with a Ruby adapter</li> </ul>"},{"location":"examples/database/#key-takeaways","title":"Key Takeaways","text":"<ul> <li>DatabaseTool provides a unified interface for SQL operations</li> <li>Supports multiple database backends via the driver pattern</li> <li>Executes multiple statements sequentially</li> <li>Stops on first error (transaction-like behavior)</li> <li>Returns structured results for each statement</li> <li>Graceful error handling with descriptive messages</li> <li>Works with any database that has a Ruby adapter</li> </ul>"},{"location":"examples/database/#security-notes","title":"Security Notes","text":"<ul> <li>Always use parameterized queries in production</li> <li>Validate and sanitize user input</li> <li>Use connection pooling for better performance</li> <li>Consider using transactions for multiple related operations</li> <li>Implement proper error handling and logging</li> <li>Follow database-specific best practices</li> </ul>"},{"location":"examples/database/#use-cases","title":"Use Cases","text":"<ul> <li>Database migrations and schema management</li> <li>Data import/export operations</li> <li>Automated testing with database fixtures</li> <li>Administrative tasks and maintenance</li> <li>Data analysis and reporting</li> <li>Building database utilities and tools</li> <li>LLM-powered database interactions</li> </ul>"},{"location":"examples/disk/","title":"Disk Tool Example","text":"<p>The DiskTool provides a secure, sandboxed interface for file system operations. It handles file and directory creation, reading, writing, moving, and deletion with built-in path traversal protection.</p>"},{"location":"examples/disk/#overview","title":"Overview","text":"<p>This example demonstrates how to use the DiskTool facade to perform file system operations safely. The tool uses a LocalDriver that is sandboxed to a specific root directory for security.</p>"},{"location":"examples/disk/#example-code","title":"Example Code","text":"<p>View the complete example: disk_tool_example.rb</p>"},{"location":"examples/disk/#key-features","title":"Key Features","text":""},{"location":"examples/disk/#1-directory-operations","title":"1. Directory Operations","text":"<p>Create directories:</p> <pre><code>disk = SharedTools::Tools::DiskTool.new(\n  driver: SharedTools::Tools::Disk::LocalDriver.new(root: temp_dir)\n)\n\n# Create a single directory\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_CREATE,\n  path: \"./projects\"\n)\n\n# Create nested directories\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_CREATE,\n  path: \"./projects/ruby/shared_tools\"\n)\n</code></pre> <p>List directory contents:</p> <pre><code>result = disk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_LIST,\n  path: \".\"\n)\n</code></pre> <p>Move and delete directories:</p> <pre><code># Move\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_MOVE,\n  path: \"./projects/ruby\",\n  destination: \"./backup/ruby_project\"\n)\n\n# Delete\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_DELETE,\n  path: \"./projects\"\n)\n</code></pre>"},{"location":"examples/disk/#2-file-operations","title":"2. File Operations","text":"<p>Create and write files:</p> <pre><code># Create a file\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n  path: \"./README.md\"\n)\n\n# Write content\ncontent = &lt;&lt;~TEXT\n  # SharedTools Demo\n\n  This is a demo file created by DiskTool.\nTEXT\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n  path: \"./README.md\",\n  text: content\n)\n</code></pre> <p>Read files:</p> <pre><code>result = disk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_READ,\n  path: \"./README.md\"\n)\nputs result\n</code></pre>"},{"location":"examples/disk/#3-text-replacement","title":"3. Text Replacement","text":"<p>Replace text in files:</p> <pre><code>disk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_REPLACE,\n  path: \"./README.md\",\n  old_text: \"demo file\",\n  new_text: \"example file\"\n)\n</code></pre>"},{"location":"examples/disk/#4-moving-and-deleting-files","title":"4. Moving and Deleting Files","text":"<pre><code># Move\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_MOVE,\n  path: \"./README.md\",\n  destination: \"./projects/README.md\"\n)\n\n# Delete\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_DELETE,\n  path: \"./projects/README.md\"\n)\n</code></pre>"},{"location":"examples/disk/#security-features","title":"Security Features","text":"<p>The DiskTool includes built-in path traversal protection:</p> <pre><code># This will raise a SecurityError\nbegin\n  disk.execute(\n    action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n    path: \"../../../etc/evil.txt\"\n  )\nrescue SecurityError =&gt; e\n  puts \"Security check passed! Prevented path traversal attack.\"\nend\n</code></pre>"},{"location":"examples/disk/#complete-workflow-example","title":"Complete Workflow Example","text":"<p>The example includes a complete project setup workflow:</p> <pre><code># Create project structure\n%w[\n  ./my_app\n  ./my_app/lib\n  ./my_app/spec\n  ./my_app/bin\n].each do |dir|\n  disk.execute(\n    action: SharedTools::Tools::DiskTool::Action::DIRECTORY_CREATE,\n    path: dir\n  )\nend\n\n# Create files with content\nfiles = {\n  \"./my_app/Gemfile\" =&gt; \"source 'https://rubygems.org'\\n\\ngem 'shared_tools'\\n\",\n  \"./my_app/lib/my_app.rb\" =&gt; \"# frozen_string_literal: true\\n\\nmodule MyApp\\n  VERSION = '0.1.0'\\nend\\n\",\n  \"./my_app/README.md\" =&gt; \"# My App\\n\\nA new Ruby application.\\n\"\n}\n\nfiles.each do |path, content|\n  disk.execute(\n    action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n    path: path\n  )\n  disk.execute(\n    action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n    path: path,\n    text: content\n  )\nend\n</code></pre>"},{"location":"examples/disk/#available-actions","title":"Available Actions","text":""},{"location":"examples/disk/#directory-actions","title":"Directory Actions","text":"<ul> <li><code>DIRECTORY_CREATE</code> - Create directories</li> <li><code>DIRECTORY_LIST</code> - List directory contents</li> <li><code>DIRECTORY_MOVE</code> - Move directories</li> <li><code>DIRECTORY_DELETE</code> - Delete empty directories</li> </ul>"},{"location":"examples/disk/#file-actions","title":"File Actions","text":"<ul> <li><code>FILE_CREATE</code> - Create files</li> <li><code>FILE_READ</code> - Read file contents</li> <li><code>FILE_WRITE</code> - Write content to files</li> <li><code>FILE_REPLACE</code> - Replace text in files</li> <li><code>FILE_MOVE</code> - Move files</li> <li><code>FILE_DELETE</code> - Delete files</li> </ul>"},{"location":"examples/disk/#run-the-example","title":"Run the Example","text":"<pre><code>cd examples\nbundle exec ruby disk_tool_example.rb\n</code></pre> <p>The example creates a temporary directory, performs various file operations, and cleans up afterward.</p>"},{"location":"examples/disk/#related-documentation","title":"Related Documentation","text":"<ul> <li>DiskTool Documentation</li> <li>Facade Pattern</li> <li>Driver Interface</li> <li>Authorization System</li> </ul>"},{"location":"examples/disk/#notes","title":"Notes","text":"<ul> <li>All operations are sandboxed to the root directory specified in the driver</li> <li>Path traversal attacks are automatically prevented</li> <li>Supports both relative and absolute paths (within the sandbox)</li> <li>The LocalDriver normalizes and validates all paths</li> <li>Directories must be empty before deletion</li> </ul>"},{"location":"examples/doc/","title":"Doc Tool Example","text":"<p>The DocTool provides an interface for document processing operations, particularly for reading and extracting text from PDF documents.</p>"},{"location":"examples/doc/#overview","title":"Overview","text":"<p>This example demonstrates how to use the DocTool facade to read and extract text from PDF documents. The tool supports reading single pages, multiple pages, and handles invalid page numbers gracefully.</p>"},{"location":"examples/doc/#example-code","title":"Example Code","text":"<p>View the complete example: doc_tool_example.rb</p>"},{"location":"examples/doc/#key-features","title":"Key Features","text":""},{"location":"examples/doc/#1-reading-a-single-page","title":"1. Reading a Single Page","text":"<p>Extract text from a specific page:</p> <pre><code>doc_tool = SharedTools::Tools::DocTool.new\n\nresult = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1\"\n)\n\nputs \"Total pages: #{result[:total_pages]}\"\nputs \"Page 1 text: #{result[:pages].first[:text]}\"\n</code></pre>"},{"location":"examples/doc/#2-reading-multiple-pages","title":"2. Reading Multiple Pages","text":"<p>Extract text from multiple specific pages:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1, 2, 3\"\n)\n\nresult[:pages].each do |page|\n  puts \"Page #{page[:page]}: #{page[:text].length} characters\"\nend\n</code></pre>"},{"location":"examples/doc/#3-handling-invalid-page-numbers","title":"3. Handling Invalid Page Numbers","text":"<p>The tool automatically filters out invalid page numbers:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1, 999\"\n)\n\nputs \"Valid pages: #{result[:pages].size}\"\nputs \"Invalid pages: #{result[:invalid_pages].inspect}\"\n# The tool automatically filters out page 999 if it doesn't exist\n</code></pre>"},{"location":"examples/doc/#4-text-extraction-and-search","title":"4. Text Extraction and Search","text":"<p>Extract text for search and analysis:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1\"\n)\n\ntext = result[:pages].first[:text]\n\n# Search for specific terms\nsearch_terms = ['the', 'and', 'of']\n\nsearch_terms.each do |term|\n  count = text.downcase.scan(/\\b#{term}\\b/).size\n  puts \"'#{term}': #{count} occurrences\"\nend\n</code></pre>"},{"location":"examples/doc/#document-statistics","title":"Document Statistics","text":"<p>Calculate statistics from extracted text:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1, 2, 3\"\n)\n\ntotal_chars = 0\ntotal_words = 0\ntotal_lines = 0\n\nresult[:pages].each do |page|\n  text = page[:text] || \"\"\n  total_chars += text.length\n  total_words += text.split.size\n  total_lines += text.lines.count\nend\n\nputs \"Total characters: #{total_chars}\"\nputs \"Total words: #{total_words}\"\nputs \"Average words per page: #{total_words / result[:pages].size}\"\n</code></pre>"},{"location":"examples/doc/#using-individual-tools-directly","title":"Using Individual Tools Directly","text":"<p>You can also use the PDF reader tool directly:</p> <pre><code>pdf_tool = SharedTools::Tools::Doc::PdfReaderTool.new\n\nresult = pdf_tool.execute(\n  doc_path: sample_pdf,\n  page_numbers: \"1\"\n)\n\nputs \"Pages extracted: #{result[:pages].size}\"\nputs \"Total document pages: #{result[:total_pages]}\"\n</code></pre>"},{"location":"examples/doc/#practical-examples","title":"Practical Examples","text":""},{"location":"examples/doc/#finding-section-headers","title":"Finding Section Headers","text":"<p>Extract potential section headers from a document:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1, 2, 3\"\n)\n\nresult[:pages].each do |page|\n  next unless page[:text]\n\n  lines = page[:text].lines\n  headers = lines.select do |line|\n    line.strip.length &gt; 5 &amp;&amp;\n    line.strip == line.strip.upcase &amp;&amp;\n    line.strip.match?(/^[A-Z\\s]+$/)\n  end\n\n  if headers.any?\n    puts \"Page #{page[:page]}:\"\n    headers.each { |header| puts \"  - #{header.strip}\" }\n  end\nend\n</code></pre>"},{"location":"examples/doc/#word-frequency-analysis","title":"Word Frequency Analysis","text":"<p>Analyze word frequency across multiple pages:</p> <pre><code># Read first 5 pages\nresult = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: sample_pdf,\n  page_numbers: \"1, 2, 3, 4, 5\"\n)\n\n# Combine all text\nall_text = result[:pages].map { |p| p[:text] }.join(\" \")\n\n# Count word frequencies\nwords = all_text.downcase.scan(/\\b[a-z]{4,}\\b/)\nfreq = Hash.new(0)\nwords.each { |word| freq[word] += 1 }\n\n# Show top 10 most common words\nfreq.sort_by { |_, count| -count }.first(10).each_with_index do |(word, count), i|\n  puts \"#{i + 1}. '#{word}': #{count} times\"\nend\n</code></pre>"},{"location":"examples/doc/#error-handling","title":"Error Handling","text":"<p>The tool gracefully handles errors:</p> <pre><code>result = doc_tool.execute(\n  action: SharedTools::Tools::DocTool::Action::PDF_READ,\n  doc_path: \"/nonexistent/file.pdf\",\n  page_numbers: \"1\"\n)\n\nif result[:error]\n  puts \"Error: #{result[:error]}\"\n  # The tool returns error information instead of raising exceptions\nend\n</code></pre>"},{"location":"examples/doc/#result-structure","title":"Result Structure","text":"<pre><code>{\n  total_pages: &lt;number of pages in document&gt;,\n  requested_pages: &lt;array of requested page numbers&gt;,\n  pages: [\n    {\n      page: &lt;page number&gt;,\n      text: &lt;extracted text&gt;\n    },\n    ...\n  ],\n  invalid_pages: &lt;array of invalid page numbers&gt;,\n  error: &lt;error message if failed&gt;\n}\n</code></pre>"},{"location":"examples/doc/#available-actions","title":"Available Actions","text":"<ul> <li><code>PDF_READ</code> - Read and extract text from PDF pages</li> </ul>"},{"location":"examples/doc/#run-the-example","title":"Run the Example","text":"<pre><code>cd examples\nbundle exec ruby doc_tool_example.rb\n</code></pre> <p>The example requires a test PDF file at <code>test/fixtures/test.pdf</code>. If you don't have one, you'll need to provide a sample PDF.</p>"},{"location":"examples/doc/#related-documentation","title":"Related Documentation","text":"<ul> <li>DocTool Documentation</li> <li>Facade Pattern</li> <li>Driver Interface</li> </ul>"},{"location":"examples/doc/#requirements","title":"Requirements","text":"<ul> <li>The <code>pdf-reader</code> gem must be installed (included in SharedTools dependencies)</li> <li>A valid PDF file to process</li> </ul>"},{"location":"examples/doc/#key-takeaways","title":"Key Takeaways","text":"<ul> <li>DocTool provides a unified interface for document processing</li> <li>PDF reading supports single pages, multiple pages, and ranges</li> <li>Invalid page numbers are automatically filtered out</li> <li>Extracted text can be used for search, analysis, and processing</li> <li>Error handling is built-in with descriptive error messages</li> <li>Individual tools (PdfReaderTool) can be used directly for more control</li> <li>Results include metadata about total pages and requested pages</li> </ul>"},{"location":"examples/doc/#use-cases","title":"Use Cases","text":"<ul> <li>Extracting text for full-text search</li> <li>Analyzing document content</li> <li>Finding specific information in PDFs</li> <li>Converting PDF content to other formats</li> <li>Document summarization and analysis</li> <li>Building document indexing systems</li> </ul>"},{"location":"examples/eval/","title":"Eval Tool Example","text":"<p>The EvalTool provides a unified interface for evaluating Ruby code, Python code, and shell commands safely with user authorization.</p>"},{"location":"examples/eval/#overview","title":"Overview","text":"<p>This example demonstrates how to use the EvalTool facade to execute code in different languages. The tool includes built-in safety features with user authorization (which can be bypassed for automation).</p>"},{"location":"examples/eval/#example-code","title":"Example Code","text":"<p>View the complete example: eval_tool_example.rb</p>"},{"location":"examples/eval/#key-features","title":"Key Features","text":""},{"location":"examples/eval/#1-ruby-code-evaluation","title":"1. Ruby Code Evaluation","text":"<p>Execute Ruby code and get results:</p> <pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\nresult = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::RUBY,\n  code: \"2 + 2\"\n)\n\nputs \"Result: #{result[:result]}\"    # 4\nputs \"Success: #{result[:success]}\"  # true\n</code></pre> <p>Ruby code with console output:</p> <pre><code>result = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::RUBY,\n  code: \"puts 'Hello from Ruby!'; 42\"\n)\n\nputs \"Display:\\n#{result[:display]}\"  # Shows console output\n</code></pre> <p>Multi-line Ruby code:</p> <pre><code>code = &lt;&lt;~RUBY\n  x = 10\n  y = 20\n  x * y\nRUBY\n\nresult = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::RUBY,\n  code: code\n)\n\nputs \"Result: #{result[:result]}\"  # 200\n</code></pre>"},{"location":"examples/eval/#2-python-code-evaluation","title":"2. Python Code Evaluation","text":"<p>Execute Python code (requires python3):</p> <pre><code>result = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::PYTHON,\n  code: \"2 ** 10\"\n)\n\nputs \"Result: #{result[:result]}\"       # 1024\nputs \"Python Type: #{result[:python_type]}\"  # int\n</code></pre> <p>Python with imports:</p> <pre><code>python_code = &lt;&lt;~PYTHON\n  import math\n  math.sqrt(16) + math.pi\nPYTHON\n\nresult = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::PYTHON,\n  code: python_code\n)\n\nputs \"Result: #{result[:result]}\"  # ~7.14\n</code></pre>"},{"location":"examples/eval/#3-shell-command-execution","title":"3. Shell Command Execution","text":"<p>Execute shell commands:</p> <pre><code>result = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::SHELL,\n  command: \"echo 'Hello from Shell!'\"\n)\n\nputs \"Output: #{result[:stdout].strip}\"\nputs \"Exit Status: #{result[:exit_status]}\"\n</code></pre> <p>Shell commands with pipes:</p> <pre><code>result = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::SHELL,\n  command: \"echo 'apple\\nbanana\\ncherry' | grep 'ban'\"\n)\n\nputs \"Output: #{result[:stdout].strip}\"  # banana\n</code></pre>"},{"location":"examples/eval/#authorization-control","title":"Authorization Control","text":"<p>By default, EvalTool requires user authorization for each execution. For automation, you can enable auto-execution:</p> <pre><code># Enable auto-execution (bypass authorization prompts)\nSharedTools.auto_execute(true)\n\n# Your code here\n\n# Restore default authorization behavior\nSharedTools.auto_execute(false)\n</code></pre> <p>Important: Always use <code>auto_execute(false)</code> in production for security.</p>"},{"location":"examples/eval/#error-handling","title":"Error Handling","text":"<p>The tool gracefully handles errors:</p> <pre><code>result = eval_tool.execute(\n  action: SharedTools::Tools::EvalTool::Action::RUBY,\n  code: \"1 / 0\"\n)\n\nputs \"Success: #{result[:success]}\"  # false\nputs \"Error: #{result[:error]}\"      # divided by 0 (ZeroDivisionError)\n</code></pre>"},{"location":"examples/eval/#using-individual-tools-directly","title":"Using Individual Tools Directly","text":"<p>You can also use individual eval tools directly for more control:</p> <pre><code>ruby_tool = SharedTools::Tools::Eval::RubyEvalTool.new\nresult = ruby_tool.execute(code: \"'Direct tool call'.upcase\")\n\nputs \"Result: #{result[:result]}\"  # DIRECT TOOL CALL\n</code></pre>"},{"location":"examples/eval/#practical-example-calculator","title":"Practical Example - Calculator","text":"<pre><code>expressions = [\n  \"10 + 5\",\n  \"20 - 8\",\n  \"6 * 7\",\n  \"100 / 4\"\n]\n\nexpressions.each do |expr|\n  result = eval_tool.execute(\n    action: SharedTools::Tools::EvalTool::Action::RUBY,\n    code: expr\n  )\n  puts \"#{expr} = #{result[:result]}\"\nend\n\n# Output:\n# 10 + 5 = 15\n# 20 - 8 = 12\n# 6 * 7 = 42\n# 100 / 4 = 25\n</code></pre>"},{"location":"examples/eval/#available-actions","title":"Available Actions","text":"<ul> <li><code>RUBY</code> - Evaluate Ruby code</li> <li><code>PYTHON</code> - Evaluate Python code (requires python3)</li> <li><code>SHELL</code> - Execute shell commands</li> </ul>"},{"location":"examples/eval/#result-structure","title":"Result Structure","text":""},{"location":"examples/eval/#ruby-results","title":"Ruby Results","text":"<pre><code>{\n  success: true/false,\n  result: &lt;evaluated result&gt;,\n  display: &lt;console output&gt;,\n  error: &lt;error message if failed&gt;\n}\n</code></pre>"},{"location":"examples/eval/#python-results","title":"Python Results","text":"<pre><code>{\n  success: true/false,\n  result: &lt;evaluated result&gt;,\n  python_type: &lt;type name&gt;,\n  display: &lt;console output&gt;,\n  error: &lt;error message if failed&gt;\n}\n</code></pre>"},{"location":"examples/eval/#shell-results","title":"Shell Results","text":"<pre><code>{\n  success: true/false,\n  stdout: &lt;standard output&gt;,\n  stderr: &lt;standard error&gt;,\n  exit_status: &lt;exit code&gt;\n}\n</code></pre>"},{"location":"examples/eval/#run-the-example","title":"Run the Example","text":"<pre><code>cd examples\nbundle exec ruby eval_tool_example.rb\n</code></pre> <p>The example demonstrates various code evaluation scenarios with auto-execution enabled for demonstration purposes.</p>"},{"location":"examples/eval/#related-documentation","title":"Related Documentation","text":"<ul> <li>EvalTool Documentation</li> <li>Authorization System</li> <li>Facade Pattern</li> </ul>"},{"location":"examples/eval/#security-notes","title":"Security Notes","text":"<ul> <li>Always use authorization in production (<code>auto_execute(false)</code>)</li> <li>Shell commands can be dangerous - validate inputs</li> <li>Python execution requires python3 to be installed</li> <li>Ruby code is evaluated in the current process context</li> <li>Each execution type has built-in error handling</li> </ul>"},{"location":"examples/eval/#key-takeaways","title":"Key Takeaways","text":"<ul> <li>EvalTool provides a unified interface for Ruby, Python, and Shell execution</li> <li>Each execution type has built-in safety with user authorization (when enabled)</li> <li>Results include success status, output, and error information</li> <li>Individual tools can be used directly for more control</li> <li>Always use <code>auto_execute(false)</code> in production for security</li> </ul>"},{"location":"examples/workflows/","title":"Multi-Tool Workflows","text":"<p>This guide demonstrates how to combine multiple SharedTools to create powerful, multi-step workflows. We'll break down the comprehensive workflow example to show patterns and best practices.</p>"},{"location":"examples/workflows/#overview","title":"Overview","text":"<p>The comprehensive_workflow_example.rb demonstrates a realistic scenario that many LLM applications face: collecting data from one source, processing it, and generating multiple output formats.</p>"},{"location":"examples/workflows/#the-workflow-web-scraping-to-database-to-reports","title":"The Workflow: Web Scraping to Database to Reports","text":"<p>This workflow consists of three distinct phases that demonstrate tool composition:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Web Scraping  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502 Database Storage \u2502\u2500\u2500\u2500\u2500\u25b6\u2502Report Generation\u2502\n\u2502  (BrowserTool)  \u2502     \u2502 (DatabaseTool)   \u2502     \u2502   (DiskTool)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"examples/workflows/#phase-1-web-scraping-with-browsertool","title":"Phase 1: Web Scraping with BrowserTool","text":""},{"location":"examples/workflows/#setting-up-the-browser","title":"Setting Up the Browser","text":"<p>The workflow starts by initializing a browser tool with a custom driver:</p> <pre><code># Mock browser driver for demonstration\nclass MockBrowserDriver\n  def goto(url:)\n    @current_url = url\n    \"Navigated to #{url}\"\n  end\n\n  def html\n    # Returns HTML content based on current URL\n    case @current_url\n    when /products/\n      # Return product catalog HTML\n    else\n      # Return default HTML\n    end\n  end\n\n  # Other required methods: click, fill_in, screenshot, close\nend\n\nbrowser_driver = MockBrowserDriver.new\nbrowser = SharedTools::Tools::BrowserTool.new(driver: browser_driver)\n</code></pre>"},{"location":"examples/workflows/#navigating-and-extracting-data","title":"Navigating and Extracting Data","text":"<pre><code># Navigate to the products page\nbrowser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::VISIT,\n  url: \"https://example.com/products\"\n)\n\n# Get the page HTML\nhtml_content = browser.execute(\n  action: SharedTools::Tools::BrowserTool::Action::PAGE_INSPECT,\n  full_html: true\n)\n\n# Parse HTML to extract structured data\nrequire 'nokogiri'\ndoc = Nokogiri::HTML(html_content)\nproducts = []\n\ndoc.css('.product').each do |product_node|\n  product = {\n    name: product_node.css('h2').text.strip,\n    price: product_node.css('.price').text.strip.gsub(/[$,]/, '').to_i,\n    category: product_node.css('.category').text.strip\n  }\n  products &lt;&lt; product\nend\n\nputs \"Found #{products.size} products\"\n</code></pre>"},{"location":"examples/workflows/#key-patterns-from-phase-1","title":"Key Patterns from Phase 1","text":"<ol> <li>Custom Drivers: The workflow uses a mock driver for testing, demonstrating the driver interface pattern</li> <li>Action Constants: Uses <code>BrowserTool::Action::VISIT</code> and <code>PAGE_INSPECT</code> for clarity</li> <li>External Parsers: Combines SharedTools with other Ruby gems (Nokogiri) for specialized tasks</li> <li>Structured Data: Transforms raw HTML into structured Ruby hashes for downstream processing</li> </ol>"},{"location":"examples/workflows/#phase-2-database-storage-with-databasetool","title":"Phase 2: Database Storage with DatabaseTool","text":""},{"location":"examples/workflows/#setting-up-the-database","title":"Setting Up the Database","text":"<pre><code># Simple SQLite driver implementation\nclass SimpleSqliteDriver &lt; SharedTools::Tools::Database::BaseDriver\n  def initialize(db:)\n    @db = db\n  end\n\n  def perform(statement:)\n    if statement.match?(/^\\s*SELECT/i)\n      rows = @db.execute(statement)\n      { status: :ok, result: rows }\n    else\n      @db.execute(statement)\n      { status: :ok, result: \"Success (#{@db.changes} rows)\" }\n    end\n  rescue SQLite3::Exception =&gt; e\n    { status: :error, result: e.message }\n  end\nend\n\n# Initialize database\ndb = SQLite3::Database.new(':memory:')\ndb_driver = SimpleSqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: db_driver)\n</code></pre>"},{"location":"examples/workflows/#creating-tables-and-inserting-data","title":"Creating Tables and Inserting Data","text":"<pre><code># Create the products table\ndatabase.execute(\n  statements: [\n    &lt;&lt;~SQL\n      CREATE TABLE products (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        price INTEGER NOT NULL,\n        category TEXT NOT NULL,\n        scraped_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    SQL\n  ]\n)\n\n# Insert all scraped products\ninsert_statements = products.map do |product|\n  \"INSERT INTO products (name, price, category) \" \\\n  \"VALUES ('#{product[:name]}', #{product[:price]}, '#{product[:category]}')\"\nend\n\nresults = database.execute(statements: insert_statements)\nputs \"Inserted #{results.size} products\"\n</code></pre>"},{"location":"examples/workflows/#generating-statistics","title":"Generating Statistics","text":"<pre><code># Run multiple queries for statistics\nstats_results = database.execute(\n  statements: [\n    \"SELECT COUNT(*) as total FROM products\",\n    \"SELECT category, COUNT(*) as count, AVG(price) as avg_price\n     FROM products GROUP BY category\",\n    \"SELECT MAX(price) as highest_price, MIN(price) as lowest_price\n     FROM products\"\n  ]\n)\n\n# Extract results\ntotal_products = stats_results[0][:result].first[0]\ncategory_stats = stats_results[1][:result]\nprice_range = stats_results[2][:result].first\n\nputs \"Total products: #{total_products}\"\ncategory_stats.each do |cat, count, avg|\n  puts \"- #{cat}: #{count} items, avg price: $#{avg.round(2)}\"\nend\n</code></pre>"},{"location":"examples/workflows/#key-patterns-from-phase-2","title":"Key Patterns from Phase 2","text":"<ol> <li>Custom Driver Implementation: Shows how to implement the BaseDriver interface</li> <li>Error Handling: The driver catches SQL exceptions and returns structured error responses</li> <li>Batch Operations: Executes multiple statements in sequence</li> <li>Status Checking: Each result includes a <code>:status</code> field (<code>:ok</code> or <code>:error</code>)</li> <li>Data Aggregation: Uses SQL for efficient data processing</li> </ol>"},{"location":"examples/workflows/#phase-3-report-generation-with-disktool","title":"Phase 3: Report Generation with DiskTool","text":""},{"location":"examples/workflows/#setting-up-file-system-access","title":"Setting Up File System Access","text":"<pre><code># Initialize disk tool with a temporary directory\ntemp_dir = Dir.mktmpdir('scraping_report')\ndisk = SharedTools::Tools::DiskTool.new(\n  driver: SharedTools::Tools::Disk::LocalDriver.new(root: temp_dir)\n)\n\n# Create reports directory\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::DIRECTORY_CREATE,\n  path: \"./reports\"\n)\n</code></pre>"},{"location":"examples/workflows/#generating-multiple-report-formats","title":"Generating Multiple Report Formats","text":""},{"location":"examples/workflows/#markdown-report","title":"Markdown Report","text":"<pre><code># Build report content\nreport_content = &lt;&lt;~REPORT\n  # Product Scraping Report\n\n  Generated: #{Time.now.strftime('%Y-%m-%d %H:%M:%S')}\n\n  ## Summary\n\n  - Total Products: #{total_products}\n  - Price Range: $#{price_range[1]} - $#{price_range[0]}\n\n  ## Products by Category\nREPORT\n\ncategory_stats.each do |cat, count, avg|\n  report_content += \"\\n### #{cat} (#{count} items, avg: $#{avg.round(2)})\\n\\n\"\n\n  # Query products for this category\n  cat_products = database.execute(\n    statements: [\"SELECT name, price FROM products\n                  WHERE category = '#{cat}' ORDER BY price DESC\"]\n  ).first[:result]\n\n  cat_products.each do |name, price|\n    report_content += \"- #{name}: $#{price}\\n\"\n  end\nend\n\n# Save Markdown report\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n  path: \"./reports/product_report.md\"\n)\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n  path: \"./reports/product_report.md\",\n  text: report_content\n)\n</code></pre>"},{"location":"examples/workflows/#json-export","title":"JSON Export","text":"<pre><code>require 'json'\n\njson_data = {\n  generated_at: Time.now.iso8601,\n  summary: {\n    total_products: total_products,\n    price_range: { min: price_range[1], max: price_range[0] }\n  },\n  products: products\n}\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n  path: \"./reports/products.json\"\n)\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n  path: \"./reports/products.json\",\n  text: JSON.pretty_generate(json_data)\n)\n</code></pre>"},{"location":"examples/workflows/#csv-export","title":"CSV Export","text":"<pre><code>csv_content = \"Name,Price,Category\\n\"\nproducts.each do |p|\n  csv_content += \"#{p[:name]},#{p[:price]},#{p[:category]}\\n\"\nend\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_CREATE,\n  path: \"./reports/products.csv\"\n)\n\ndisk.execute(\n  action: SharedTools::Tools::DiskTool::Action::FILE_WRITE,\n  path: \"./reports/products.csv\",\n  text: csv_content\n)\n</code></pre>"},{"location":"examples/workflows/#key-patterns-from-phase-3","title":"Key Patterns from Phase 3","text":"<ol> <li>Multiple Output Formats: Generates reports in Markdown, JSON, and CSV</li> <li>Temporary Directories: Uses Ruby's <code>Dir.mktmpdir</code> for safe temporary storage</li> <li>Structured Output: Organizes files in a dedicated reports directory</li> <li>Content Generation: Builds complex reports by combining database queries with templates</li> <li>Action Separation: Uses separate <code>FILE_CREATE</code> and <code>FILE_WRITE</code> actions for clarity</li> </ol>"},{"location":"examples/workflows/#cross-phase-patterns","title":"Cross-Phase Patterns","text":""},{"location":"examples/workflows/#data-flow","title":"Data Flow","text":"<p>Data flows naturally from one phase to the next:</p> <pre><code># Phase 1: Extract\nproducts = scrape_products(browser)\n\n# Phase 2: Transform &amp; Store\nstore_in_database(database, products)\nstats = calculate_statistics(database)\n\n# Phase 3: Output\ngenerate_reports(disk, database, products, stats)\n</code></pre>"},{"location":"examples/workflows/#error-handling-across-phases","title":"Error Handling Across Phases","text":"<pre><code>def workflow\n  browser = nil\n  database = nil\n\n  begin\n    # Phase 1\n    browser = initialize_browser\n    products = scrape_products(browser)\n    raise \"No products found\" if products.empty?\n\n    # Phase 2\n    database = initialize_database\n    results = store_products(database, products)\n    failed = results.select { |r| r[:status] == :error }\n    raise \"Database errors: #{failed}\" unless failed.empty?\n\n    # Phase 3\n    disk = initialize_disk\n    generate_reports(disk, database, products)\n\n  rescue =&gt; e\n    puts \"Workflow failed: #{e.message}\"\n    # Cleanup or rollback as needed\n  ensure\n    browser&amp;.cleanup!\n    database&amp;.close\n  end\nend\n</code></pre>"},{"location":"examples/workflows/#resource-management","title":"Resource Management","text":"<pre><code># Always cleanup resources\nbegin\n  browser = SharedTools::Tools::BrowserTool.new(driver: browser_driver)\n  database = SharedTools::Tools::DatabaseTool.new(driver: db_driver)\n\n  # Use tools...\n\nensure\n  browser&amp;.cleanup!\n  db&amp;.close\nend\n</code></pre>"},{"location":"examples/workflows/#advanced-workflow-patterns","title":"Advanced Workflow Patterns","text":""},{"location":"examples/workflows/#parallel-processing","title":"Parallel Processing","text":"<p>When operations don't depend on each other:</p> <pre><code># Scrape multiple pages concurrently\nrequire 'concurrent'\n\nurls = [\"https://example.com/page1\", \"https://example.com/page2\"]\npromises = urls.map do |url|\n  Concurrent::Promise.execute do\n    browser = SharedTools::Tools::BrowserTool.new\n    browser.execute(action: \"visit\", url: url)\n    browser.execute(action: \"page_inspect\", full_html: true)\n  end\nend\n\nresults = promises.map(&amp;:value)\n</code></pre>"},{"location":"examples/workflows/#incremental-processing","title":"Incremental Processing","text":"<p>For large datasets, process in chunks:</p> <pre><code># Process products in batches\nproducts.each_slice(100) do |batch|\n  insert_statements = batch.map { |p| generate_insert_sql(p) }\n  database.execute(statements: insert_statements)\n  puts \"Processed batch of #{batch.size}\"\nend\n</code></pre>"},{"location":"examples/workflows/#conditional-workflows","title":"Conditional Workflows","text":"<p>Adjust workflow based on results:</p> <pre><code># Conditional report generation\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\nproducts = parse_products(html)\n\nif products.size &gt; 100\n  # Generate full report with all formats\n  generate_full_report(disk, products)\nelsif products.size &gt; 0\n  # Generate summary only\n  generate_summary_report(disk, products)\nelse\n  # Just log that nothing was found\n  puts \"No products to report\"\nend\n</code></pre>"},{"location":"examples/workflows/#tool-chaining","title":"Tool Chaining","text":"<p>Create higher-level abstractions:</p> <pre><code>class ScrapingPipeline\n  def initialize(browser:, database:, disk:)\n    @browser = browser\n    @database = database\n    @disk = disk\n  end\n\n  def execute(url:)\n    # Phase 1: Scrape\n    products = scrape_from_url(url)\n\n    # Phase 2: Store\n    store_products(products)\n\n    # Phase 3: Report\n    generate_reports(products)\n  end\n\n  private\n\n  def scrape_from_url(url)\n    @browser.execute(action: \"visit\", url: url)\n    html = @browser.execute(action: \"page_inspect\", full_html: true)\n    parse_products(html)\n  end\n\n  # ... other methods\nend\n\n# Usage\npipeline = ScrapingPipeline.new(browser: browser, database: db, disk: disk)\npipeline.execute(url: \"https://example.com/products\")\n</code></pre>"},{"location":"examples/workflows/#testing-workflows","title":"Testing Workflows","text":""},{"location":"examples/workflows/#using-mock-drivers","title":"Using Mock Drivers","text":"<p>The example demonstrates using mock drivers for testing:</p> <pre><code>class MockBrowserDriver\n  def initialize(responses: {})\n    @responses = responses\n  end\n\n  def html\n    @responses[@current_url] || default_html\n  end\nend\n\n# In tests\nresponses = {\n  \"https://test.com/products\" =&gt; \"&lt;html&gt;...&lt;/html&gt;\"\n}\ndriver = MockBrowserDriver.new(responses: responses)\nbrowser = SharedTools::Tools::BrowserTool.new(driver: driver)\n</code></pre>"},{"location":"examples/workflows/#integration-testing","title":"Integration Testing","text":"<p>Test the complete workflow:</p> <pre><code>def test_complete_workflow\n  # Setup\n  browser = create_test_browser\n  database = create_test_database\n  disk = create_test_disk\n\n  # Execute\n  products = workflow_phase1(browser)\n  workflow_phase2(database, products)\n  workflow_phase3(disk, database)\n\n  # Verify\n  assert File.exist?(temp_dir + \"/reports/product_report.md\")\n  assert_equal expected_products, products\nend\n</code></pre>"},{"location":"examples/workflows/#performance-considerations","title":"Performance Considerations","text":""},{"location":"examples/workflows/#database-connection-pooling","title":"Database Connection Pooling","text":"<pre><code># Reuse database connections\nclass WorkflowExecutor\n  def initialize\n    @db_pool = ConnectionPool.new(size: 5) do\n      SQLite3::Database.new('products.db')\n    end\n  end\n\n  def execute\n    @db_pool.with do |db|\n      driver = SimpleSqliteDriver.new(db: db)\n      database = SharedTools::Tools::DatabaseTool.new(driver: driver)\n      # Use database...\n    end\n  end\nend\n</code></pre>"},{"location":"examples/workflows/#caching-browser-sessions","title":"Caching Browser Sessions","text":"<pre><code># Reuse browser instances\n@browser_cache ||= {}\n\ndef get_browser(profile:)\n  @browser_cache[profile] ||= begin\n    driver = Browser::WatirDriver.new(profile: profile)\n    SharedTools::Tools::BrowserTool.new(driver: driver)\n  end\nend\n</code></pre>"},{"location":"examples/workflows/#real-world-variations","title":"Real-World Variations","text":""},{"location":"examples/workflows/#e-commerce-price-monitoring","title":"E-commerce Price Monitoring","text":"<pre><code># Daily price check workflow\nbrowser.execute(action: \"visit\", url: competitor_url)\nprices = extract_prices(browser)\ndatabase.execute(statements: [\n  \"INSERT INTO price_history (product_id, price, date) VALUES (...)\"\n])\ngenerate_price_alert_if_changed(disk, database)\n</code></pre>"},{"location":"examples/workflows/#content-aggregation","title":"Content Aggregation","text":"<pre><code># Aggregate content from multiple sources\nsources.each do |source|\n  browser.execute(action: \"visit\", url: source[:url])\n  articles = extract_articles(browser)\n  database.execute(statements: generate_inserts(articles))\nend\ngenerate_daily_digest(disk, database)\n</code></pre>"},{"location":"examples/workflows/#data-migration","title":"Data Migration","text":"<pre><code># Migrate data between systems\nold_data = database.execute(statements: [\"SELECT * FROM legacy_table\"])\ntransformed = transform_data(old_data)\nnew_database.execute(statements: generate_inserts(transformed))\ndisk.execute(action: \"file_write\", path: \"./migration_log.txt\", text: log)\n</code></pre>"},{"location":"examples/workflows/#next-steps","title":"Next Steps","text":"<ul> <li>Explore individual Tool Examples</li> <li>Learn about Error Handling Patterns</li> <li>Read the API Reference for detailed parameter information</li> <li>Check out Testing Strategies for workflow testing</li> </ul>"},{"location":"getting-started/basic-usage/","title":"Basic Usage","text":"<p>Learn the fundamental patterns for using SharedTools effectively.</p>"},{"location":"getting-started/basic-usage/#tool-architecture","title":"Tool Architecture","text":"<p>All SharedTools follow a consistent pattern:</p> <ol> <li>Inherit from RubyLLM::Tool - Compatible with RubyLLM framework</li> <li>Facade pattern - Single tool, multiple actions</li> <li>Driver-based - Pluggable implementations</li> <li>Authorization-aware - Safety controls built-in</li> </ol>"},{"location":"getting-started/basic-usage/#tool-lifecycle","title":"Tool Lifecycle","text":""},{"location":"getting-started/basic-usage/#basic-pattern","title":"Basic Pattern","text":"<pre><code># 1. Initialize tool\ntool = SharedTools::Tools::SomeTool.new\n\n# 2. Execute actions\nresult = tool.execute(action: \"some_action\", param: \"value\")\n\n# 3. Clean up (if needed)\ntool.cleanup! if tool.respond_to?(:cleanup!)\n</code></pre>"},{"location":"getting-started/basic-usage/#with-custom-configuration","title":"With Custom Configuration","text":"<pre><code># Initialize with custom logger\nrequire 'logger'\n\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::DEBUG\n\ntool = SharedTools::Tools::SomeTool.new(logger: logger)\n</code></pre>"},{"location":"getting-started/basic-usage/#with-custom-driver","title":"With Custom Driver","text":"<pre><code># Use custom driver implementation\ndriver = MyCustomDriver.new(config: options)\ntool = SharedTools::Tools::SomeTool.new(driver: driver)\n</code></pre>"},{"location":"getting-started/basic-usage/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/basic-usage/#pattern-1-file-operations-with-safety","title":"Pattern 1: File Operations with Safety","text":"<pre><code>require 'shared_tools'\nrequire 'tmpdir'\n\n# Create sandboxed disk tool\nDir.mktmpdir do |tmpdir|\n  disk = SharedTools::Tools::DiskTool.new(\n    driver: SharedTools::Tools::Disk::LocalDriver.new(root: tmpdir)\n  )\n\n  # All operations are restricted to tmpdir\n  disk.execute(action: \"file_create\", path: \"./data.txt\")\n  disk.execute(action: \"file_write\", path: \"./data.txt\", text: \"content\")\n\n  # This would raise SecurityError (path traversal attempt)\n  begin\n    disk.execute(action: \"file_read\", path: \"../../etc/passwd\")\n  rescue SecurityError =&gt; e\n    puts \"Security check passed: #{e.message}\"\n  end\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#pattern-2-browser-automation-with-error-handling","title":"Pattern 2: Browser Automation with Error Handling","text":"<pre><code>browser = SharedTools::Tools::BrowserTool.new\n\nbegin\n  # Navigate to page\n  browser.execute(action: \"visit\", url: \"https://example.com/login\")\n\n  # Wait and check if element exists\n  elements = browser.execute(\n    action: \"ui_inspect\",\n    text_content: \"Sign In\"\n  )\n\n  if elements.empty?\n    puts \"Login button not found\"\n  else\n    # Fill form\n    browser.execute(\n      action: \"text_field_set\",\n      selector: \"#username\",\n      value: \"user@example.com\"\n    )\n\n    browser.execute(\n      action: \"text_field_set\",\n      selector: \"#password\",\n      value: \"password123\"\n    )\n\n    # Submit\n    browser.execute(\n      action: \"click\",\n      selector: \"button[type='submit']\"\n    )\n  end\nrescue StandardError =&gt; e\n  puts \"Browser error: #{e.message}\"\nensure\n  browser.cleanup!\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#pattern-3-database-operations-with-transactions","title":"Pattern 3: Database Operations with Transactions","text":"<pre><code>require 'sqlite3'\n\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Execute multiple statements\n# Stops on first error\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE products (id INTEGER PRIMARY KEY, name TEXT, price REAL)\",\n    \"INSERT INTO products (name, price) VALUES ('Widget', 9.99)\",\n    \"INSERT INTO products (name, price) VALUES ('Gadget', 19.99)\",\n    \"SELECT * FROM products WHERE price &gt; 10.0\"\n  ]\n)\n\n# Check each result\nresults.each do |result|\n  if result[:status] == :ok\n    puts \"Success: #{result[:statement]}\"\n    puts \"Result: #{result[:result]}\"\n  else\n    puts \"Error: #{result[:statement]}\"\n    puts \"Message: #{result[:result]}\"\n  end\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#pattern-4-code-evaluation-with-authorization","title":"Pattern 4: Code Evaluation with Authorization","text":"<pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\n# For interactive scripts, leave authorization enabled\n# User will be prompted before execution\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"ls -la /tmp\"\n)\n\n# For automated scripts, disable authorization\nSharedTools.auto_execute(true)\n\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: \"Time.now.to_i\"\n)\n\n# Re-enable authorization for safety\nSharedTools.auto_execute(false)\n</code></pre>"},{"location":"getting-started/basic-usage/#pattern-5-multi-tool-workflows","title":"Pattern 5: Multi-Tool Workflows","text":"<pre><code># Web scraping to database workflow\nbrowser = SharedTools::Tools::BrowserTool.new\ndisk = SharedTools::Tools::DiskTool.new\neval_tool = SharedTools::Tools::EvalTool.new\n\nbegin\n  # 1. Scrape data\n  browser.execute(action: \"visit\", url: \"https://example.com/data\")\n  html = browser.execute(action: \"page_inspect\", full_html: true)\n\n  # 2. Parse with Ruby\n  parsed_data = eval_tool.execute(\n    action: \"ruby\",\n    code: &lt;&lt;~RUBY\n      require 'nokogiri'\n      doc = Nokogiri::HTML('#{html}')\n      doc.css('.data-item').map { |item| item.text.strip }\n    RUBY\n  )\n\n  # 3. Save to file\n  disk.execute(action: \"file_create\", path: \"./scraped_data.txt\")\n  disk.execute(\n    action: \"file_write\",\n    path: \"./scraped_data.txt\",\n    text: parsed_data.to_s\n  )\n\n  puts \"Data saved successfully!\"\nensure\n  browser.cleanup!\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#action-based-interface","title":"Action-Based Interface","text":"<p>All tools use an action-based interface where you specify the action and its parameters:</p> <pre><code>tool.execute(\n  action: \"action_name\",\n  param1: \"value1\",\n  param2: \"value2\"\n)\n</code></pre>"},{"location":"getting-started/basic-usage/#disktool-actions","title":"DiskTool Actions","text":"<pre><code>disk = SharedTools::Tools::DiskTool.new\n\n# Directory operations\ndisk.execute(action: \"directory_create\", path: \"./mydir\")\ndisk.execute(action: \"directory_list\", path: \"./mydir\")\ndisk.execute(action: \"directory_move\", path: \"./mydir\", destination: \"./newdir\")\ndisk.execute(action: \"directory_delete\", path: \"./newdir\")\n\n# File operations\ndisk.execute(action: \"file_create\", path: \"./file.txt\")\ndisk.execute(action: \"file_write\", path: \"./file.txt\", text: \"content\")\ndisk.execute(action: \"file_read\", path: \"./file.txt\")\ndisk.execute(action: \"file_replace\", path: \"./file.txt\", old_text: \"old\", new_text: \"new\")\ndisk.execute(action: \"file_move\", path: \"./file.txt\", destination: \"./moved.txt\")\ndisk.execute(action: \"file_delete\", path: \"./moved.txt\")\n</code></pre>"},{"location":"getting-started/basic-usage/#browsertool-actions","title":"BrowserTool Actions","text":"<pre><code>browser = SharedTools::Tools::BrowserTool.new\n\nbrowser.execute(action: \"visit\", url: \"https://example.com\")\nbrowser.execute(action: \"page_inspect\")  # Summary\nbrowser.execute(action: \"page_inspect\", full_html: true)  # Full HTML\nbrowser.execute(action: \"ui_inspect\", text_content: \"Search\")\nbrowser.execute(action: \"selector_inspect\", selector: \".nav-item\")\nbrowser.execute(action: \"click\", selector: \"button.submit\")\nbrowser.execute(action: \"text_field_set\", selector: \"#search\", value: \"query\")\nbrowser.execute(action: \"screenshot\")\n</code></pre>"},{"location":"getting-started/basic-usage/#evaltool-actions","title":"EvalTool Actions","text":"<pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\neval_tool.execute(action: \"ruby\", code: \"1 + 1\")\neval_tool.execute(action: \"python\", code: \"print('Hello')\")\neval_tool.execute(action: \"shell\", command: \"echo 'Hello'\")\n</code></pre>"},{"location":"getting-started/basic-usage/#doctool-actions","title":"DocTool Actions","text":"<pre><code>doc = SharedTools::Tools::DocTool.new\n\ndoc.execute(action: \"pdf_read\", doc_path: \"./file.pdf\", page_numbers: \"1\")\ndoc.execute(action: \"pdf_read\", doc_path: \"./file.pdf\", page_numbers: \"1-5\")\ndoc.execute(action: \"pdf_read\", doc_path: \"./file.pdf\", page_numbers: \"1, 3, 5-10\")\n</code></pre>"},{"location":"getting-started/basic-usage/#logging","title":"Logging","text":"<p>All tools support custom loggers:</p> <pre><code>require 'logger'\n\n# Create custom logger\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::INFO\nlogger.formatter = proc { |severity, datetime, progname, msg|\n  \"#{datetime.strftime('%Y-%m-%d %H:%M:%S')} [#{severity}] #{msg}\\n\"\n}\n\n# Use with tools\ndisk = SharedTools::Tools::DiskTool.new(logger: logger)\ndisk.execute(action: \"file_read\", path: \"./test.txt\")\n# Output: 2025-10-25 10:30:00 [INFO] action=\"file_read\" path=\"./test.txt\"\n</code></pre>"},{"location":"getting-started/basic-usage/#error-handling","title":"Error Handling","text":"<p>Tools raise standard Ruby exceptions:</p> <pre><code>disk = SharedTools::Tools::DiskTool.new\n\n# Handle file not found\nbegin\n  disk.execute(action: \"file_read\", path: \"./missing.txt\")\nrescue Errno::ENOENT =&gt; e\n  puts \"File not found: #{e.message}\"\nend\n\n# Handle security errors\nbegin\n  disk.execute(action: \"file_read\", path: \"../../../etc/passwd\")\nrescue SecurityError =&gt; e\n  puts \"Security violation: #{e.message}\"\nend\n\n# Handle parameter errors\nbegin\n  disk.execute(action: \"file_write\", path: \"./test.txt\")  # Missing 'text'\nrescue ArgumentError =&gt; e\n  puts \"Invalid arguments: #{e.message}\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#best-practices","title":"Best Practices","text":""},{"location":"getting-started/basic-usage/#1-always-clean-up-resources","title":"1. Always Clean Up Resources","text":"<pre><code>browser = SharedTools::Tools::BrowserTool.new\nbegin\n  # Do work...\nensure\n  browser.cleanup!  # Always close browser\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#2-use-sandboxed-directories","title":"2. Use Sandboxed Directories","text":"<pre><code>require 'tmpdir'\n\n# Operations are restricted to tmpdir\nDir.mktmpdir do |tmpdir|\n  disk = SharedTools::Tools::DiskTool.new(\n    driver: SharedTools::Tools::Disk::LocalDriver.new(root: tmpdir)\n  )\n  # Safe operations here\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#3-enable-authorization-for-interactive-scripts","title":"3. Enable Authorization for Interactive Scripts","text":"<pre><code># Keep authorization enabled\n# SharedTools.auto_execute(false)  # This is the default\n\n# User will approve each dangerous operation\neval_tool.execute(action: \"shell\", command: \"rm file.txt\")\n</code></pre>"},{"location":"getting-started/basic-usage/#4-validate-inputs","title":"4. Validate Inputs","text":"<pre><code># Check file exists before reading\nif File.exist?(path)\n  content = disk.execute(action: \"file_read\", path: path)\nelse\n  puts \"File not found: #{path}\"\nend\n</code></pre>"},{"location":"getting-started/basic-usage/#5-use-structured-logging","title":"5. Use Structured Logging","text":"<pre><code>logger = Logger.new(STDOUT)\nlogger.level = Logger::INFO\n\ndisk = SharedTools::Tools::DiskTool.new(logger: logger)\n# Operations are automatically logged with context\n</code></pre>"},{"location":"getting-started/basic-usage/#next-steps","title":"Next Steps","text":"<ul> <li>Tools Overview - Explore all available tools</li> <li>Authorization Guide - Master the authorization system</li> <li>Working with Drivers - Create custom drivers</li> <li>Examples - View complete examples</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Ruby &gt;= 3.3.0</li> <li>Bundler (recommended)</li> </ul>"},{"location":"getting-started/installation/#basic-installation","title":"Basic Installation","text":"<p>Add SharedTools to your Gemfile:</p> <pre><code>gem 'shared_tools'\n</code></pre> <p>Then install:</p> <pre><code>bundle install\n</code></pre> <p>Or install directly:</p> <pre><code>gem install shared_tools\n</code></pre>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<p>SharedTools has the following core dependencies that are automatically installed:</p> <ul> <li><code>ruby_llm</code> - Ruby LLM framework for tool integration</li> <li><code>zeitwerk</code> - Code autoloading</li> <li><code>nokogiri</code> - HTML/XML parsing</li> </ul>"},{"location":"getting-started/installation/#optional-dependencies","title":"Optional Dependencies","text":"<p>Depending on which tools you plan to use, you may need additional gems:</p>"},{"location":"getting-started/installation/#browser-automation","title":"Browser Automation","text":"<p>For the <code>BrowserTool</code>:</p> <pre><code>gem 'watir'\n</code></pre> <p>Watir also requires a browser driver (Chrome, Firefox, etc.). Install ChromeDriver:</p> <pre><code># macOS\nbrew install --cask chromedriver\n\n# Ubuntu/Debian\napt-get install chromium-chromedriver\n</code></pre>"},{"location":"getting-started/installation/#database-operations","title":"Database Operations","text":"<p>For the <code>DatabaseTool</code>:</p> <pre><code># SQLite\ngem 'sqlite3'\n\n# PostgreSQL\ngem 'pg'\n</code></pre>"},{"location":"getting-started/installation/#document-processing","title":"Document Processing","text":"<p>For the <code>DocTool</code>:</p> <pre><code>gem 'pdf-reader', '~&gt; 2.0'\n</code></pre>"},{"location":"getting-started/installation/#code-evaluation","title":"Code Evaluation","text":"<p>The <code>EvalTool</code> requires:</p> <ul> <li>Ruby (already installed)</li> <li>Python 3 (for Python evaluation)</li> <li>Shell access (for shell commands)</li> </ul> <p>Install Python 3:</p> <pre><code># macOS\nbrew install python3\n\n# Ubuntu/Debian\napt-get install python3\n</code></pre>"},{"location":"getting-started/installation/#complete-setup-example","title":"Complete Setup Example","text":"<p>For a full-featured installation with all optional dependencies:</p> <pre><code># Gemfile\ngem 'shared_tools'\ngem 'watir'            # Browser automation\ngem 'sqlite3'          # SQLite database\ngem 'pg'               # PostgreSQL database\ngem 'pdf-reader'       # PDF processing\n</code></pre> <p>Then run:</p> <pre><code>bundle install\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Create a test script to verify SharedTools is installed correctly:</p> <pre><code># test_install.rb\nrequire 'shared_tools'\n\nputs \"SharedTools version: #{SharedTools::VERSION}\"\nputs \"RubyLLM detected: #{defined?(RubyLLM::Tool) ? 'Yes' : 'No'}\"\n\n# Test basic tool initialization\ndisk = SharedTools::Tools::DiskTool.new\nputs \"DiskTool initialized successfully!\"\n</code></pre> <p>Run it:</p> <pre><code>ruby test_install.rb\n</code></pre> <p>Expected output:</p> <pre><code>SharedTools version: 0.5.1\nRubyLLM detected: Yes\nDiskTool initialized successfully!\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#zeitwerk-errors","title":"Zeitwerk Errors","text":"<p>If you see autoloading errors, ensure you're using Ruby &gt;= 3.3.0:</p> <pre><code>ruby --version\n</code></pre>"},{"location":"getting-started/installation/#missing-browser-driver","title":"Missing Browser Driver","text":"<p>If BrowserTool fails with \"browser not found\":</p> <ol> <li>Install a browser (Chrome, Firefox)</li> <li>Install the corresponding driver (chromedriver, geckodriver)</li> <li>Ensure the driver is in your PATH</li> </ol>"},{"location":"getting-started/installation/#sqlite3-compilation-issues","title":"SQLite3 Compilation Issues","text":"<p>On macOS, if <code>sqlite3</code> gem fails to install:</p> <pre><code>gem install sqlite3 -- --with-sqlite3-include=/usr/local/opt/sqlite/include \\\n                        --with-sqlite3-lib=/usr/local/opt/sqlite/lib\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quickstart Guide - Get started in 5 minutes</li> <li>Basic Usage - Learn the fundamentals</li> <li>Tools Overview - Explore available tools</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quickstart Guide","text":"<p>Get up and running with SharedTools in 5 minutes.</p>"},{"location":"getting-started/quickstart/#installation","title":"Installation","text":"<pre><code>gem install shared_tools\n</code></pre>"},{"location":"getting-started/quickstart/#your-first-script","title":"Your First Script","text":"<p>Create a file called <code>hello_tools.rb</code>:</p> <pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\n# 1. File Operations\nputs \"=== File Operations ===\"\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create and write a file\ndisk.execute(action: \"file_create\", path: \"./hello.txt\")\ndisk.execute(\n  action: \"file_write\",\n  path: \"./hello.txt\",\n  text: \"Hello from SharedTools!\"\n)\n\n# Read it back\ncontent = disk.execute(action: \"file_read\", path: \"./hello.txt\")\nputs \"File contents: #{content}\"\n\n# Clean up\ndisk.execute(action: \"file_delete\", path: \"./hello.txt\")\nputs \"File deleted!\"\n</code></pre> <p>Run it:</p> <pre><code>ruby hello_tools.rb\n</code></pre>"},{"location":"getting-started/quickstart/#tool-examples","title":"Tool Examples","text":""},{"location":"getting-started/quickstart/#disktool-file-management","title":"DiskTool - File Management","text":"<pre><code>disk = SharedTools::Tools::DiskTool.new\n\n# Create directory\ndisk.execute(action: \"directory_create\", path: \"./my_project\")\n\n# List contents\nlisting = disk.execute(action: \"directory_list\", path: \".\")\nputs listing\n\n# Move file\ndisk.execute(\n  action: \"file_move\",\n  path: \"./old.txt\",\n  destination: \"./my_project/new.txt\"\n)\n</code></pre>"},{"location":"getting-started/quickstart/#evaltool-code-execution","title":"EvalTool - Code Execution","text":"<pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\n# Execute Ruby\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: \"[1, 2, 3, 4, 5].sum\"\n)\nputs \"Sum: #{result}\"  # =&gt; 15\n\n# Execute Python\nresult = eval_tool.execute(\n  action: \"python\",\n  code: \"print('Hello from Python')\"\n)\n\n# Execute shell command\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"ls -la\"\n)\n</code></pre>"},{"location":"getting-started/quickstart/#doctool-pdf-reading","title":"DocTool - PDF Reading","text":"<pre><code>doc = SharedTools::Tools::DocTool.new\n\n# Read specific pages\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./document.pdf\",\n  page_numbers: \"1, 3-5\"\n)\n\nputs result[:pages]  # Array of page content\n</code></pre>"},{"location":"getting-started/quickstart/#browsertool-web-automation","title":"BrowserTool - Web Automation","text":"<p>Requires watir gem</p> <p>Install with: <code>gem install watir</code></p> <pre><code>browser = SharedTools::Tools::BrowserTool.new\n\n# Visit website\nbrowser.execute(\n  action: \"visit\",\n  url: \"https://example.com\"\n)\n\n# Find button by text\nelements = browser.execute(\n  action: \"ui_inspect\",\n  text_content: \"Login\"\n)\n\n# Click using selector\nbrowser.execute(\n  action: \"click\",\n  selector: \"button[type='submit']\"\n)\n\n# Take screenshot\nscreenshot_data = browser.execute(action: \"screenshot\")\n\n# Clean up\nbrowser.cleanup!\n</code></pre>"},{"location":"getting-started/quickstart/#databasetool-sql-operations","title":"DatabaseTool - SQL Operations","text":"<p>Requires database gem</p> <p>Install with: <code>gem install sqlite3</code> or <code>gem install pg</code></p> <pre><code>require 'sqlite3'\n\n# Initialize database and driver\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Execute SQL statements\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)\",\n    \"INSERT INTO users (name) VALUES ('Alice')\",\n    \"INSERT INTO users (name) VALUES ('Bob')\",\n    \"SELECT * FROM users\"\n  ]\n)\n\n# Check results\nresults.each do |result|\n  puts \"Status: #{result[:status]}\"\n  puts \"Result: #{result[:result]}\"\nend\n</code></pre>"},{"location":"getting-started/quickstart/#authorization-system","title":"Authorization System","text":"<p>By default, SharedTools requires confirmation for potentially dangerous operations:</p> <pre><code># This will prompt the user\neval_tool = SharedTools::Tools::EvalTool.new\neval_tool.execute(action: \"shell\", command: \"rm important_file.txt\")\n# Output:\n# The AI (tool: eval_tool) wants to do the following ...\n# ==========================================\n# rm important_file.txt\n# ==========================================\n# Is it okay to proceed? (y/N)\n</code></pre> <p>Disable authorization for automated scripts:</p> <pre><code># Enable auto-execute mode (use with caution!)\nSharedTools.auto_execute(true)\n\n# Now operations run without confirmation\neval_tool.execute(action: \"shell\", command: \"echo 'No prompt!'\")\n</code></pre>"},{"location":"getting-started/quickstart/#complete-example","title":"Complete Example","text":"<p>Here's a practical example that combines multiple tools:</p> <pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\n# Create a simple data processor\ndisk = SharedTools::Tools::DiskTool.new\neval_tool = SharedTools::Tools::EvalTool.new\n\n# 1. Create data file\ndisk.execute(action: \"file_create\", path: \"./numbers.txt\")\ndisk.execute(\n  action: \"file_write\",\n  path: \"./numbers.txt\",\n  text: \"1\\n2\\n3\\n4\\n5\\n\"\n)\n\n# 2. Read and process data\ncontent = disk.execute(action: \"file_read\", path: \"./numbers.txt\")\n\n# 3. Calculate sum using Ruby\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: \"'#{content}'.split.map(&amp;:to_i).sum\"\n)\n\nputs \"Sum of numbers: #{result}\"\n\n# 4. Save result\ndisk.execute(\n  action: \"file_write\",\n  path: \"./result.txt\",\n  text: \"The sum is: #{result}\"\n)\n\n# 5. Clean up\ndisk.execute(action: \"file_delete\", path: \"./numbers.txt\")\ndisk.execute(action: \"file_delete\", path: \"./result.txt\")\n\nputs \"Done!\"\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Basic Usage - Learn more patterns and best practices</li> <li>Tools Documentation - Detailed reference for each tool</li> <li>Authorization Guide - Control operation approval</li> <li>Working with Drivers - Extend tools with custom drivers</li> </ul>"},{"location":"getting-started/quickstart/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/quickstart/#error-handling","title":"Error Handling","text":"<pre><code>begin\n  disk.execute(action: \"file_read\", path: \"./missing.txt\")\nrescue Errno::ENOENT =&gt; e\n  puts \"File not found: #{e.message}\"\nend\n</code></pre>"},{"location":"getting-started/quickstart/#resource-cleanup","title":"Resource Cleanup","text":"<pre><code># Always clean up browser resources\nbrowser = SharedTools::Tools::BrowserTool.new\nbegin\n  browser.execute(action: \"visit\", url: \"https://example.com\")\n  # ... do work ...\nensure\n  browser.cleanup!\nend\n</code></pre>"},{"location":"getting-started/quickstart/#working-with-temporary-directories","title":"Working with Temporary Directories","text":"<pre><code>require 'tmpdir'\n\nDir.mktmpdir do |tmpdir|\n  disk = SharedTools::Tools::DiskTool.new(\n    driver: SharedTools::Tools::Disk::LocalDriver.new(root: tmpdir)\n  )\n\n  # All operations are sandboxed to tmpdir\n  disk.execute(action: \"file_create\", path: \"./test.txt\")\n\n  # tmpdir is automatically cleaned up\nend\n</code></pre>"},{"location":"guides/","title":"Guides","text":"<p>In-depth guides for advanced SharedTools usage.</p>"},{"location":"guides/#available-guides","title":"Available Guides","text":""},{"location":"guides/#authorization-system","title":"Authorization System","text":"<p>Learn how to control when operations require user approval.</p> <p>Topics Covered:</p> <ul> <li>Understanding the authorization system</li> <li>Default behavior (human-in-the-loop)</li> <li>Disabling authorization for automation</li> <li>Best practices for security</li> <li>Custom authorization logic</li> </ul> <p>Example:</p> <pre><code># Require approval for dangerous operations\neval_tool.execute(action: \"shell\", command: \"rm file.txt\")\n# Prompts: \"Is it okay to proceed? (y/N)\"\n\n# Disable for automation\nSharedTools.auto_execute(true)\n</code></pre> <p>Read Authorization Guide \u2192</p>"},{"location":"guides/#working-with-drivers","title":"Working with Drivers","text":"<p>Understand the driver architecture and create custom implementations.</p> <p>Topics Covered:</p> <ul> <li>Driver architecture overview</li> <li>Built-in drivers</li> <li>Creating custom drivers</li> <li>Driver interfaces</li> <li>Testing drivers</li> </ul> <p>Example:</p> <pre><code># Custom disk driver for cloud storage\nclass S3Driver &lt; SharedTools::Tools::Disk::BaseDriver\n  def file_read(path:)\n    @bucket.object(path).get.body.read\n  end\n  # ... implement other methods\nend\n\ndisk = SharedTools::Tools::DiskTool.new(driver: S3Driver.new)\n</code></pre> <p>Read Drivers Guide \u2192</p>"},{"location":"guides/#quick-links","title":"Quick Links","text":""},{"location":"guides/#getting-started","title":"Getting Started","text":"<ul> <li>Installation</li> <li>Quickstart</li> <li>Basic Usage</li> </ul>"},{"location":"guides/#tools","title":"Tools","text":"<ul> <li>Tools Overview</li> <li>BrowserTool</li> <li>DiskTool</li> <li>EvalTool</li> <li>DocTool</li> <li>DatabaseTool</li> </ul>"},{"location":"guides/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/#multi-tool-workflows","title":"Multi-Tool Workflows","text":"<p>Combine multiple tools for complex operations:</p> <pre><code># Web scraping to database pipeline\nbrowser = SharedTools::Tools::BrowserTool.new\ndisk = SharedTools::Tools::DiskTool.new\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# 1. Scrape data\nbrowser.execute(action: \"visit\", url: \"https://example.com/data\")\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n\n# 2. Save raw data\ndisk.execute(action: \"file_write\", path: \"./raw.html\", text: html)\n\n# 3. Store in database\ndatabase.execute(statements: [\"INSERT INTO pages (html) VALUES ('#{html}')\"])\n\nbrowser.cleanup!\n</code></pre>"},{"location":"guides/#error-recovery","title":"Error Recovery","text":"<p>Implement robust error handling:</p> <pre><code>MAX_RETRIES = 3\n\ndef execute_with_retry(tool, action, **params)\n  retries = 0\n\n  begin\n    tool.execute(action: action, **params)\n  rescue StandardError =&gt; e\n    retries += 1\n    if retries &lt; MAX_RETRIES\n      sleep 2 ** retries  # Exponential backoff\n      retry\n    else\n      raise\n    end\n  end\nend\n</code></pre>"},{"location":"guides/#resource-management","title":"Resource Management","text":"<p>Use ensure blocks for cleanup:</p> <pre><code>browser = SharedTools::Tools::BrowserTool.new\n\nbegin\n  browser.execute(action: \"visit\", url: url)\n  # Do work...\nrescue StandardError =&gt; e\n  puts \"Error: #{e.message}\"\nensure\n  browser.cleanup!  # Always clean up\nend\n</code></pre>"},{"location":"guides/#configuration-management","title":"Configuration Management","text":"<p>Store tool configuration:</p> <pre><code>class ToolConfig\n  def self.disk_tool(root: Dir.pwd)\n    driver = SharedTools::Tools::Disk::LocalDriver.new(root: root)\n    SharedTools::Tools::DiskTool.new(driver: driver)\n  end\n\n  def self.browser_tool\n    SharedTools::Tools::BrowserTool.new\n  end\n\n  def self.database_tool(db_path:)\n    db = SQLite3::Database.new(db_path)\n    driver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\n    SharedTools::Tools::DatabaseTool.new(driver: driver)\n  end\nend\n\n# Use configuration\ndisk = ToolConfig.disk_tool(root: '/tmp')\nbrowser = ToolConfig.browser_tool\n</code></pre>"},{"location":"guides/#advanced-topics","title":"Advanced Topics","text":""},{"location":"guides/#performance-optimization","title":"Performance Optimization","text":"<ul> <li>Batch operations when possible</li> <li>Use appropriate chunk sizes for large data</li> <li>Cache expensive operations</li> <li>Close resources promptly</li> </ul>"},{"location":"guides/#security-considerations","title":"Security Considerations","text":"<ul> <li>Always use authorization for untrusted input</li> <li>Sanitize user inputs</li> <li>Use sandboxed directories</li> <li>Validate file paths</li> <li>Limit execution time</li> </ul>"},{"location":"guides/#testing-tools","title":"Testing Tools","text":"<pre><code>require 'minitest/autorun'\n\nclass ToolTest &lt; Minitest::Test\n  def setup\n    @disk = SharedTools::Tools::DiskTool.new\n  end\n\n  def test_file_operations\n    @disk.execute(action: \"file_create\", path: \"./test.txt\")\n    @disk.execute(action: \"file_write\", path: \"./test.txt\", text: \"test\")\n\n    content = @disk.execute(action: \"file_read\", path: \"./test.txt\")\n    assert_equal \"test\", content\n\n    @disk.execute(action: \"file_delete\", path: \"./test.txt\")\n  end\nend\n</code></pre>"},{"location":"guides/#logging-and-debugging","title":"Logging and Debugging","text":"<pre><code>require 'logger'\n\n# Create detailed logger\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::DEBUG\nlogger.formatter = proc do |severity, datetime, progname, msg|\n  \"[#{datetime.strftime('%Y-%m-%d %H:%M:%S')}] #{severity}: #{msg}\\n\"\nend\n\n# Use with tools\ndisk = SharedTools::Tools::DiskTool.new(logger: logger)\ndisk.execute(action: \"file_read\", path: \"./test.txt\")\n# Output: [2025-10-25 10:30:00] INFO: action=\"file_read\" path=\"./test.txt\"\n</code></pre>"},{"location":"guides/#contributing","title":"Contributing","text":"<p>Have ideas for new guides? Contributions welcome!</p> <ul> <li>GitHub Repository</li> <li>Issue Tracker</li> <li>Pull Requests</li> </ul>"},{"location":"guides/authorization/","title":"Authorization System","text":"<p>SharedTools includes a built-in authorization system that provides human-in-the-loop confirmation for potentially dangerous operations.</p>"},{"location":"guides/authorization/#overview","title":"Overview","text":"<p>The authorization system is designed to prevent unintended or dangerous operations by requiring user confirmation before execution. This is particularly important when:</p> <ul> <li>Executing arbitrary code</li> <li>Deleting files or directories</li> <li>Running shell commands</li> <li>Modifying system state</li> </ul>"},{"location":"guides/authorization/#how-it-works","title":"How It Works","text":"<p>The authorization system is controlled by the <code>SharedTools.execute?</code> method:</p> <pre><code>SharedTools.execute?(tool: 'tool_name', stuff: 'operation description')\n</code></pre> <p>This method:</p> <ol> <li>Checks if auto-execute mode is enabled</li> <li>If not, displays what the AI wants to do</li> <li>Prompts the user for confirmation</li> <li>Returns <code>true</code> if approved, <code>false</code> otherwise</li> </ol>"},{"location":"guides/authorization/#default-behavior","title":"Default Behavior","text":"<p>By default, SharedTools operates in safe mode with authorization enabled:</p> <pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\n# This prompts for confirmation\neval_tool.execute(action: \"shell\", command: \"rm important_file.txt\")\n\n# Output:\n# The AI (tool: eval_tool) wants to do the following ...\n# ==========================================\n# rm important_file.txt\n# ==========================================\n#\n# Is it okay to proceed? (y/N)\n</code></pre> <p>User must press <code>y</code> to proceed. Any other key cancels the operation.</p>"},{"location":"guides/authorization/#disabling-authorization","title":"Disabling Authorization","text":"<p>For automated scripts or trusted environments, you can disable authorization:</p> <pre><code># Disable authorization (enable auto-execute)\nSharedTools.auto_execute(true)\n\n# Now operations run without prompting\neval_tool.execute(action: \"shell\", command: \"echo 'Hello'\")\n\n# Re-enable authorization when done\nSharedTools.auto_execute(false)\n</code></pre>"},{"location":"guides/authorization/#which-tools-use-authorization","title":"Which Tools Use Authorization?","text":"<p>Currently, the EvalTool uses authorization for all actions:</p> <ul> <li><code>ruby</code> - Executing Ruby code</li> <li><code>python</code> - Executing Python code</li> <li><code>shell</code> - Running shell commands</li> </ul> <p>Other tools (BrowserTool, DiskTool, DocTool, DatabaseTool) do not currently use authorization, but operate with built-in safety features like path traversal protection.</p>"},{"location":"guides/authorization/#usage-patterns","title":"Usage Patterns","text":""},{"location":"guides/authorization/#pattern-1-interactive-scripts","title":"Pattern 1: Interactive Scripts","text":"<p>For scripts that interact with users, keep authorization enabled:</p> <pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Authorization enabled by default\nputs \"This script will delete temporary files.\"\n\n# User approves each deletion\neval_tool.execute(action: \"shell\", command: \"rm /tmp/*.tmp\")\n</code></pre>"},{"location":"guides/authorization/#pattern-2-automated-scripts","title":"Pattern 2: Automated Scripts","text":"<p>For background jobs or CI/CD, disable authorization:</p> <pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\n# Disable authorization for automation\nSharedTools.auto_execute(true)\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Runs without prompting\neval_tool.execute(action: \"shell\", command: \"npm run build\")\neval_tool.execute(action: \"shell\", command: \"npm test\")\n</code></pre>"},{"location":"guides/authorization/#pattern-3-conditional-authorization","title":"Pattern 3: Conditional Authorization","text":"<p>Enable authorization only for dangerous operations:</p> <pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Safe operations: disable authorization\nSharedTools.auto_execute(true)\neval_tool.execute(action: \"ruby\", code: \"Time.now\")\neval_tool.execute(action: \"shell\", command: \"ls -la\")\n\n# Dangerous operations: enable authorization\nSharedTools.auto_execute(false)\neval_tool.execute(action: \"shell\", command: \"rm -rf /tmp/*\")\n</code></pre>"},{"location":"guides/authorization/#pattern-4-environment-based","title":"Pattern 4: Environment-Based","text":"<p>Use environment variables to control authorization:</p> <pre><code>require 'shared_tools'\n\n# Enable auto-execute in CI/CD environments\nci_environment = ENV['CI'] == 'true' || ENV['AUTOMATED'] == 'true'\nSharedTools.auto_execute(ci_environment)\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Behavior depends on environment\neval_tool.execute(action: \"shell\", command: \"deploy.sh\")\n</code></pre>"},{"location":"guides/authorization/#complete-examples","title":"Complete Examples","text":""},{"location":"guides/authorization/#example-1-file-cleanup-script","title":"Example 1: File Cleanup Script","text":"<pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Keep authorization for file deletions\nputs \"Cleaning up temporary files...\"\n\n# User must approve each deletion\ntemp_dirs = ['/tmp', '/var/tmp', '~/.cache']\n\ntemp_dirs.each do |dir|\n  puts \"\\nClearing #{dir}...\"\n  eval_tool.execute(\n    action: \"shell\",\n    command: \"find #{dir} -type f -name '*.tmp' -delete\"\n  )\nend\n\nputs \"\\nCleanup complete!\"\n</code></pre>"},{"location":"guides/authorization/#example-2-deployment-script","title":"Example 2: Deployment Script","text":"<pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\n# Check if running in automated environment\nif ARGV.include?('--auto')\n  puts \"Running in automated mode\"\n  SharedTools.auto_execute(true)\nelse\n  puts \"Running in interactive mode\"\n  puts \"You will be prompted to approve each step\"\nend\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Deployment steps\nsteps = [\n  { name: \"Pull latest code\", cmd: \"git pull origin main\" },\n  { name: \"Install dependencies\", cmd: \"bundle install\" },\n  { name: \"Run migrations\", cmd: \"rake db:migrate\" },\n  { name: \"Precompile assets\", cmd: \"rake assets:precompile\" },\n  { name: \"Restart server\", cmd: \"systemctl restart app\" }\n]\n\nsteps.each do |step|\n  puts \"\\n#{step[:name]}...\"\n  eval_tool.execute(action: \"shell\", command: step[:cmd])\nend\n\nputs \"\\nDeployment complete!\"\n</code></pre>"},{"location":"guides/authorization/#example-3-data-processing-with-selective-authorization","title":"Example 3: Data Processing with Selective Authorization","text":"<pre><code>#!/usr/bin/env ruby\nrequire 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\ndisk = SharedTools::Tools::DiskTool.new\n\n# Phase 1: Data collection (no authorization needed)\nSharedTools.auto_execute(true)\n\nputs \"Collecting data...\"\ndata = eval_tool.execute(\n  action: \"ruby\",\n  code: \"Dir.glob('data/*.csv').map { |f| File.read(f) }\"\n)\n\n# Phase 2: Data processing (no authorization needed)\nputs \"Processing data...\"\nresults = eval_tool.execute(\n  action: \"ruby\",\n  code: \"process_data(#{data.inspect})\"\n)\n\n# Phase 3: Data deletion (requires authorization)\nSharedTools.auto_execute(false)\n\nputs \"\\nProcessing complete. Ready to clean up.\"\neval_tool.execute(\n  action: \"shell\",\n  command: \"rm -rf data/processed/*\"\n)\n</code></pre>"},{"location":"guides/authorization/#example-4-testing-framework","title":"Example 4: Testing Framework","text":"<pre><code>require 'shared_tools'\n\nclass TestRunner\n  def initialize(auto_approve: false)\n    @eval_tool = SharedTools::Tools::EvalTool.new\n    SharedTools.auto_execute(auto_approve)\n  end\n\n  def run_tests(test_files)\n    results = []\n\n    test_files.each do |file|\n      puts \"Running #{file}...\"\n\n      result = @eval_tool.execute(\n        action: \"shell\",\n        command: \"ruby #{file}\"\n      )\n\n      results &lt;&lt; {\n        file: file,\n        passed: $?.success?,\n        output: result\n      }\n    end\n\n    results\n  end\n\n  def report(results)\n    passed = results.count { |r| r[:passed] }\n    total = results.size\n\n    puts \"\\nTest Results: #{passed}/#{total} passed\"\n\n    results.each do |r|\n      status = r[:passed] ? \"PASS\" : \"FAIL\"\n      puts \"  [#{status}] #{r[:file]}\"\n    end\n  end\nend\n\n# Interactive mode: requires approval for each test\nrunner = TestRunner.new(auto_approve: false)\n\n# Automated mode: no approval needed\nrunner = TestRunner.new(auto_approve: true)\n\nresults = runner.run_tests(Dir.glob('test/**/*_test.rb'))\nrunner.report(results)\n</code></pre>"},{"location":"guides/authorization/#security-best-practices","title":"Security Best Practices","text":""},{"location":"guides/authorization/#1-default-to-authorization-enabled","title":"1. Default to Authorization Enabled","text":"<pre><code># Good: Authorization enabled by default\neval_tool = SharedTools::Tools::EvalTool.new\neval_tool.execute(action: \"shell\", command: cmd)\n\n# Avoid: Auto-execute by default\n# SharedTools.auto_execute(true)\n</code></pre>"},{"location":"guides/authorization/#2-use-auto-execute-sparingly","title":"2. Use Auto-Execute Sparingly","text":"<pre><code># Good: Limited scope\nSharedTools.auto_execute(true)\neval_tool.execute(action: \"ruby\", code: safe_code)\nSharedTools.auto_execute(false)\n\n# Avoid: Global auto-execute\n# SharedTools.auto_execute(true)\n# # ... rest of script\n</code></pre>"},{"location":"guides/authorization/#3-validate-user-input","title":"3. Validate User Input","text":"<pre><code># Good: Validate before execution\nallowed_commands = ['status', 'version', 'help']\nif allowed_commands.include?(user_input)\n  eval_tool.execute(action: \"shell\", command: user_input)\nelse\n  puts \"Invalid command\"\nend\n\n# Avoid: Direct execution\n# eval_tool.execute(action: \"shell\", command: user_input)\n</code></pre>"},{"location":"guides/authorization/#4-use-environment-variables","title":"4. Use Environment Variables","text":"<pre><code># Good: Check environment\nauto = ENV['AUTO_APPROVE'] == 'true'\nSharedTools.auto_execute(auto)\n\n# Document in README:\n# Set AUTO_APPROVE=true for automated environments\n</code></pre>"},{"location":"guides/authorization/#5-log-authorization-decisions","title":"5. Log Authorization Decisions","text":"<pre><code>require 'logger'\n\nlogger = Logger.new('./authorization.log')\n\noriginal_execute = SharedTools.method(:execute?)\n\nSharedTools.define_singleton_method(:execute?) do |tool:, stuff:|\n  approved = original_execute.call(tool: tool, stuff: stuff)\n\n  logger.info({\n    timestamp: Time.now,\n    tool: tool,\n    operation: stuff,\n    approved: approved\n  }.to_json)\n\n  approved\nend\n</code></pre>"},{"location":"guides/authorization/#testing-with-authorization","title":"Testing with Authorization","text":""},{"location":"guides/authorization/#mock-authorization-for-tests","title":"Mock Authorization for Tests","text":"<pre><code>require 'minitest/autorun'\n\nclass MyTest &lt; Minitest::Test\n  def setup\n    # Enable auto-execute for tests\n    SharedTools.auto_execute(true)\n    @eval_tool = SharedTools::Tools::EvalTool.new\n  end\n\n  def teardown\n    # Reset to default\n    SharedTools.auto_execute(false)\n  end\n\n  def test_shell_execution\n    result = @eval_tool.execute(action: \"shell\", command: \"echo test\")\n    assert_equal \"test\\n\", result\n  end\nend\n</code></pre>"},{"location":"guides/authorization/#test-authorization-behavior","title":"Test Authorization Behavior","text":"<pre><code>require 'minitest/autorun'\nrequire 'stringio'\n\nclass AuthorizationTest &lt; Minitest::Test\n  def test_authorization_prompt\n    # Disable auto-execute\n    SharedTools.auto_execute(false)\n\n    # Mock STDIN to simulate user input\n    input = StringIO.new(\"y\\n\")\n    $stdin = input\n\n    eval_tool = SharedTools::Tools::EvalTool.new\n\n    # Should succeed with 'y' input\n    result = eval_tool.execute(action: \"shell\", command: \"echo test\")\n    assert_equal \"test\\n\", result\n\n    # Reset\n    $stdin = STDIN\n  end\nend\n</code></pre>"},{"location":"guides/authorization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/authorization/#authorization-not-working","title":"Authorization Not Working","text":"<p>If operations execute without prompting:</p> <pre><code># Check current state\nputs \"Auto-execute: #{SharedTools.instance_variable_get(:@auto_execute)}\"\n\n# Reset to default\nSharedTools.auto_execute(false)\n</code></pre>"},{"location":"guides/authorization/#cant-run-automated-scripts","title":"Can't Run Automated Scripts","text":"<p>If scripts require manual approval in CI/CD:</p> <pre><code># Set environment variable\nexport AUTO_APPROVE=true\n\n# Or pass flag to script\nruby deploy.rb --auto\n\n# Or modify script\nSharedTools.auto_execute(true)\n</code></pre>"},{"location":"guides/authorization/#testing-issues","title":"Testing Issues","text":"<p>If tests hang waiting for input:</p> <pre><code># Always enable auto-execute in tests\nclass MyTest &lt; Minitest::Test\n  def setup\n    SharedTools.auto_execute(true)\n  end\nend\n</code></pre>"},{"location":"guides/authorization/#see-also","title":"See Also","text":"<ul> <li>EvalTool Documentation - Tool that uses authorization</li> <li>Basic Usage - Common patterns</li> <li>Examples</li> </ul>"},{"location":"guides/drivers/","title":"Working with Drivers","text":"<p>SharedTools uses a driver architecture that provides flexibility and extensibility. Learn how to use built-in drivers and create custom implementations.</p>"},{"location":"guides/drivers/#driver-architecture","title":"Driver Architecture","text":"<p>Drivers are the backend implementations that actually perform operations. Tools delegate to drivers using a well-defined interface, following the Strategy pattern.</p>"},{"location":"guides/drivers/#benefits","title":"Benefits","text":"<ul> <li>Flexibility: Swap implementations without changing tool code</li> <li>Extensibility: Add support for new backends</li> <li>Testability: Mock drivers for testing</li> <li>Separation of Concerns: Tools focus on interface, drivers on implementation</li> </ul>"},{"location":"guides/drivers/#architecture-diagram","title":"Architecture Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Tool (Facade) \u2502  \u2190 User interacts with tool\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 delegates to\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Driver (Impl)  \u2502  \u2190 Driver performs actual work\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Backend System \u2502  \u2190 File system, database, browser, etc.\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/drivers/#built-in-drivers","title":"Built-in Drivers","text":"<p>SharedTools includes several built-in drivers:</p>"},{"location":"guides/drivers/#disk-drivers","title":"Disk Drivers","text":""},{"location":"guides/drivers/#localdriver","title":"LocalDriver","text":"<p>Default driver for local file system operations.</p> <p>Features:</p> <ul> <li>Path traversal protection</li> <li>Sandboxing to root directory</li> <li>Standard file operations</li> </ul> <p>Usage:</p> <pre><code>require 'shared_tools'\n\n# Default: uses current directory as root\ndisk = SharedTools::Tools::DiskTool.new\n\n# Custom root directory\ndriver = SharedTools::Tools::Disk::LocalDriver.new(root: '/tmp')\ndisk = SharedTools::Tools::DiskTool.new(driver: driver)\n</code></pre> <p>Path Security:</p> <pre><code>driver = SharedTools::Tools::Disk::LocalDriver.new(root: '/tmp')\n\n# This works (within /tmp)\ndriver.file_read(path: './data.txt')  # Reads /tmp/data.txt\n\n# This raises SecurityError (path traversal)\ndriver.file_read(path: '../../etc/passwd')  # Blocked!\n</code></pre>"},{"location":"guides/drivers/#browser-drivers","title":"Browser Drivers","text":""},{"location":"guides/drivers/#watirdriver","title":"WatirDriver","text":"<p>Default driver for browser automation using Watir.</p> <p>Features:</p> <ul> <li>Full browser control</li> <li>JavaScript execution</li> <li>Screenshot capture</li> <li>Multiple browser support</li> </ul> <p>Usage:</p> <pre><code>require 'watir'\n\n# Default: uses Watir with Chrome\nbrowser = SharedTools::Tools::BrowserTool.new\n\n# Custom Watir configuration\ndriver = SharedTools::Tools::Browser::WatirDriver.new(\n  browser: :firefox,\n  headless: true\n)\nbrowser = SharedTools::Tools::BrowserTool.new(driver: driver)\n</code></pre>"},{"location":"guides/drivers/#database-drivers","title":"Database Drivers","text":""},{"location":"guides/drivers/#sqlitedriver","title":"SqliteDriver","text":"<p>Driver for SQLite databases.</p> <p>Usage:</p> <pre><code>require 'sqlite3'\n\ndb = SQLite3::Database.new('./app.db')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"guides/drivers/#postgresdriver","title":"PostgresDriver","text":"<p>Driver for PostgreSQL databases.</p> <p>Usage:</p> <pre><code>require 'pg'\n\nconn = PG.connect(dbname: 'myapp', user: 'postgres')\ndriver = SharedTools::Tools::Database::PostgresDriver.new(db: conn)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"guides/drivers/#creating-custom-drivers","title":"Creating Custom Drivers","text":""},{"location":"guides/drivers/#step-1-understand-the-interface","title":"Step 1: Understand the Interface","text":"<p>Each driver type has a base class that defines the required interface:</p> <ul> <li><code>SharedTools::Tools::Disk::BaseDriver</code> - File operations</li> <li><code>SharedTools::Tools::Browser::BaseDriver</code> - Browser operations</li> <li><code>SharedTools::Tools::Database::BaseDriver</code> - Database operations</li> </ul>"},{"location":"guides/drivers/#step-2-inherit-from-base-driver","title":"Step 2: Inherit from Base Driver","text":"<pre><code>class MyCustomDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  # Implement required methods\nend\n</code></pre>"},{"location":"guides/drivers/#step-3-implement-required-methods","title":"Step 3: Implement Required Methods","text":"<p>Check the base driver class for required methods and implement them.</p>"},{"location":"guides/drivers/#custom-driver-examples","title":"Custom Driver Examples","text":""},{"location":"guides/drivers/#example-1-s3-disk-driver","title":"Example 1: S3 Disk Driver","text":"<p>Store files in Amazon S3 instead of local file system:</p> <pre><code>require 'aws-sdk-s3'\n\nclass S3Driver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize(bucket_name:, region: 'us-east-1', prefix: '')\n    @s3 = Aws::S3::Resource.new(region: region)\n    @bucket = @s3.bucket(bucket_name)\n    @prefix = prefix\n    @root = Pathname.new(prefix)\n  end\n\n  def file_create(path:)\n    s3_key = resolve_key(path)\n    @bucket.object(s3_key).put(body: '') unless object_exists?(s3_key)\n  end\n\n  def file_read(path:)\n    s3_key = resolve_key(path)\n    @bucket.object(s3_key).get.body.read\n  end\n\n  def file_write(path:, text:)\n    s3_key = resolve_key(path)\n    @bucket.object(s3_key).put(body: text)\n  end\n\n  def file_delete(path:)\n    s3_key = resolve_key(path)\n    @bucket.object(s3_key).delete\n  end\n\n  def directory_list(path: '.')\n    s3_prefix = resolve_key(path) + '/'\n\n    objects = @bucket.objects(prefix: s3_prefix)\n    objects.map { |obj| obj.key.sub(s3_prefix, '') }.join(\"\\n\")\n  end\n\n  # ... implement other required methods\n\nprivate\n\n  def resolve_key(path)\n    full_path = @root.join(path)\n\n    # Security check\n    relative = full_path.ascend.any? { |ancestor| ancestor == @root }\n    raise SecurityError, \"Invalid path: #{path}\" unless relative\n\n    full_path.to_s\n  end\n\n  def object_exists?(key)\n    @bucket.object(key).exists?\n  end\nend\n\n# Usage\ndriver = S3Driver.new(\n  bucket_name: 'my-app-storage',\n  region: 'us-west-2',\n  prefix: 'app-data'\n)\n\ndisk = SharedTools::Tools::DiskTool.new(driver: driver)\n\n# Now operates on S3\ndisk.execute(action: \"file_write\", path: \"./data.txt\", text: \"Hello S3!\")\n</code></pre>"},{"location":"guides/drivers/#example-2-ftp-disk-driver","title":"Example 2: FTP Disk Driver","text":"<p>Access files via FTP:</p> <pre><code>require 'net/ftp'\n\nclass FtpDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize(host:, user:, password:, root: '/')\n    @host = host\n    @user = user\n    @password = password\n    @root = Pathname.new(root)\n  end\n\n  def file_read(path:)\n    with_ftp do |ftp|\n      ftp_path = resolve_path(path)\n      ftp.getbinaryfile(ftp_path, nil)\n    end\n  end\n\n  def file_write(path:, text:)\n    with_ftp do |ftp|\n      ftp_path = resolve_path(path)\n\n      # Write to temp file first\n      require 'tempfile'\n      Tempfile.create do |tmpfile|\n        tmpfile.write(text)\n        tmpfile.rewind\n        ftp.putbinaryfile(tmpfile.path, ftp_path)\n      end\n    end\n  end\n\n  def directory_list(path: '.')\n    with_ftp do |ftp|\n      ftp_path = resolve_path(path)\n      ftp.chdir(ftp_path)\n      ftp.list.join(\"\\n\")\n    end\n  end\n\n  # ... implement other methods\n\nprivate\n\n  def with_ftp\n    ftp = Net::FTP.new(@host)\n    ftp.login(@user, @password)\n    ftp.passive = true\n\n    yield ftp\n  ensure\n    ftp.close if ftp\n  end\n\n  def resolve_path(path)\n    full_path = @root.join(path)\n\n    # Security check\n    relative = full_path.ascend.any? { |ancestor| ancestor == @root }\n    raise SecurityError, \"Invalid path: #{path}\" unless relative\n\n    full_path.to_s\n  end\nend\n\n# Usage\ndriver = FtpDriver.new(\n  host: 'ftp.example.com',\n  user: 'username',\n  password: 'password',\n  root: '/home/user/app'\n)\n\ndisk = SharedTools::Tools::DiskTool.new(driver: driver)\n</code></pre>"},{"location":"guides/drivers/#example-3-logging-disk-driver-decorator-pattern","title":"Example 3: Logging Disk Driver (Decorator Pattern)","text":"<p>Wrap another driver to add logging:</p> <pre><code>require 'logger'\n\nclass LoggingDiskDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize(driver:, logger: Logger.new(STDOUT))\n    @driver = driver\n    @logger = logger\n  end\n\n  def file_read(path:)\n    @logger.info(\"Reading file: #{path}\")\n    start_time = Time.now\n\n    result = @driver.file_read(path: path)\n\n    duration = Time.now - start_time\n    @logger.info(\"Read completed in #{duration}s\")\n\n    result\n  rescue StandardError =&gt; e\n    @logger.error(\"Read failed: #{e.message}\")\n    raise\n  end\n\n  def file_write(path:, text:)\n    @logger.info(\"Writing file: #{path} (#{text.bytesize} bytes)\")\n    start_time = Time.now\n\n    result = @driver.file_write(path: path, text: text)\n\n    duration = Time.now - start_time\n    @logger.info(\"Write completed in #{duration}s\")\n\n    result\n  rescue StandardError =&gt; e\n    @logger.error(\"Write failed: #{e.message}\")\n    raise\n  end\n\n  # Delegate all other methods\n  def method_missing(method, **args)\n    @driver.send(method, **args)\n  end\n\n  def respond_to_missing?(method, include_private = false)\n    @driver.respond_to?(method, include_private) || super\n  end\nend\n\n# Usage\nbase_driver = SharedTools::Tools::Disk::LocalDriver.new(root: '/tmp')\nlogging_driver = LoggingDiskDriver.new(driver: base_driver)\ndisk = SharedTools::Tools::DiskTool.new(driver: logging_driver)\n\n# Operations are logged\ndisk.execute(action: \"file_write\", path: \"./test.txt\", text: \"data\")\n# Output: Writing file: ./test.txt (4 bytes)\n#         Write completed in 0.001s\n</code></pre>"},{"location":"guides/drivers/#example-4-memory-disk-driver-testing","title":"Example 4: Memory Disk Driver (Testing)","text":"<p>In-memory file system for testing:</p> <pre><code>class MemoryDiskDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize\n    @files = {}\n    @directories = Set.new(['.'])\n    @root = Pathname.new('.')\n  end\n\n  def file_create(path:)\n    @files[path] = '' unless @files.key?(path)\n  end\n\n  def file_read(path:)\n    raise Errno::ENOENT, \"File not found: #{path}\" unless @files.key?(path)\n    @files[path]\n  end\n\n  def file_write(path:, text:)\n    @files[path] = text\n  end\n\n  def file_delete(path:)\n    @files.delete(path)\n  end\n\n  def directory_create(path:)\n    @directories.add(path)\n  end\n\n  def directory_list(path: '.')\n    prefix = path == '.' ? '' : \"#{path}/\"\n\n    files = @files.keys.select { |f| f.start_with?(prefix) }\n    dirs = @directories.select { |d| d.start_with?(prefix) &amp;&amp; d != path }\n\n    (files + dirs.to_a).sort.join(\"\\n\")\n  end\n\n  def directory_delete(path:)\n    @directories.delete(path)\n  end\n\n  # ... implement other methods\nend\n\n# Usage in tests\nrequire 'minitest/autorun'\n\nclass MyTest &lt; Minitest::Test\n  def setup\n    driver = MemoryDiskDriver.new\n    @disk = SharedTools::Tools::DiskTool.new(driver: driver)\n  end\n\n  def test_file_operations\n    @disk.execute(action: \"file_create\", path: \"./test.txt\")\n    @disk.execute(action: \"file_write\", path: \"./test.txt\", text: \"test\")\n\n    content = @disk.execute(action: \"file_read\", path: \"./test.txt\")\n    assert_equal \"test\", content\n  end\nend\n</code></pre>"},{"location":"guides/drivers/#example-5-headless-browser-driver","title":"Example 5: Headless Browser Driver","text":"<p>Custom browser driver with different defaults:</p> <pre><code>class HeadlessBrowserDriver &lt; SharedTools::Tools::Browser::BaseDriver\n  def initialize\n    require 'watir'\n    options = Selenium::WebDriver::Chrome::Options.new\n    options.add_argument('--headless')\n    options.add_argument('--disable-gpu')\n    options.add_argument('--no-sandbox')\n\n    @browser = Watir::Browser.new(:chrome, options: options)\n  end\n\n  def close\n    @browser.close\n  end\n\n  def url\n    @browser.url\n  end\n\n  def title\n    @browser.title\n  end\n\n  def html\n    @browser.html\n  end\n\n  def goto(url:)\n    @browser.goto(url)\n    { success: true, url: url }\n  end\n\n  def click(selector:)\n    element = @browser.element(css: selector)\n    element.click\n    { success: true, selector: selector }\n  end\n\n  def fill_in(selector:, text:)\n    element = @browser.element(css: selector)\n    element.set(text)\n    { success: true, selector: selector }\n  end\n\n  def screenshot\n    require 'tempfile'\n\n    Tempfile.create(['screenshot', '.png']) do |file|\n      @browser.screenshot.save(file.path)\n      yield file\n    end\n  end\nend\n\n# Usage\ndriver = HeadlessBrowserDriver.new\nbrowser = SharedTools::Tools::BrowserTool.new(driver: driver)\n\n# Runs in headless mode\nbrowser.execute(action: \"visit\", url: \"https://example.com\")\n</code></pre>"},{"location":"guides/drivers/#driver-testing","title":"Driver Testing","text":""},{"location":"guides/drivers/#testing-custom-drivers","title":"Testing Custom Drivers","text":"<pre><code>require 'minitest/autorun'\n\nclass S3DriverTest &lt; Minitest::Test\n  def setup\n    # Use mock S3 or LocalStack for testing\n    @driver = S3Driver.new(\n      bucket_name: 'test-bucket',\n      region: 'us-east-1'\n    )\n  end\n\n  def test_file_write_and_read\n    @driver.file_write(path: './test.txt', text: 'hello')\n    content = @driver.file_read(path: './test.txt')\n    assert_equal 'hello', content\n  end\n\n  def test_path_traversal_protection\n    assert_raises(SecurityError) do\n      @driver.file_read(path: '../../etc/passwd')\n    end\n  end\n\n  def teardown\n    # Clean up test data\n  end\nend\n</code></pre>"},{"location":"guides/drivers/#integration-testing","title":"Integration Testing","text":"<pre><code>class DriverIntegrationTest &lt; Minitest::Test\n  def test_with_tool\n    driver = MemoryDiskDriver.new\n    disk = SharedTools::Tools::DiskTool.new(driver: driver)\n\n    # Test through tool interface\n    disk.execute(action: \"file_create\", path: \"./test.txt\")\n    disk.execute(action: \"file_write\", path: \"./test.txt\", text: \"data\")\n\n    content = disk.execute(action: \"file_read\", path: \"./test.txt\")\n    assert_equal \"data\", content\n  end\nend\n</code></pre>"},{"location":"guides/drivers/#best-practices","title":"Best Practices","text":""},{"location":"guides/drivers/#1-implement-complete-interface","title":"1. Implement Complete Interface","text":"<p>Implement all methods required by the base driver:</p> <pre><code>class MyDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  # Implement ALL methods from BaseDriver\n  def file_create(path:); end\n  def file_read(path:); end\n  def file_write(path:, text:); end\n  # ... etc\nend\n</code></pre>"},{"location":"guides/drivers/#2-provide-security-checks","title":"2. Provide Security Checks","text":"<p>Always validate paths and inputs:</p> <pre><code>def file_read(path:)\n  validate_path!(path)\n  # ... perform operation\nend\n\nprivate\n\ndef validate_path!(path)\n  # Check for path traversal\n  raise SecurityError if path.include?('..')\n\n  # Check against whitelist\n  raise SecurityError unless path.start_with?(@allowed_prefix)\nend\n</code></pre>"},{"location":"guides/drivers/#3-handle-errors-gracefully","title":"3. Handle Errors Gracefully","text":"<p>Return meaningful error messages:</p> <pre><code>def file_read(path:)\n  # ... perform operation\nrescue Errno::ENOENT\n  raise Errno::ENOENT, \"File not found: #{path}\"\nrescue Errno::EACCES\n  raise Errno::EACCES, \"Permission denied: #{path}\"\nend\n</code></pre>"},{"location":"guides/drivers/#4-support-configuration","title":"4. Support Configuration","text":"<p>Allow driver configuration:</p> <pre><code>class MyDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize(options = {})\n    @timeout = options[:timeout] || 30\n    @retry_count = options[:retry_count] || 3\n    @logger = options[:logger] || Logger.new(STDOUT)\n  end\nend\n</code></pre>"},{"location":"guides/drivers/#5-document-driver-behavior","title":"5. Document Driver Behavior","text":"<pre><code># Custom driver for Google Cloud Storage\n#\n# @example\n#   driver = GcsDriver.new(\n#     project_id: 'my-project',\n#     bucket_name: 'my-bucket',\n#     credentials_path: './credentials.json'\n#   )\n#\n# @param project_id [String] GCP project ID\n# @param bucket_name [String] GCS bucket name\n# @param credentials_path [String] Path to service account credentials\n#\nclass GcsDriver &lt; SharedTools::Tools::Disk::BaseDriver\n  # ...\nend\n</code></pre>"},{"location":"guides/drivers/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/drivers/#driver-method-not-implemented","title":"Driver Method Not Implemented","text":"<pre><code>NotImplementedError: MyDriver#file_read undefined\n</code></pre> <p>Solution: Implement all required methods from base driver.</p>"},{"location":"guides/drivers/#type-errors","title":"Type Errors","text":"<pre><code>TypeError: wrong number of arguments\n</code></pre> <p>Solution: Match method signatures from base driver exactly:</p> <pre><code># Base driver signature\ndef file_write(path:, text:)\n\n# Custom driver must match\ndef file_write(path:, text:)  # Use keyword arguments\n  # ...\nend\n</code></pre>"},{"location":"guides/drivers/#connection-errors","title":"Connection Errors","text":"<p>For network-based drivers, handle connection failures:</p> <pre><code>def file_read(path:)\n  retries = 0\n  max_retries = 3\n\n  begin\n    # ... perform operation\n  rescue ConnectionError =&gt; e\n    retries += 1\n    retry if retries &lt; max_retries\n    raise\n  end\nend\n</code></pre>"},{"location":"guides/drivers/#see-also","title":"See Also","text":"<ul> <li>Basic Usage - Using drivers with tools</li> <li>DiskTool - Disk driver examples</li> <li>BrowserTool - Browser driver examples</li> <li>DatabaseTool - Database driver examples</li> <li>Examples</li> </ul>"},{"location":"guides/error-handling/","title":"Error Handling Patterns","text":"<p>Comprehensive guide to error handling in SharedTools, covering common patterns, best practices, and recovery strategies.</p>"},{"location":"guides/error-handling/#error-handling-philosophy","title":"Error Handling Philosophy","text":"<p>SharedTools follows these principles:</p> <ol> <li>Fail Fast: Detect errors early</li> <li>Clear Messages: Provide actionable error information</li> <li>Graceful Degradation: Handle errors without crashing</li> <li>User Feedback: Return errors to LLMs in usable format</li> <li>Security: Don't expose sensitive information in errors</li> </ol>"},{"location":"guides/error-handling/#error-categories","title":"Error Categories","text":""},{"location":"guides/error-handling/#1-validation-errors","title":"1. Validation Errors","text":"<p>Raised when parameters are invalid:</p> <pre><code>def execute(action:, url: nil)\n  raise ArgumentError, \"url is required for visit action\" if action == \"visit\" &amp;&amp; url.nil?\n  raise ArgumentError, \"url must be a string\" unless url.is_a?(String)\n  raise ArgumentError, \"url must be absolute\" unless url.start_with?(\"http\")\n\n  perform_visit(url)\nend\n</code></pre> <p>When to use: Parameter validation, precondition checks</p> <p>How to handle: Let the exception propagate to LLM</p>"},{"location":"guides/error-handling/#2-missing-dependency-errors","title":"2. Missing Dependency Errors","text":"<p>Raised when required gems or resources are unavailable:</p> <pre><code>def default_driver\n  if defined?(Watir)\n    Browser::WatirDriver.new\n  else\n    raise LoadError, \"BrowserTool requires the 'watir' gem. \" \\\n                    \"Install it with: gem install watir\"\n  end\nend\n</code></pre> <p>When to use: Missing gems, unavailable system features</p> <p>How to handle: Provide installation instructions</p>"},{"location":"guides/error-handling/#3-operational-errors","title":"3. Operational Errors","text":"<p>Errors during normal operation:</p> <pre><code>def execute(action:, selector:)\n  begin\n    element = driver.find_element(selector)\n    element.click\n  rescue ElementNotFoundError =&gt; e\n    raise \"Element not found: #{selector}. \" \\\n          \"Check the selector and try again. \" \\\n          \"Available selectors: #{list_available_selectors}\"\n  end\nend\n</code></pre> <p>When to use: Network errors, missing elements, file not found</p> <p>How to handle: Provide context and recovery suggestions</p>"},{"location":"guides/error-handling/#4-system-errors","title":"4. System Errors","text":"<p>Errors from external systems:</p> <pre><code>def perform(statement:)\n  begin\n    result = @db.execute(statement)\n    { status: :ok, result: result }\n  rescue SQLite3::SQLException =&gt; e\n    { status: :error, result: \"SQL error: #{e.message}\" }\n  rescue SQLite3::BusyException =&gt; e\n    { status: :error, result: \"Database locked, try again\" }\n  end\nend\n</code></pre> <p>When to use: Database errors, filesystem errors, OS errors</p> <p>How to handle: Catch and convert to structured responses</p>"},{"location":"guides/error-handling/#error-handling-patterns_1","title":"Error Handling Patterns","text":""},{"location":"guides/error-handling/#pattern-1-explicit-validation","title":"Pattern 1: Explicit Validation","text":"<p>Validate early, fail fast:</p> <pre><code>def execute(action:, path:, text: nil)\n  # Validate action\n  unless VALID_ACTIONS.include?(action)\n    raise ArgumentError, \"Invalid action: #{action}. \" \\\n                        \"Valid actions: #{VALID_ACTIONS.join(', ')}\"\n  end\n\n  # Validate path\n  raise ArgumentError, \"path cannot be empty\" if path.empty?\n  raise ArgumentError, \"path cannot contain ..\" if path.include?(\"..\")\n\n  # Validate text for write actions\n  if action == \"write\" &amp;&amp; text.nil?\n    raise ArgumentError, \"text is required for write action\"\n  end\n\n  perform_action(action, path, text)\nend\n</code></pre>"},{"location":"guides/error-handling/#pattern-2-structured-error-responses","title":"Pattern 2: Structured Error Responses","text":"<p>Return errors as data structures:</p> <pre><code>def execute(statements:)\n  results = []\n\n  statements.each do |statement|\n    result = perform_statement(statement)\n    results &lt;&lt; {\n      statement: statement,\n      status: result[:status],\n      result: result[:result]\n    }\n\n    # Stop on first error\n    break if result[:status] == :error\n  end\n\n  results\nend\n\ndef perform_statement(statement)\n  result = @driver.execute(statement)\n  { status: :ok, result: result }\nrescue DatabaseError =&gt; e\n  { status: :error, result: e.message }\nend\n</code></pre>"},{"location":"guides/error-handling/#pattern-3-retry-with-exponential-backoff","title":"Pattern 3: Retry with Exponential Backoff","text":"<p>For transient errors:</p> <pre><code>def execute_with_retry(action:, max_retries: 3)\n  retries = 0\n\n  begin\n    perform_action(action)\n  rescue TransientError =&gt; e\n    retries += 1\n\n    if retries &lt;= max_retries\n      sleep_time = 2 ** retries  # 2, 4, 8 seconds\n      @logger.warn(\"Retry #{retries}/#{max_retries} after #{sleep_time}s: #{e.message}\")\n      sleep sleep_time\n      retry\n    else\n      raise \"Failed after #{max_retries} retries: #{e.message}\"\n    end\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#pattern-4-fallback-values","title":"Pattern 4: Fallback Values","text":"<p>Provide defaults when operations fail:</p> <pre><code>def execute(action:, path:)\n  case action\n  when \"read\"\n    begin\n      File.read(path)\n    rescue Errno::ENOENT\n      @logger.warn(\"File not found: #{path}, returning empty string\")\n      \"\"\n    rescue Errno::EACCES\n      @logger.error(\"Permission denied: #{path}\")\n      raise\n    end\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#pattern-5-error-context","title":"Pattern 5: Error Context","text":"<p>Include context in error messages:</p> <pre><code>def execute(action:, selector:)\n  begin\n    @driver.click(selector: selector)\n  rescue ElementNotFoundError =&gt; e\n    page_url = @driver.url\n    page_title = @driver.title\n    available = @driver.find_all_selectors\n\n    raise \"Element not found: #{selector}\\n\" \\\n          \"Page: #{page_title} (#{page_url})\\n\" \\\n          \"Available selectors: #{available.join(', ')}\\n\" \\\n          \"Original error: #{e.message}\"\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#pattern-6-safe-resource-cleanup","title":"Pattern 6: Safe Resource Cleanup","text":"<p>Ensure cleanup even on errors:</p> <pre><code>def execute(action:, path:)\n  file = nil\n\n  begin\n    file = File.open(path, 'w')\n    file.write(content)\n    \"Successfully wrote to #{path}\"\n  rescue =&gt; e\n    @logger.error(\"Failed to write #{path}: #{e.message}\")\n    raise\n  ensure\n    file&amp;.close\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#tool-specific-patterns","title":"Tool-Specific Patterns","text":""},{"location":"guides/error-handling/#browsertool-error-handling","title":"BrowserTool Error Handling","text":"<pre><code>def execute(action:, selector: nil, url: nil)\n  case action\n  when \"visit\"\n    begin\n      @driver.goto(url: url)\n    rescue Watir::Exception::UnknownObjectException\n      raise \"Failed to navigate to #{url}: Invalid URL or page not accessible\"\n    rescue Net::ReadTimeout\n      raise \"Navigation timeout: #{url} took too long to load. \" \\\n            \"The site may be down or slow.\"\n    rescue =&gt; e\n      raise \"Navigation error: #{e.message}\"\n    end\n\n  when \"click\"\n    begin\n      @driver.click(selector: selector)\n    rescue Watir::Exception::UnknownObjectException\n      # Try to provide helpful context\n      page_html = @driver.html\n      similar_selectors = find_similar_selectors(page_html, selector)\n\n      raise \"Element not found: #{selector}\\n\" \\\n            \"Did you mean one of these?\\n\" \\\n            \"#{similar_selectors.map { |s| \"  - #{s}\" }.join(\"\\n\")}\"\n    rescue Watir::Exception::ObjectDisabledException\n      raise \"Element is disabled: #{selector}. \" \\\n            \"Wait for the page to fully load or check if element is interactive.\"\n    end\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#databasetool-error-handling","title":"DatabaseTool Error Handling","text":"<pre><code>def perform(statement:)\n  @logger.info(\"Executing: #{statement}\")\n\n  begin\n    if statement.match?(/^\\s*SELECT/i)\n      rows = @db.execute(statement)\n      { status: :ok, result: rows }\n    else\n      @db.execute(statement)\n      { status: :ok, result: \"#{@db.changes} rows affected\" }\n    end\n\n  rescue SQLite3::SQLException =&gt; e\n    # Provide specific error messages\n    case e.message\n    when /no such table/\n      { status: :error, result: \"Table does not exist. Create it first.\" }\n    when /syntax error/\n      { status: :error, result: \"SQL syntax error: #{e.message}\" }\n    when /constraint/\n      { status: :error, result: \"Constraint violation: #{e.message}\" }\n    else\n      { status: :error, result: \"Database error: #{e.message}\" }\n    end\n\n  rescue SQLite3::BusyException\n    { status: :error, result: \"Database is locked. Try again in a moment.\" }\n\n  rescue =&gt; e\n    @logger.error(\"Unexpected error: #{e.class} - #{e.message}\")\n    { status: :error, result: \"Unexpected error: #{e.message}\" }\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#disktool-error-handling","title":"DiskTool Error Handling","text":"<pre><code>def execute(action:, path:, **params)\n  begin\n    validate_path!(path)\n\n    case action\n    when \"file_read\"\n      File.read(resolve_path(path))\n    when \"file_write\"\n      File.write(resolve_path(path), params[:text])\n    when \"file_delete\"\n      File.delete(resolve_path(path))\n      \"Deleted #{path}\"\n    end\n\n  rescue Errno::ENOENT\n    raise \"File or directory not found: #{path}\"\n  rescue Errno::EACCES\n    raise \"Permission denied: #{path}. Check file permissions.\"\n  rescue Errno::EISDIR\n    raise \"#{path} is a directory, not a file. Use directory actions.\"\n  rescue Errno::ENOTDIR\n    raise \"#{path} is a file, not a directory. Use file actions.\"\n  rescue Errno::ENOSPC\n    raise \"No space left on device. Free up disk space and try again.\"\n  rescue =&gt; e\n    @logger.error(\"Filesystem error: #{e.class} - #{e.message}\")\n    raise \"Filesystem error: #{e.message}\"\n  end\nend\n\nprivate\n\ndef validate_path!(path)\n  raise ArgumentError, \"path cannot be empty\" if path.empty?\n  raise ArgumentError, \"path cannot contain ..\" if path.include?(\"..\")\n  raise ArgumentError, \"path must be relative\" if path.start_with?(\"/\")\nend\n</code></pre>"},{"location":"guides/error-handling/#logging-errors","title":"Logging Errors","text":""},{"location":"guides/error-handling/#log-levels","title":"Log Levels","text":"<pre><code>def execute(action:, path:)\n  @logger.debug(\"Executing #{action} on #{path}\")\n\n  begin\n    result = perform_action(action, path)\n    @logger.info(\"Success: #{action} on #{path}\")\n    result\n\n  rescue ArgumentError =&gt; e\n    @logger.warn(\"Validation error: #{e.message}\")\n    raise\n\n  rescue =&gt; e\n    @logger.error(\"#{action} failed: #{e.class} - #{e.message}\")\n    @logger.debug(e.backtrace.join(\"\\n\"))\n    raise\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#structured-logging","title":"Structured Logging","text":"<pre><code>def execute(action:, **params)\n  context = {\n    tool: self.class.name,\n    action: action,\n    params: params.inspect\n  }\n\n  @logger.info(context.merge(status: 'start'))\n\n  begin\n    result = perform_action(action, **params)\n    @logger.info(context.merge(status: 'success'))\n    result\n\n  rescue =&gt; e\n    @logger.error(context.merge(\n      status: 'error',\n      error_class: e.class.name,\n      error_message: e.message\n    ))\n    raise\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#user-friendly-error-messages","title":"User-Friendly Error Messages","text":""},{"location":"guides/error-handling/#before-technical","title":"Before (Technical)","text":"<pre><code>raise \"NoMethodError: undefined method `click' for nil:NilClass\"\n</code></pre>"},{"location":"guides/error-handling/#after-user-friendly","title":"After (User-Friendly)","text":"<pre><code>raise \"Could not click element: #{selector}\\n\" \\\n      \"\\n\" \\\n      \"The element was not found on the page. This could mean:\\n\" \\\n      \"- The page hasn't fully loaded yet\\n\" \\\n      \"- The selector is incorrect\\n\" \\\n      \"- The element is hidden or removed\\n\" \\\n      \"\\n\" \\\n      \"Current page: #{@driver.url}\\n\" \\\n      \"Try: Wait for page load, check the selector, or inspect the page.\"\n</code></pre>"},{"location":"guides/error-handling/#testing-error-handling","title":"Testing Error Handling","text":""},{"location":"guides/error-handling/#test-error-cases","title":"Test Error Cases","text":"<pre><code>RSpec.describe SharedTools::Tools::BrowserTool do\n  let(:driver) { instance_double(Browser::WatirDriver) }\n  let(:tool) { described_class.new(driver: driver) }\n\n  describe \"error handling\" do\n    it \"raises ArgumentError for invalid action\" do\n      expect {\n        tool.execute(action: \"invalid\")\n      }.to raise_error(ArgumentError, /Invalid action/)\n    end\n\n    it \"raises helpful error when element not found\" do\n      allow(driver).to receive(:click).and_raise(\n        Watir::Exception::UnknownObjectException\n      )\n\n      expect {\n        tool.execute(action: \"click\", selector: \".missing\")\n      }.to raise_error(/Element not found.*missing/)\n    end\n\n    it \"handles timeout gracefully\" do\n      allow(driver).to receive(:goto).and_raise(Net::ReadTimeout)\n\n      expect {\n        tool.execute(action: \"visit\", url: \"https://slow.com\")\n      }.to raise_error(/timeout.*slow.com/)\n    end\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#test-error-recovery","title":"Test Error Recovery","text":"<pre><code>RSpec.describe \"Error recovery\" do\n  it \"retries on transient errors\" do\n    call_count = 0\n\n    allow(driver).to receive(:perform) do\n      call_count += 1\n      raise TransientError if call_count &lt; 3\n      \"success\"\n    end\n\n    result = tool.execute_with_retry(action: \"test\")\n    expect(result).to eq(\"success\")\n    expect(call_count).to eq(3)\n  end\n\n  it \"gives up after max retries\" do\n    allow(driver).to receive(:perform).and_raise(TransientError)\n\n    expect {\n      tool.execute_with_retry(action: \"test\", max_retries: 2)\n    }.to raise_error(/Failed after 2 retries/)\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#best-practices","title":"Best Practices","text":""},{"location":"guides/error-handling/#do","title":"DO:","text":"<ul> <li>Validate inputs early</li> <li>Provide specific error messages</li> <li>Include context in errors</li> <li>Log errors appropriately</li> <li>Clean up resources</li> <li>Test error cases</li> <li>Document error conditions</li> <li>Return structured errors when appropriate</li> </ul>"},{"location":"guides/error-handling/#dont","title":"DON'T:","text":"<ul> <li>Catch all exceptions without reason</li> <li>Swallow errors silently</li> <li>Expose sensitive information</li> <li>Use generic error messages</li> <li>Forget to clean up resources</li> <li>Ignore error logs</li> <li>Assume operations succeed</li> <li>Return misleading error messages</li> </ul>"},{"location":"guides/error-handling/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"guides/error-handling/#circuit-breaker","title":"Circuit Breaker","text":"<p>For external services:</p> <pre><code>class CircuitBreaker\n  def initialize(failure_threshold: 5, timeout: 60)\n    @failure_count = 0\n    @failure_threshold = failure_threshold\n    @timeout = timeout\n    @last_failure_time = nil\n  end\n\n  def call\n    raise \"Circuit open\" if open?\n\n    begin\n      result = yield\n      reset\n      result\n    rescue =&gt; e\n      record_failure\n      raise\n    end\n  end\n\n  private\n\n  def open?\n    return false if @failure_count &lt; @failure_threshold\n\n    Time.now - @last_failure_time &lt; @timeout\n  end\n\n  def record_failure\n    @failure_count += 1\n    @last_failure_time = Time.now\n  end\n\n  def reset\n    @failure_count = 0\n    @last_failure_time = nil\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#error-aggregation","title":"Error Aggregation","text":"<p>For batch operations:</p> <pre><code>def execute_batch(items:)\n  results = []\n  errors = []\n\n  items.each do |item|\n    begin\n      result = process_item(item)\n      results &lt;&lt; { item: item, status: :ok, result: result }\n    rescue =&gt; e\n      errors &lt;&lt; { item: item, status: :error, error: e.message }\n    end\n  end\n\n  if errors.any?\n    {\n      status: :partial,\n      completed: results.size,\n      failed: errors.size,\n      errors: errors\n    }\n  else\n    {\n      status: :ok,\n      completed: results.size,\n      results: results\n    }\n  end\nend\n</code></pre>"},{"location":"guides/error-handling/#next-steps","title":"Next Steps","text":"<ul> <li>Review Testing Guide</li> <li>Explore Example Error Handling</li> <li>Read API Documentation</li> <li>Check Architecture Guide</li> </ul>"},{"location":"guides/testing/","title":"Testing Tools in LLM Applications","text":"<p>Guide to testing SharedTools in LLM-powered applications, including strategies for testing tool interactions, LLM responses, and end-to-end workflows.</p>"},{"location":"guides/testing/#testing-challenges-with-llms","title":"Testing Challenges with LLMs","text":"<p>LLM applications present unique testing challenges:</p> <ol> <li>Non-determinism: LLMs may return different outputs for the same input</li> <li>Tool Selection: LLM chooses which tools to use</li> <li>Parameter Generation: LLM generates tool parameters</li> <li>Multi-step Workflows: LLM orchestrates multiple tool calls</li> <li>Cost: API calls to LLMs can be expensive</li> <li>Speed: LLM responses can be slow</li> </ol>"},{"location":"guides/testing/#testing-strategies","title":"Testing Strategies","text":""},{"location":"guides/testing/#strategy-1-unit-test-tools-in-isolation","title":"Strategy 1: Unit Test Tools in Isolation","text":"<p>Test tools without involving the LLM:</p> <pre><code>RSpec.describe SharedTools::Tools::BrowserTool do\n  let(:mock_driver) { instance_double(Browser::WatirDriver) }\n  let(:tool) { described_class.new(driver: mock_driver) }\n\n  it \"executes visit action\" do\n    expect(mock_driver).to receive(:goto).with(url: \"https://test.com\")\n    result = tool.execute(action: \"visit\", url: \"https://test.com\")\n    expect(result).to include(\"Navigated\")\n  end\nend\n</code></pre> <p>Benefits: - Fast - Deterministic - No LLM costs - Easy to debug</p> <p>When to use: Always, as foundation of test suite</p>"},{"location":"guides/testing/#strategy-2-test-tool-selection-logic","title":"Strategy 2: Test Tool Selection Logic","text":"<p>Mock the LLM's tool selection:</p> <pre><code>RSpec.describe \"Tool selection\" do\n  let(:tools) do\n    [\n      SharedTools::Tools::BrowserTool.new(driver: mock_browser),\n      SharedTools::Tools::DiskTool.new(driver: mock_disk)\n    ]\n  end\n\n  it \"selects BrowserTool for web scraping\" do\n    # Simulate LLM choosing browser tool\n    selected_tool = select_tool_for_task(\n      task: \"Visit https://example.com\",\n      tools: tools\n    )\n\n    expect(selected_tool).to be_a(SharedTools::Tools::BrowserTool)\n  end\n\n  it \"selects DiskTool for file operations\" do\n    selected_tool = select_tool_for_task(\n      task: \"Read file.txt\",\n      tools: tools\n    )\n\n    expect(selected_tool).to be_a(SharedTools::Tools::DiskTool)\n  end\nend\n</code></pre>"},{"location":"guides/testing/#strategy-3-test-with-fixed-llm-responses","title":"Strategy 3: Test with Fixed LLM Responses","text":"<p>Record LLM responses and replay them:</p> <pre><code>RSpec.describe \"LLM integration\" do\n  let(:recorded_responses) do\n    {\n      \"Visit example.com\" =&gt; {\n        tool: \"browser_tool\",\n        action: \"visit\",\n        url: \"https://example.com\"\n      },\n      \"Read file.txt\" =&gt; {\n        tool: \"disk_tool\",\n        action: \"file_read\",\n        path: \"./file.txt\"\n      }\n    }\n  end\n\n  let(:mock_llm) do\n    double(\"LLM\").tap do |llm|\n      allow(llm).to receive(:call) do |prompt|\n        recorded_responses[prompt]\n      end\n    end\n  end\n\n  it \"handles visit command\" do\n    response = mock_llm.call(\"Visit example.com\")\n    tool = get_tool(response[:tool])\n    result = tool.execute(**response.except(:tool))\n\n    expect(result).to include(\"Navigated\")\n  end\nend\n</code></pre>"},{"location":"guides/testing/#strategy-4-test-with-real-llm-sparingly","title":"Strategy 4: Test with Real LLM (Sparingly)","text":"<p>Use real LLM for integration tests:</p> <pre><code>RSpec.describe \"Full LLM integration\", :slow, :integration do\n  let(:agent) do\n    RubyLLM::Agent.new(\n      tools: [\n        SharedTools::Tools::BrowserTool.new(driver: mock_browser),\n        SharedTools::Tools::DiskTool.new(driver: mock_disk)\n      ]\n    )\n  end\n\n  it \"scrapes and saves data\" do\n    # This makes a real LLM API call\n    response = agent.process(\"Visit example.com and save the title to title.txt\")\n\n    # Verify the LLM used the right tools\n    expect(mock_browser).to have_received(:goto)\n    expect(mock_disk).to have_received(:file_write)\n  end\nend\n</code></pre> <p>Run sparingly: <pre><code># Skip slow tests by default\nrspec\n\n# Run slow tests explicitly\nrspec --tag integration\n</code></pre></p>"},{"location":"guides/testing/#testing-patterns","title":"Testing Patterns","text":""},{"location":"guides/testing/#pattern-1-mock-llm-agent","title":"Pattern 1: Mock LLM Agent","text":"<p>Create a predictable fake LLM:</p> <pre><code>class MockLLMAgent\n  def initialize(responses:)\n    @responses = responses\n    @call_count = 0\n  end\n\n  def call(prompt)\n    @call_count += 1\n    @responses[prompt] || raise(\"Unexpected prompt: #{prompt}\")\n  end\n\n  attr_reader :call_count\nend\n\nRSpec.describe \"LLM workflow\" do\n  let(:agent) do\n    MockLLMAgent.new(\n      responses: {\n        \"Scrape products\" =&gt; {\n          tool: \"browser_tool\",\n          action: \"visit\",\n          url: \"https://shop.com/products\"\n        },\n        \"Save to database\" =&gt; {\n          tool: \"database_tool\",\n          statements: [\"INSERT INTO products...\"]\n        }\n      }\n    )\n  end\n\n  it \"follows the workflow\" do\n    agent.call(\"Scrape products\")\n    agent.call(\"Save to database\")\n    expect(agent.call_count).to eq(2)\n  end\nend\n</code></pre>"},{"location":"guides/testing/#pattern-2-fixture-based-testing","title":"Pattern 2: Fixture-Based Testing","text":"<p>Store LLM responses as fixtures:</p> <pre><code># spec/fixtures/llm_responses/scrape_workflow.json\n{\n  \"steps\": [\n    {\n      \"prompt\": \"Visit the products page\",\n      \"response\": {\n        \"tool\": \"browser_tool\",\n        \"action\": \"visit\",\n        \"url\": \"https://example.com/products\"\n      }\n    },\n    {\n      \"prompt\": \"Get page content\",\n      \"response\": {\n        \"tool\": \"browser_tool\",\n        \"action\": \"page_inspect\",\n        \"full_html\": true\n      }\n    }\n  ]\n}\n\n# In tests\nlet(:workflow) { JSON.parse(File.read('spec/fixtures/llm_responses/scrape_workflow.json')) }\n\nit \"executes workflow\" do\n  workflow['steps'].each do |step|\n    response = step['response']\n    tool = get_tool(response['tool'])\n    result = tool.execute(**response.except('tool'))\n    expect(result).to be_truthy\n  end\nend\n</code></pre>"},{"location":"guides/testing/#pattern-3-assertion-on-tool-usage","title":"Pattern 3: Assertion on Tool Usage","text":"<p>Verify the LLM used tools correctly:</p> <pre><code>RSpec.describe \"Tool usage tracking\" do\n  let(:browser) { instance_spy(SharedTools::Tools::BrowserTool) }\n  let(:disk) { instance_spy(SharedTools::Tools::DiskTool) }\n\n  let(:agent) do\n    LLMAgent.new(tools: [browser, disk])\n  end\n\n  it \"uses browser before disk\" do\n    agent.process(\"Scrape example.com and save to file.txt\")\n\n    # Verify order of operations\n    expect(browser).to have_received(:execute).ordered\n    expect(disk).to have_received(:execute).ordered\n  end\n\n  it \"passes correct parameters\" do\n    agent.process(\"Visit https://example.com\")\n\n    expect(browser).to have_received(:execute).with(\n      hash_including(\n        action: \"visit\",\n        url: \"https://example.com\"\n      )\n    )\n  end\nend\n</code></pre>"},{"location":"guides/testing/#pattern-4-snapshot-testing","title":"Pattern 4: Snapshot Testing","text":"<p>Record full LLM interactions for regression testing:</p> <pre><code>RSpec.describe \"LLM snapshots\" do\n  it \"matches recorded interaction\" do\n    VCR.use_cassette(\"scraping_workflow\") do\n      result = agent.process(\"Scrape products from example.com\")\n\n      expect(result).to match_snapshot(\"scraping_workflow_result\")\n    end\n  end\nend\n</code></pre>"},{"location":"guides/testing/#testing-tool-descriptions","title":"Testing Tool Descriptions","text":"<p>Test that tool descriptions are accurate:</p> <pre><code>RSpec.describe \"Tool descriptions\" do\n  let(:tool) { SharedTools::Tools::BrowserTool }\n\n  it \"includes all actions in description\" do\n    description = tool.description\n\n    SharedTools::Tools::BrowserTool::ACTIONS.each do |action|\n      expect(description).to include(action)\n    end\n  end\n\n  it \"documents required parameters\" do\n    description = tool.description\n\n    expect(description).to include(\"action\")\n    expect(description).to include(\"url\")\n    expect(description).to include(\"selector\")\n  end\n\n  it \"provides usage examples\" do\n    description = tool.description\n\n    expect(description).to match(/\"action\":\\s*\"visit\"/)\n    expect(description).to match(/\"action\":\\s*\"click\"/)\n  end\nend\n</code></pre>"},{"location":"guides/testing/#testing-multi-step-workflows","title":"Testing Multi-Step Workflows","text":""},{"location":"guides/testing/#sequential-tool-calls","title":"Sequential Tool Calls","text":"<pre><code>RSpec.describe \"Multi-step workflow\" do\n  let(:browser) { instance_double(SharedTools::Tools::BrowserTool) }\n  let(:database) { instance_double(SharedTools::Tools::DatabaseTool) }\n  let(:disk) { instance_double(SharedTools::Tools::DiskTool) }\n\n  before do\n    allow(browser).to receive(:execute).and_return(\"&lt;html&gt;...&lt;/html&gt;\")\n    allow(database).to receive(:execute).and_return([{ status: :ok }])\n    allow(disk).to receive(:execute).and_return(\"Saved\")\n  end\n\n  it \"completes workflow in order\" do\n    # Step 1: Scrape\n    html = browser.execute(action: \"visit\", url: \"https://example.com\")\n    expect(html).to be_a(String)\n\n    # Step 2: Store\n    results = database.execute(statements: [\"INSERT...\"])\n    expect(results.first[:status]).to eq(:ok)\n\n    # Step 3: Report\n    report = disk.execute(action: \"file_write\", path: \"./report.txt\", text: \"...\")\n    expect(report).to eq(\"Saved\")\n  end\nend\n</code></pre>"},{"location":"guides/testing/#error-recovery-in-workflows","title":"Error Recovery in Workflows","text":"<pre><code>RSpec.describe \"Workflow error handling\" do\n  it \"handles browser errors\" do\n    allow(browser).to receive(:execute).and_raise(\"Network error\")\n\n    expect {\n      workflow.execute\n    }.to raise_error(/Network error/)\n\n    # Verify cleanup happened\n    expect(browser).to have_received(:cleanup!)\n  end\n\n  it \"continues after recoverable errors\" do\n    allow(browser).to receive(:execute).and_raise(\"Element not found\")\n    allow(workflow).to receive(:retry_browser_action).and_return(\"success\")\n\n    result = workflow.execute_with_retry\n\n    expect(result).to eq(\"success\")\n    expect(workflow).to have_received(:retry_browser_action)\n  end\nend\n</code></pre>"},{"location":"guides/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"guides/testing/#measure-tool-execution-time","title":"Measure Tool Execution Time","text":"<pre><code>RSpec.describe \"Performance\" do\n  it \"completes within acceptable time\" do\n    start_time = Time.now\n\n    tool.execute(action: \"complex_operation\")\n\n    elapsed = Time.now - start_time\n    expect(elapsed).to be &lt; 5.0  # 5 seconds max\n  end\nend\n</code></pre>"},{"location":"guides/testing/#test-with-large-datasets","title":"Test with Large Datasets","text":"<pre><code>RSpec.describe \"Scalability\" do\n  it \"handles large result sets\" do\n    # Generate 10,000 test records\n    records = 10_000.times.map { |i| [\"Record #{i}\"] }\n\n    allow(database).to receive(:execute).and_return(records)\n\n    result = tool.process_large_dataset\n\n    expect(result).to be_truthy\n  end\nend\n</code></pre>"},{"location":"guides/testing/#testing-authorization","title":"Testing Authorization","text":"<p>Test human-in-the-loop confirmation:</p> <pre><code>RSpec.describe \"Authorization\" do\n  before do\n    SharedTools.auto_execute(false)\n  end\n\n  it \"prompts for confirmation\" do\n    allow(STDIN).to receive(:getch).and_return('y')\n\n    expect(SharedTools).to receive(:execute?).and_return(true)\n\n    tool.execute(action: \"delete\", path: \"./important.txt\")\n  end\n\n  it \"skips confirmation in auto mode\" do\n    SharedTools.auto_execute(true)\n\n    expect(SharedTools).not_to receive(:execute?)\n\n    tool.execute(action: \"delete\", path: \"./file.txt\")\n  end\n\n  after do\n    SharedTools.auto_execute(false)\n  end\nend\n</code></pre>"},{"location":"guides/testing/#testing-with-different-llm-providers","title":"Testing with Different LLM Providers","text":""},{"location":"guides/testing/#provider-agnostic-tests","title":"Provider-Agnostic Tests","text":"<pre><code>RSpec.describe \"LLM provider compatibility\" do\n  let(:tools) { [SharedTools::Tools::BrowserTool.new] }\n\n  shared_examples \"LLM provider\" do |provider_name|\n    it \"works with #{provider_name}\" do\n      agent = create_agent_for(provider_name, tools: tools)\n\n      result = agent.process(\"Visit example.com\")\n\n      expect(result).to be_truthy\n    end\n  end\n\n  include_examples \"LLM provider\", :openai\n  include_examples \"LLM provider\", :anthropic\n  include_examples \"LLM provider\", :ollama\nend\n</code></pre>"},{"location":"guides/testing/#continuous-integration","title":"Continuous Integration","text":""},{"location":"guides/testing/#ci-configuration","title":"CI Configuration","text":"<pre><code># .github/workflows/test.yml\nname: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Set up Ruby\n      uses: ruby/setup-ruby@v1\n      with:\n        ruby-version: 3.2\n\n    - name: Install dependencies\n      run: bundle install\n\n    - name: Run unit tests\n      run: bundle exec rspec --tag ~integration --tag ~slow\n\n    - name: Run integration tests\n      run: bundle exec rspec --tag integration\n      env:\n        LLM_API_KEY: ${{ secrets.LLM_API_KEY }}\n      # Only run on main branch to save API costs\n      if: github.ref == 'refs/heads/main'\n</code></pre>"},{"location":"guides/testing/#test-organization","title":"Test Organization","text":""},{"location":"guides/testing/#directory-structure","title":"Directory Structure","text":"<pre><code>spec/\n\u251c\u2500\u2500 unit/\n\u2502   \u251c\u2500\u2500 tools/\n\u2502   \u2502   \u251c\u2500\u2500 browser_tool_spec.rb\n\u2502   \u2502   \u251c\u2500\u2500 disk_tool_spec.rb\n\u2502   \u2502   \u2514\u2500\u2500 database_tool_spec.rb\n\u2502   \u2514\u2500\u2500 drivers/\n\u2502       \u251c\u2500\u2500 watir_driver_spec.rb\n\u2502       \u2514\u2500\u2500 sqlite_driver_spec.rb\n\u251c\u2500\u2500 integration/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 scraping_workflow_spec.rb\n\u2502   \u2502   \u2514\u2500\u2500 data_pipeline_spec.rb\n\u2502   \u2514\u2500\u2500 llm/\n\u2502       \u251c\u2500\u2500 tool_selection_spec.rb\n\u2502       \u2514\u2500\u2500 parameter_generation_spec.rb\n\u251c\u2500\u2500 fixtures/\n\u2502   \u251c\u2500\u2500 html/\n\u2502   \u251c\u2500\u2500 databases/\n\u2502   \u2514\u2500\u2500 llm_responses/\n\u2514\u2500\u2500 support/\n    \u251c\u2500\u2500 mock_drivers.rb\n    \u251c\u2500\u2500 mock_llm.rb\n    \u2514\u2500\u2500 shared_examples.rb\n</code></pre>"},{"location":"guides/testing/#test-configuration","title":"Test Configuration","text":"<pre><code># spec/spec_helper.rb\nRSpec.configure do |config|\n  # Fast unit tests by default\n  config.filter_run_excluding :integration, :slow\n\n  # Tag LLM tests for special handling\n  config.around(:each, :llm) do |example|\n    skip \"LLM tests disabled\" unless ENV['RUN_LLM_TESTS']\n    example.run\n  end\n\n  # Setup mock drivers globally\n  config.before(:each) do\n    @mock_browser = instance_double(Browser::WatirDriver)\n    @mock_database = MockDatabaseDriver.new\n    @mock_disk = MockDiskDriver.new\n  end\nend\n</code></pre>"},{"location":"guides/testing/#best-practices","title":"Best Practices","text":""},{"location":"guides/testing/#do","title":"DO:","text":"<ul> <li>Test tools in isolation first</li> <li>Use mock drivers for unit tests</li> <li>Record LLM responses for deterministic tests</li> <li>Test error cases thoroughly</li> <li>Verify tool descriptions</li> <li>Test authorization system</li> <li>Use fixtures for complex data</li> <li>Tag expensive tests appropriately</li> </ul>"},{"location":"guides/testing/#dont","title":"DON'T:","text":"<ul> <li>Make real LLM API calls in unit tests</li> <li>Test implementation details</li> <li>Assume LLM will always choose correct tool</li> <li>Ignore non-deterministic behavior</li> <li>Skip integration tests entirely</li> <li>Hard-code test data</li> <li>Leave slow tests untagged</li> <li>Test with real databases/browsers unless necessary</li> </ul>"},{"location":"guides/testing/#debugging-llm-interactions","title":"Debugging LLM Interactions","text":""},{"location":"guides/testing/#log-llm-requests-and-responses","title":"Log LLM Requests and Responses","text":"<pre><code>RSpec.configure do |config|\n  config.around(:each, :llm) do |example|\n    logger = Logger.new('spec/logs/llm_interactions.log')\n\n    # Wrap LLM calls with logging\n    original_call = agent.method(:call)\n    allow(agent).to receive(:call) do |prompt|\n      logger.info(\"Prompt: #{prompt}\")\n      response = original_call.call(prompt)\n      logger.info(\"Response: #{response.inspect}\")\n      response\n    end\n\n    example.run\n  end\nend\n</code></pre>"},{"location":"guides/testing/#inspect-tool-parameters","title":"Inspect Tool Parameters","text":"<pre><code>it \"generates correct parameters\" do\n  tool = spy(\"BrowserTool\")\n\n  agent = LLMAgent.new(tools: [tool])\n  agent.process(\"Visit example.com\")\n\n  # Inspect what parameters the LLM generated\n  expect(tool).to have_received(:execute) do |**params|\n    puts \"LLM generated parameters: #{params.inspect}\"\n    expect(params[:url]).to eq(\"https://example.com\")\n  end\nend\n</code></pre>"},{"location":"guides/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Review Error Handling Guide</li> <li>Explore Testing Examples</li> <li>Read Development Guide</li> <li>Check Example Workflows</li> </ul>"},{"location":"tools/","title":"Tools Overview","text":"<p>SharedTools provides a collection of LLM-callable tools for common operations. Each tool follows a consistent facade pattern with an action-based interface.</p>"},{"location":"tools/#available-tools","title":"Available Tools","text":""},{"location":"tools/#browsertool","title":"BrowserTool","text":"<p>Web browser automation using Watir for visiting pages, inspecting content, clicking elements, filling forms, and capturing screenshots.</p> <p>Key Features:</p> <ul> <li>Navigate to URLs</li> <li>Inspect page content and DOM</li> <li>Find elements by text or CSS selectors</li> <li>Click buttons and links</li> <li>Fill input fields</li> <li>Take screenshots</li> </ul> <p>Example:</p> <pre><code>browser = SharedTools::Tools::BrowserTool.new\nbrowser.execute(action: \"visit\", url: \"https://example.com\")\nbrowser.execute(action: \"click\", selector: \"button.login\")\n</code></pre> <p>View BrowserTool Documentation \u2192</p>"},{"location":"tools/#disktool","title":"DiskTool","text":"<p>Secure file system operations with path traversal protection for managing files and directories.</p> <p>Key Features:</p> <ul> <li>Create, read, write, delete files</li> <li>Create, list, move, delete directories</li> <li>Find and replace text in files</li> <li>Path security (sandboxing)</li> </ul> <p>Example:</p> <pre><code>disk = SharedTools::Tools::DiskTool.new\ndisk.execute(action: \"file_write\", path: \"./data.txt\", text: \"Hello\")\ncontent = disk.execute(action: \"file_read\", path: \"./data.txt\")\n</code></pre> <p>View DiskTool Documentation \u2192</p>"},{"location":"tools/#evaltool","title":"EvalTool","text":"<p>Execute code in multiple languages (Ruby, Python, Shell) with authorization controls.</p> <p>Key Features:</p> <ul> <li>Execute Ruby code</li> <li>Execute Python scripts</li> <li>Run shell commands</li> <li>Authorization system for safety</li> </ul> <p>Example:</p> <pre><code>eval_tool = SharedTools::Tools::EvalTool.new\nresult = eval_tool.execute(action: \"ruby\", code: \"[1,2,3].sum\")\n# =&gt; 6\n</code></pre> <p>View EvalTool Documentation \u2192</p>"},{"location":"tools/#doctool","title":"DocTool","text":"<p>Read and process document formats, currently supporting PDF files.</p> <p>Key Features:</p> <ul> <li>Read specific PDF pages</li> <li>Support for page ranges</li> <li>Extract text content</li> </ul> <p>Example:</p> <pre><code>doc = SharedTools::Tools::DocTool.new\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./report.pdf\",\n  page_numbers: \"1-5\"\n)\n</code></pre> <p>View DocTool Documentation \u2192</p>"},{"location":"tools/#databasetool","title":"DatabaseTool","text":"<p>Execute SQL statements against SQLite or PostgreSQL databases.</p> <p>Key Features:</p> <ul> <li>Execute SELECT, INSERT, UPDATE, DELETE</li> <li>Transaction-like execution (stops on error)</li> <li>Support for multiple databases</li> <li>Pluggable driver architecture</li> </ul> <p>Example:</p> <pre><code>driver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\ndatabase.execute(statements: [\"SELECT * FROM users\"])\n</code></pre> <p>View DatabaseTool Documentation \u2192</p>"},{"location":"tools/#tool-architecture","title":"Tool Architecture","text":"<p>All tools share common architectural patterns:</p>"},{"location":"tools/#facade-pattern","title":"Facade Pattern","text":"<p>Each tool acts as a facade, providing a unified interface to complex operations:</p> <pre><code># Single tool, multiple related actions\ntool.execute(action: \"action_one\", params...)\ntool.execute(action: \"action_two\", params...)\n</code></pre>"},{"location":"tools/#action-based-interface","title":"Action-Based Interface","text":"<p>Tools use an action parameter to specify the operation:</p> <pre><code>tool.execute(\n  action: \"specific_action\",\n  param1: \"value1\",\n  param2: \"value2\"\n)\n</code></pre>"},{"location":"tools/#driver-architecture","title":"Driver Architecture","text":"<p>Tools delegate to driver implementations for flexibility:</p> <pre><code># Use built-in driver\ntool = SharedTools::Tools::SomeTool.new\n\n# Or provide custom driver\ncustom_driver = MyCustomDriver.new\ntool = SharedTools::Tools::SomeTool.new(driver: custom_driver)\n</code></pre>"},{"location":"tools/#authorization-integration","title":"Authorization Integration","text":"<p>Tools respect the global authorization setting:</p> <pre><code># Default: requires confirmation\nSharedTools.execute?(tool: 'tool_name', stuff: 'operation details')\n\n# Disable for automation\nSharedTools.auto_execute(true)\n</code></pre>"},{"location":"tools/#tool-comparison","title":"Tool Comparison","text":"Tool Primary Use Authorization Requires External Gem BrowserTool Web automation No Yes (watir) DiskTool File operations No No EvalTool Code execution Yes No (Python for python action) DocTool Document processing No Yes (pdf-reader) DatabaseTool SQL operations No Yes (sqlite3 or pg)"},{"location":"tools/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"tools/#pattern-1-resource-management","title":"Pattern 1: Resource Management","text":"<pre><code>tool = SharedTools::Tools::BrowserTool.new\nbegin\n  tool.execute(action: \"visit\", url: \"https://example.com\")\n  # Do work...\nensure\n  tool.cleanup!  # Always clean up\nend\n</code></pre>"},{"location":"tools/#pattern-2-error-handling","title":"Pattern 2: Error Handling","text":"<pre><code>begin\n  result = tool.execute(action: \"some_action\", param: \"value\")\nrescue ArgumentError =&gt; e\n  puts \"Invalid parameters: #{e.message}\"\nrescue StandardError =&gt; e\n  puts \"Operation failed: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/#pattern-3-multi-tool-workflows","title":"Pattern 3: Multi-Tool Workflows","text":"<pre><code># Combine tools for complex workflows\nbrowser = SharedTools::Tools::BrowserTool.new\ndisk = SharedTools::Tools::DiskTool.new\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# 1. Scrape data\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n\n# 2. Save raw data\ndisk.execute(action: \"file_write\", path: \"./raw.html\", text: html)\n\n# 3. Store in database\ndatabase.execute(statements: [\"INSERT INTO pages (content) VALUES ('#{html}')\"])\n\nbrowser.cleanup!\n</code></pre>"},{"location":"tools/#tool-selection-guide","title":"Tool Selection Guide","text":""},{"location":"tools/#choose-browsertool-when-you-need-to","title":"Choose BrowserTool when you need to:","text":"<ul> <li>Interact with web pages</li> <li>Fill forms and click buttons</li> <li>Scrape dynamic content</li> <li>Take screenshots of web pages</li> </ul>"},{"location":"tools/#choose-disktool-when-you-need-to","title":"Choose DiskTool when you need to:","text":"<ul> <li>Read or write files</li> <li>Manage directory structures</li> <li>Search and replace in files</li> <li>Work with the file system safely</li> </ul>"},{"location":"tools/#choose-evaltool-when-you-need-to","title":"Choose EvalTool when you need to:","text":"<ul> <li>Execute Ruby code dynamically</li> <li>Run Python scripts</li> <li>Execute shell commands</li> <li>Process data with code</li> </ul>"},{"location":"tools/#choose-doctool-when-you-need-to","title":"Choose DocTool when you need to:","text":"<ul> <li>Extract text from PDFs</li> <li>Read specific document pages</li> <li>Process document content</li> </ul>"},{"location":"tools/#choose-databasetool-when-you-need-to","title":"Choose DatabaseTool when you need to:","text":"<ul> <li>Execute SQL queries</li> <li>Manage database records</li> <li>Perform CRUD operations</li> <li>Work with relational data</li> </ul>"},{"location":"tools/#next-steps","title":"Next Steps","text":"<ul> <li>View detailed documentation for each tool</li> <li>Basic Usage Guide - Learn common patterns</li> <li>Authorization System - Control operation approval</li> <li>Working with Drivers - Create custom drivers</li> </ul>"},{"location":"tools/browser/","title":"BrowserTool","text":"<p>Web browser automation tool using Watir for visiting pages, inspecting content, clicking elements, filling forms, and capturing screenshots.</p>"},{"location":"tools/browser/#installation","title":"Installation","text":"<p>BrowserTool requires the Watir gem:</p> <pre><code>gem 'watir'\n</code></pre> <p>You also need a browser driver (ChromeDriver, GeckoDriver, etc.):</p> <pre><code># macOS\nbrew install --cask chromedriver\n\n# Ubuntu/Debian\napt-get install chromium-chromedriver\n</code></pre>"},{"location":"tools/browser/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'shared_tools'\n\n# Initialize with default Watir driver\nbrowser = SharedTools::Tools::BrowserTool.new\n\n# Visit a website\nbrowser.execute(action: \"visit\", url: \"https://example.com\")\n\n# Get page content\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n\n# Clean up when done\nbrowser.cleanup!\n</code></pre>"},{"location":"tools/browser/#actions","title":"Actions","text":""},{"location":"tools/browser/#visit","title":"visit","text":"<p>Navigate to a URL.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"visit\"</li> <li><code>url</code>: Website URL to navigate to</li> </ul> <p>Example:</p> <pre><code>browser.execute(\n  action: \"visit\",\n  url: \"https://github.com/madbomber/shared_tools\"\n)\n</code></pre>"},{"location":"tools/browser/#page_inspect","title":"page_inspect","text":"<p>Get page HTML or summary.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"page_inspect\"</li> <li><code>full_html</code>: (optional) <code>true</code> for full HTML, <code>false</code> for summary (default: false)</li> </ul> <p>Examples:</p> <pre><code># Get page summary\nsummary = browser.execute(action: \"page_inspect\")\n\n# Get full HTML\nhtml = browser.execute(action: \"page_inspect\", full_html: true)\n</code></pre>"},{"location":"tools/browser/#ui_inspect","title":"ui_inspect","text":"<p>Find elements by text content.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"ui_inspect\"</li> <li><code>text_content</code>: Text to search for in elements</li> <li><code>selector</code>: (optional) CSS selector to search within</li> <li><code>context_size</code>: (optional) Number of parent elements to include (default: 2)</li> </ul> <p>Examples:</p> <pre><code># Find elements containing \"Login\"\nelements = browser.execute(\n  action: \"ui_inspect\",\n  text_content: \"Login\"\n)\n\n# Search within specific container\nelements = browser.execute(\n  action: \"ui_inspect\",\n  text_content: \"Submit\",\n  selector: \".form-container\"\n)\n\n# Include more context\nelements = browser.execute(\n  action: \"ui_inspect\",\n  text_content: \"Sign Up\",\n  context_size: 3\n)\n</code></pre>"},{"location":"tools/browser/#selector_inspect","title":"selector_inspect","text":"<p>Find elements by CSS selector.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"selector_inspect\"</li> <li><code>selector</code>: CSS selector to match</li> <li><code>context_size</code>: (optional) Number of parent elements to include (default: 2)</li> </ul> <p>Examples:</p> <pre><code># Find buttons\nelements = browser.execute(\n  action: \"selector_inspect\",\n  selector: \"button\"\n)\n\n# Find by class\nelements = browser.execute(\n  action: \"selector_inspect\",\n  selector: \".nav-item\"\n)\n\n# Complex selector\nelements = browser.execute(\n  action: \"selector_inspect\",\n  selector: \"form button[type='submit']\"\n)\n</code></pre>"},{"location":"tools/browser/#click","title":"click","text":"<p>Click an element by CSS selector.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"click\"</li> <li><code>selector</code>: CSS selector for element to click</li> </ul> <p>Examples:</p> <pre><code># Click submit button\nbrowser.execute(\n  action: \"click\",\n  selector: \"button[type='submit']\"\n)\n\n# Click link\nbrowser.execute(\n  action: \"click\",\n  selector: \"a[href='/login']\"\n)\n\n# Click by ID\nbrowser.execute(\n  action: \"click\",\n  selector: \"#submit-btn\"\n)\n</code></pre>"},{"location":"tools/browser/#text_field_set","title":"text_field_set","text":"<p>Enter text in input fields or text areas.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"text_field_set\"</li> <li><code>selector</code>: CSS selector for input element</li> <li><code>value</code>: Text to enter</li> </ul> <p>Examples:</p> <pre><code># Fill search box\nbrowser.execute(\n  action: \"text_field_set\",\n  selector: \"#search\",\n  value: \"shared_tools\"\n)\n\n# Fill form field\nbrowser.execute(\n  action: \"text_field_set\",\n  selector: \"input[name='email']\",\n  value: \"user@example.com\"\n)\n\n# Fill text area\nbrowser.execute(\n  action: \"text_field_set\",\n  selector: \"textarea.comment\",\n  value: \"This is a comment\"\n)\n</code></pre>"},{"location":"tools/browser/#screenshot","title":"screenshot","text":"<p>Take a screenshot of the current page.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"screenshot\"</li> </ul> <p>Example:</p> <pre><code># Returns base64-encoded PNG\nscreenshot_data = browser.execute(action: \"screenshot\")\n\n# Save to file\nrequire 'base64'\nFile.open(\"page.png\", \"wb\") do |f|\n  f.write(Base64.decode64(screenshot_data))\nend\n</code></pre>"},{"location":"tools/browser/#css-selectors","title":"CSS Selectors","text":"<p>BrowserTool uses CSS selectors to locate elements. Here are common patterns:</p>"},{"location":"tools/browser/#by-element-type","title":"By Element Type","text":"<pre><code>\"button\"           # All buttons\n\"input\"            # All inputs\n\"a\"                # All links\n</code></pre>"},{"location":"tools/browser/#by-id","title":"By ID","text":"<pre><code>\"#username\"        # Element with id=\"username\"\n\"#submit-btn\"      # Element with id=\"submit-btn\"\n</code></pre>"},{"location":"tools/browser/#by-class","title":"By Class","text":"<pre><code>\".button\"          # Elements with class=\"button\"\n\".nav-item\"        # Elements with class=\"nav-item\"\n</code></pre>"},{"location":"tools/browser/#by-attribute","title":"By Attribute","text":"<pre><code>\"button[type='submit']\"       # Button with type=\"submit\"\n\"a[href='/login']\"            # Link with href=\"/login\"\n\"input[name='password']\"      # Input with name=\"password\"\n\"button[aria-label='Close']\"  # Button with aria-label=\"Close\"\n</code></pre>"},{"location":"tools/browser/#combinators","title":"Combinators","text":"<pre><code>\"form button\"                 # Buttons inside forms\n\"div#parent &gt; span.child\"     # Direct child span\n\"nav a.active\"                # Active links in nav\n</code></pre>"},{"location":"tools/browser/#complete-example","title":"Complete Example","text":"<pre><code>require 'shared_tools'\n\nbrowser = SharedTools::Tools::BrowserTool.new\n\nbegin\n  # 1. Navigate to login page\n  puts \"Navigating to login page...\"\n  browser.execute(\n    action: \"visit\",\n    url: \"https://example.com/login\"\n  )\n\n  # 2. Check if we're on the right page\n  summary = browser.execute(action: \"page_inspect\")\n  puts \"Current page: #{summary}\"\n\n  # 3. Find login button to verify page loaded\n  elements = browser.execute(\n    action: \"ui_inspect\",\n    text_content: \"Sign In\"\n  )\n\n  if elements.empty?\n    puts \"Login page not loaded correctly\"\n    exit 1\n  end\n\n  # 4. Fill in credentials\n  puts \"Entering credentials...\"\n  browser.execute(\n    action: \"text_field_set\",\n    selector: \"#username\",\n    value: \"demo@example.com\"\n  )\n\n  browser.execute(\n    action: \"text_field_set\",\n    selector: \"#password\",\n    value: \"secret123\"\n  )\n\n  # 5. Submit form\n  puts \"Submitting form...\"\n  browser.execute(\n    action: \"click\",\n    selector: \"button[type='submit']\"\n  )\n\n  # 6. Take screenshot of result\n  sleep 2  # Wait for page load\n  screenshot = browser.execute(action: \"screenshot\")\n\n  # Save screenshot\n  require 'base64'\n  File.open(\"login_result.png\", \"wb\") do |f|\n    f.write(Base64.decode64(screenshot))\n  end\n\n  puts \"Login complete! Screenshot saved.\"\n\nensure\n  browser.cleanup!\nend\n</code></pre>"},{"location":"tools/browser/#custom-driver","title":"Custom Driver","text":"<p>You can provide a custom browser driver:</p> <pre><code># Create custom driver implementing the driver interface\nclass MyCustomDriver &lt; SharedTools::Tools::Browser::BaseDriver\n  def goto(url:)\n    # Your implementation\n  end\n\n  def html\n    # Return page HTML\n  end\n\n  def click(selector:)\n    # Click element\n  end\n\n  # ... implement other methods\nend\n\n# Use custom driver\ndriver = MyCustomDriver.new\nbrowser = SharedTools::Tools::BrowserTool.new(driver: driver)\n</code></pre>"},{"location":"tools/browser/#error-handling","title":"Error Handling","text":"<pre><code>browser = SharedTools::Tools::BrowserTool.new\n\nbegin\n  browser.execute(action: \"visit\", url: \"https://invalid-url\")\nrescue StandardError =&gt; e\n  puts \"Navigation failed: #{e.message}\"\nend\n\nbegin\n  browser.execute(action: \"click\", selector: \".non-existent\")\nrescue StandardError =&gt; e\n  puts \"Element not found: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/browser/#best-practices","title":"Best Practices","text":""},{"location":"tools/browser/#1-always-clean-up","title":"1. Always Clean Up","text":"<pre><code>browser = SharedTools::Tools::BrowserTool.new\nbegin\n  # Do work...\nensure\n  browser.cleanup!  # Close browser\nend\n</code></pre>"},{"location":"tools/browser/#2-wait-for-elements","title":"2. Wait for Elements","text":"<pre><code># Check if element exists before clicking\nelements = browser.execute(\n  action: \"selector_inspect\",\n  selector: \"button.submit\"\n)\n\nif !elements.empty?\n  browser.execute(action: \"click\", selector: \"button.submit\")\nelse\n  puts \"Submit button not found\"\nend\n</code></pre>"},{"location":"tools/browser/#3-use-specific-selectors","title":"3. Use Specific Selectors","text":"<pre><code># Good: Specific selector\nbrowser.execute(action: \"click\", selector: \"button[type='submit']\")\n\n# Avoid: Too generic\nbrowser.execute(action: \"click\", selector: \"button\")\n</code></pre>"},{"location":"tools/browser/#4-handle-timeouts","title":"4. Handle Timeouts","text":"<pre><code>require 'timeout'\n\nbegin\n  Timeout.timeout(10) do\n    browser.execute(action: \"visit\", url: \"https://slow-site.com\")\n  end\nrescue Timeout::Error\n  puts \"Page load timed out\"\nend\n</code></pre>"},{"location":"tools/browser/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tools/browser/#browser-driver-not-found","title":"Browser Driver Not Found","text":"<pre><code>Error: Unable to find chromedriver\n</code></pre> <p>Solution: Install the browser driver:</p> <pre><code># macOS\nbrew install --cask chromedriver\n\n# Ubuntu\napt-get install chromium-chromedriver\n</code></pre>"},{"location":"tools/browser/#element-not-found","title":"Element Not Found","text":"<pre><code>Error: Element not found\n</code></pre> <p>Solution: Wait for page to load or use more specific selectors:</p> <pre><code># Add delay\nsleep 2\n\n# Or verify element exists first\nelements = browser.execute(action: \"selector_inspect\", selector: \"button\")\n</code></pre>"},{"location":"tools/browser/#permission-denied","title":"Permission Denied","text":"<pre><code>Error: Permission denied accessing browser\n</code></pre> <p>Solution: Run ChromeDriver with proper permissions or allow in System Preferences.</p>"},{"location":"tools/browser/#see-also","title":"See Also","text":"<ul> <li>Basic Usage - Common patterns</li> <li>Working with Drivers - Custom driver implementation</li> <li>Examples</li> </ul>"},{"location":"tools/computer/","title":"Computer Tools","text":"<p>The ComputerTool provides system-level automation capabilities for mouse and keyboard control, enabling LLMs to interact with applications and perform desktop automation tasks.</p>"},{"location":"tools/computer/#overview","title":"Overview","text":"<p>ComputerTool allows LLMs to:</p> <ul> <li>Control mouse movements and clicks</li> <li>Type text and keyboard shortcuts</li> <li>Scroll windows</li> <li>Automate desktop workflows</li> <li>Fill forms and interact with UI elements</li> </ul> <p>Platform Compatibility</p> <p>Computer automation features work best on macOS with accessibility permissions enabled. Other platforms may require additional configuration.</p>"},{"location":"tools/computer/#actions","title":"Actions","text":""},{"location":"tools/computer/#mouse-actions","title":"Mouse Actions","text":""},{"location":"tools/computer/#mouse-click","title":"Mouse Click","text":"<p>Click at specific coordinates with various button options.</p> <pre><code>computer = SharedTools::Tools::ComputerTool.new\n\n# Left click\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 100, y: 200 },\n  mouse_button: \"left\"\n)\n\n# Right click\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 100, y: 200 },\n  mouse_button: \"right\"\n)\n\n# Double click\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 100, y: 200 },\n  mouse_button: \"left\",\n  num_clicks: 2\n)\n</code></pre> <p>Parameters: - <code>coordinate</code>: Hash with <code>x</code> and <code>y</code> keys (required) - <code>mouse_button</code>: \"left\" (default), \"right\", or \"middle\" - <code>num_clicks</code>: Number of clicks (default: 1)</p>"},{"location":"tools/computer/#mouse-move","title":"Mouse Move","text":"<p>Move mouse to specific coordinates.</p> <pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_MOVE,\n  coordinate: { x: 500, y: 300 }\n)\n</code></pre>"},{"location":"tools/computer/#mouse-position","title":"Mouse Position","text":"<p>Get current mouse position.</p> <pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_POSITION\n)\n\nputs \"Mouse is at: #{result[:x]}, #{result[:y]}\"\n</code></pre>"},{"location":"tools/computer/#keyboard-actions","title":"Keyboard Actions","text":""},{"location":"tools/computer/#type-text","title":"Type Text","text":"<p>Type text at current cursor position.</p> <pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::TYPE,\n  text: \"Hello, World!\"\n)\n</code></pre>"},{"location":"tools/computer/#press-key","title":"Press Key","text":"<p>Press keyboard keys including modifiers.</p> <pre><code># Single key\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"Return\"\n)\n\n# Keyboard shortcut\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"cmd+c\"  # Copy on macOS\n)\n\n# Multiple modifiers\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"cmd+shift+v\"  # Paste and match style\n)\n</code></pre> <p>Common Keys: - <code>Return</code>, <code>Enter</code>, <code>Tab</code>, <code>Escape</code> - <code>Backspace</code>, <code>Delete</code>, <code>Space</code> - <code>ArrowUp</code>, <code>ArrowDown</code>, <code>ArrowLeft</code>, <code>ArrowRight</code> - <code>cmd</code> (macOS), <code>ctrl</code> (Windows/Linux) - <code>shift</code>, <code>alt</code>, <code>option</code></p>"},{"location":"tools/computer/#hold-key","title":"Hold Key","text":"<p>Hold a key for a specific duration.</p> <pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::HOLD_KEY,\n  text: \"shift\",\n  duration: 2  # Hold for 2 seconds\n)\n</code></pre>"},{"location":"tools/computer/#scroll-action","title":"Scroll Action","text":"<p>Scroll in a window.</p> <pre><code># Scroll down\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::SCROLL,\n  scroll_direction: \"down\",\n  scroll_amount: 5\n)\n\n# Scroll up\nresult = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::SCROLL,\n  scroll_direction: \"up\",\n  scroll_amount: 3\n)\n</code></pre>"},{"location":"tools/computer/#wait-action","title":"Wait Action","text":"<p>Wait for a specified duration.</p> <pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::WAIT,\n  duration: 2  # Wait 2 seconds\n)\n</code></pre>"},{"location":"tools/computer/#complete-examples","title":"Complete Examples","text":""},{"location":"tools/computer/#form-automation","title":"Form Automation","text":"<pre><code>computer = SharedTools::Tools::ComputerTool.new\n\n# Click on name field\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 300, y: 200 }\n)\n\n# Type name\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::TYPE,\n  text: \"John Doe\"\n)\n\n# Tab to next field\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"Tab\"\n)\n\n# Type email\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::TYPE,\n  text: \"john@example.com\"\n)\n\n# Submit form\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"Return\"\n)\n</code></pre>"},{"location":"tools/computer/#text-selection-and-copy","title":"Text Selection and Copy","text":"<pre><code># Triple-click to select line\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 400, y: 300 },\n  num_clicks: 3\n)\n\n# Copy\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"cmd+c\"\n)\n\n# Wait a moment\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::WAIT,\n  duration: 0.5\n)\n\n# Click elsewhere\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 400, y: 500 }\n)\n\n# Paste\ncomputer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::KEY,\n  text: \"cmd+v\"\n)\n</code></pre>"},{"location":"tools/computer/#working-with-drivers","title":"Working with Drivers","text":""},{"location":"tools/computer/#built-in-mock-driver","title":"Built-in Mock Driver","text":"<p>The default driver is a mock implementation useful for testing:</p> <pre><code>computer = SharedTools::Tools::ComputerTool.new\n# Uses mock driver by default\n</code></pre>"},{"location":"tools/computer/#platform-specific-drivers","title":"Platform-Specific Drivers","text":"<p>For real automation, implement platform-specific drivers:</p> <pre><code># macOS example using AppleScript/CGEvent\nclass MacOSDriver\n  def mouse_click(coordinate:, mouse_button: \"left\", num_clicks: 1)\n    # Use CGEvent or AppleScript\n    system(\"cliclick c:#{coordinate[:x]},#{coordinate[:y]}\")\n  end\n\n  def type_text(text:)\n    # Type using CGEvent\n  end\n\n  # ... other methods\nend\n\ncomputer = SharedTools::Tools::ComputerTool.new(\n  driver: MacOSDriver.new\n)\n</code></pre>"},{"location":"tools/computer/#best-practices","title":"Best Practices","text":""},{"location":"tools/computer/#coordinate-finding","title":"Coordinate Finding","text":"<ol> <li>Use Screenshot Tools: Take screenshots and identify coordinates</li> <li>Add Delays: System UIs may need time to respond</li> <li>Verify UI State: Check if elements are ready before clicking</li> </ol>"},{"location":"tools/computer/#reliability","title":"Reliability","text":"<pre><code># Add waits between actions\ncomputer.execute(action: :mouse_click, coordinate: {x: 100, y: 200})\ncomputer.execute(action: :wait, duration: 0.5)\ncomputer.execute(action: :type, text: \"Hello\")\n</code></pre>"},{"location":"tools/computer/#error-handling","title":"Error Handling","text":"<pre><code>result = computer.execute(\n  action: SharedTools::Tools::ComputerTool::Action::MOUSE_CLICK,\n  coordinate: { x: 100, y: 200 }\n)\n\nif result[:error]\n  puts \"Click failed: #{result[:error]}\"\nelse\n  puts \"Click succeeded\"\nend\n</code></pre>"},{"location":"tools/computer/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tools/computer/#accessibility-permissions","title":"Accessibility Permissions","text":"<p>On macOS, enable accessibility permissions:</p> <ol> <li>System Preferences \u2192 Security &amp; Privacy \u2192 Privacy</li> <li>Select \"Accessibility\"</li> <li>Add your application/terminal</li> </ol>"},{"location":"tools/computer/#coordinate-issues","title":"Coordinate Issues","text":"<ul> <li>Screen coordinates are from top-left (0,0)</li> <li>Use screenshot tools to find exact coordinates</li> <li>Consider screen resolution and scaling</li> </ul>"},{"location":"tools/computer/#timing-problems","title":"Timing Problems","text":"<ul> <li>Add waits between actions</li> <li>Increase duration for slower UIs</li> <li>Check if dialogs are modal</li> </ul>"},{"location":"tools/computer/#see-also","title":"See Also","text":"<ul> <li>BrowserTool - For web automation</li> <li>Examples - More examples</li> <li>Driver Guide - Custom driver creation</li> </ul>"},{"location":"tools/database/","title":"DatabaseTool","text":"<p>Execute SQL statements against SQLite or PostgreSQL databases with a pluggable driver architecture.</p>"},{"location":"tools/database/#installation","title":"Installation","text":"<p>DatabaseTool is included with SharedTools, but requires a database gem:</p> <pre><code># For SQLite\ngem 'sqlite3'\n\n# For PostgreSQL\ngem 'pg'\n</code></pre>"},{"location":"tools/database/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\n# Create database and driver\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\n\n# Initialize tool\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Execute SQL statements\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)\",\n    \"INSERT INTO users (name) VALUES ('Alice')\",\n    \"SELECT * FROM users\"\n  ]\n)\n\n# Check results\nresults.each do |result|\n  puts \"Status: #{result[:status]}\"\n  puts \"Result: #{result[:result]}\"\nend\n</code></pre>"},{"location":"tools/database/#execution-model","title":"Execution Model","text":"<p>DatabaseTool executes statements sequentially and stops on the first error:</p> <pre><code>results = database.execute(\n  statements: [\n    \"CREATE TABLE items (id INTEGER PRIMARY KEY)\",  # Succeeds\n    \"INSERT INTO items VALUES (1)\",                  # Succeeds\n    \"INSERT INTO invalid_table VALUES (2)\",          # Fails - stops here\n    \"SELECT * FROM items\"                            # Not executed\n  ]\n)\n\n# results contains only the first 3 statements (2 success, 1 error)\n</code></pre>"},{"location":"tools/database/#actions","title":"Actions","text":""},{"location":"tools/database/#execute","title":"execute","text":"<p>Execute one or more SQL statements sequentially.</p> <p>Parameters:</p> <ul> <li><code>statements</code>: Array of SQL statement strings</li> </ul> <p>Return Value:</p> <p>Array of hashes with: - <code>status</code>: <code>:ok</code> or <code>:error</code> - <code>statement</code>: The SQL statement executed - <code>result</code>: Query results or error message</p> <p>Examples:</p> <pre><code># Single statement\nresults = database.execute(\n  statements: [\"SELECT * FROM users\"]\n)\n\n# Multiple statements\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE products (id INTEGER PRIMARY KEY, name TEXT, price REAL)\",\n    \"INSERT INTO products (name, price) VALUES ('Widget', 9.99)\",\n    \"INSERT INTO products (name, price) VALUES ('Gadget', 19.99)\",\n    \"SELECT * FROM products\"\n  ]\n)\n\n# Process results\nresults.each do |result|\n  if result[:status] == :ok\n    puts \"\u2713 #{result[:statement]}\"\n    puts \"  Result: #{result[:result]}\"\n  else\n    puts \"\u2717 #{result[:statement]}\"\n    puts \"  Error: #{result[:result]}\"\n  end\nend\n</code></pre>"},{"location":"tools/database/#database-drivers","title":"Database Drivers","text":""},{"location":"tools/database/#sqlite-driver","title":"SQLite Driver","text":"<pre><code>require 'sqlite3'\n\n# In-memory database\ndb = SQLite3::Database.new(':memory:')\n\n# File-based database\ndb = SQLite3::Database.new('./app.db')\n\n# Create driver\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"tools/database/#postgresql-driver","title":"PostgreSQL Driver","text":"<pre><code>require 'pg'\n\n# Connect to PostgreSQL\nconn = PG.connect(\n  host: 'localhost',\n  port: 5432,\n  dbname: 'myapp',\n  user: 'postgres',\n  password: 'password'\n)\n\n# Create driver\ndriver = SharedTools::Tools::Database::PostgresDriver.new(db: conn)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"tools/database/#complete-examples","title":"Complete Examples","text":""},{"location":"tools/database/#example-1-user-management","title":"Example 1: User Management","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\n# Setup\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Create schema\ndatabase.execute(\n  statements: [\n    &lt;&lt;~SQL\n      CREATE TABLE users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        username TEXT NOT NULL UNIQUE,\n        email TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    SQL\n  ]\n)\n\n# Insert users\ndatabase.execute(\n  statements: [\n    \"INSERT INTO users (username, email) VALUES ('alice', 'alice@example.com')\",\n    \"INSERT INTO users (username, email) VALUES ('bob', 'bob@example.com')\",\n    \"INSERT INTO users (username, email) VALUES ('charlie', 'charlie@example.com')\"\n  ]\n)\n\n# Query users\nresults = database.execute(\n  statements: [\"SELECT id, username, email FROM users ORDER BY username\"]\n)\n\nputs \"Users:\"\nresults.first[:result].each do |row|\n  puts \"  #{row[0]}: #{row[1]} (#{row[2]})\"\nend\n\n# Update user\ndatabase.execute(\n  statements: [\n    \"UPDATE users SET email = 'alice.new@example.com' WHERE username = 'alice'\"\n  ]\n)\n\n# Delete user\ndatabase.execute(\n  statements: [\n    \"DELETE FROM users WHERE username = 'charlie'\"\n  ]\n)\n</code></pre>"},{"location":"tools/database/#example-2-e-commerce-database","title":"Example 2: E-commerce Database","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\ndb = SQLite3::Database.new('./shop.db')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Create schema\ndatabase.execute(\n  statements: [\n    &lt;&lt;~SQL,\n      CREATE TABLE IF NOT EXISTS products (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        description TEXT,\n        price REAL NOT NULL,\n        stock INTEGER DEFAULT 0\n      )\n    SQL\n    &lt;&lt;~SQL,\n      CREATE TABLE IF NOT EXISTS orders (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        product_id INTEGER,\n        quantity INTEGER,\n        total REAL,\n        order_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (product_id) REFERENCES products(id)\n      )\n    SQL\n  ]\n)\n\n# Add products\ndatabase.execute(\n  statements: [\n    \"INSERT INTO products (name, description, price, stock) VALUES ('Laptop', 'High-performance laptop', 1299.99, 10)\",\n    \"INSERT INTO products (name, description, price, stock) VALUES ('Mouse', 'Wireless mouse', 29.99, 50)\",\n    \"INSERT INTO products (name, description, price, stock) VALUES ('Keyboard', 'Mechanical keyboard', 89.99, 30)\"\n  ]\n)\n\n# Create order\nproduct_id = 1\nquantity = 2\nprice = 1299.99\n\ndatabase.execute(\n  statements: [\n    \"INSERT INTO orders (product_id, quantity, total) VALUES (#{product_id}, #{quantity}, #{price * quantity})\",\n    \"UPDATE products SET stock = stock - #{quantity} WHERE id = #{product_id}\"\n  ]\n)\n\n# Generate sales report\nresults = database.execute(\n  statements: [\n    &lt;&lt;~SQL\n      SELECT\n        p.name,\n        SUM(o.quantity) as total_sold,\n        SUM(o.total) as revenue\n      FROM orders o\n      JOIN products p ON o.product_id = p.id\n      GROUP BY p.name\n      ORDER BY revenue DESC\n    SQL\n  ]\n)\n\nputs \"Sales Report:\"\nresults.first[:result].each do |row|\n  puts \"  #{row[0]}: #{row[1]} sold, $#{row[2]} revenue\"\nend\n</code></pre>"},{"location":"tools/database/#example-3-data-migration","title":"Example 3: Data Migration","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\n# Source database\nsource_db = SQLite3::Database.new('./source.db')\nsource_driver = SharedTools::Tools::Database::SqliteDriver.new(db: source_db)\nsource = SharedTools::Tools::DatabaseTool.new(driver: source_driver)\n\n# Destination database\ndest_db = SQLite3::Database.new('./destination.db')\ndest_driver = SharedTools::Tools::Database::SqliteDriver.new(db: dest_db)\ndestination = SharedTools::Tools::DatabaseTool.new(driver: dest_driver)\n\n# Create destination schema\ndestination.execute(\n  statements: [\n    &lt;&lt;~SQL\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY,\n        name TEXT,\n        email TEXT\n      )\n    SQL\n  ]\n)\n\n# Read from source\nresults = source.execute(\n  statements: [\"SELECT id, name, email FROM users\"]\n)\n\n# Migrate data\nif results.first[:status] == :ok\n  users = results.first[:result]\n\n  insert_statements = users.map do |user|\n    \"INSERT INTO users (id, name, email) VALUES (#{user[0]}, '#{user[1]}', '#{user[2]}')\"\n  end\n\n  destination.execute(statements: insert_statements)\n  puts \"Migrated #{users.size} users\"\nend\n\nsource_db.close\ndest_db.close\n</code></pre>"},{"location":"tools/database/#example-4-query-builder-pattern","title":"Example 4: Query Builder Pattern","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Setup\ndatabase.execute(\n  statements: [\n    \"CREATE TABLE logs (id INTEGER PRIMARY KEY, level TEXT, message TEXT, timestamp DATETIME)\"\n  ]\n)\n\n# Helper method to build queries\ndef build_insert(table, data)\n  columns = data.keys.join(', ')\n  values = data.values.map { |v| \"'#{v}'\" }.join(', ')\n  \"INSERT INTO #{table} (#{columns}) VALUES (#{values})\"\nend\n\n# Insert logs using builder\nlogs = [\n  { level: 'INFO', message: 'App started', timestamp: Time.now },\n  { level: 'ERROR', message: 'Connection failed', timestamp: Time.now },\n  { level: 'INFO', message: 'Request processed', timestamp: Time.now }\n]\n\nstatements = logs.map { |log| build_insert('logs', log) }\ndatabase.execute(statements: statements)\n\n# Query with filters\ndef build_select(table, where: {}, order_by: nil)\n  sql = \"SELECT * FROM #{table}\"\n\n  if where.any?\n    conditions = where.map { |k, v| \"#{k} = '#{v}'\" }.join(' AND ')\n    sql += \" WHERE #{conditions}\"\n  end\n\n  sql += \" ORDER BY #{order_by}\" if order_by\n\n  sql\nend\n\n# Get errors\nresults = database.execute(\n  statements: [\n    build_select('logs', where: { level: 'ERROR' })\n  ]\n)\n\nputs \"Errors found:\"\nresults.first[:result].each do |row|\n  puts \"  #{row[3]}: #{row[2]}\"\nend\n</code></pre>"},{"location":"tools/database/#example-5-transaction-like-behavior","title":"Example 5: Transaction-Like Behavior","text":"<pre><code>require 'shared_tools'\nrequire 'sqlite3'\n\ndb = SQLite3::Database.new(':memory:')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Setup\ndatabase.execute(\n  statements: [\n    \"CREATE TABLE accounts (id INTEGER PRIMARY KEY, name TEXT, balance REAL)\"\n  ]\n)\n\ndatabase.execute(\n  statements: [\n    \"INSERT INTO accounts (id, name, balance) VALUES (1, 'Alice', 1000.0)\",\n    \"INSERT INTO accounts (id, name, balance) VALUES (2, 'Bob', 500.0)\"\n  ]\n)\n\n# Transfer money (stops on first error)\ntransfer_amount = 100\n\nresults = database.execute(\n  statements: [\n    \"UPDATE accounts SET balance = balance - #{transfer_amount} WHERE id = 1\",\n    \"UPDATE accounts SET balance = balance + #{transfer_amount} WHERE id = 2\",\n    \"SELECT name, balance FROM accounts ORDER BY id\"\n  ]\n)\n\n# Check if all succeeded\nif results.all? { |r| r[:status] == :ok }\n  puts \"Transfer successful!\"\n  results.last[:result].each do |row|\n    puts \"  #{row[0]}: $#{row[1]}\"\n  end\nelse\n  puts \"Transfer failed - database unchanged\"\nend\n</code></pre>"},{"location":"tools/database/#error-handling","title":"Error Handling","text":"<pre><code>database = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\n# Handle SQL errors\nresults = database.execute(\n  statements: [\n    \"CREATE TABLE users (id INTEGER PRIMARY KEY)\",\n    \"INSERT INTO users VALUES (1)\",\n    \"INSERT INTO invalid_table VALUES (2)\"  # This will fail\n  ]\n)\n\n# Check results\nresults.each_with_index do |result, i|\n  if result[:status] == :error\n    puts \"Statement #{i + 1} failed: #{result[:result]}\"\n    break  # No more statements were executed after this\n  end\nend\n\n# Handle connection errors\nbegin\n  db = SQLite3::Database.new('/invalid/path/db.sqlite')\nrescue SQLite3::CantOpenException =&gt; e\n  puts \"Database connection failed: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/database/#best-practices","title":"Best Practices","text":""},{"location":"tools/database/#1-use-parameterized-queries","title":"1. Use Parameterized Queries","text":"<pre><code># BAD: SQL injection vulnerability\nuser_input = \"'; DROP TABLE users; --\"\ndatabase.execute(\n  statements: [\"SELECT * FROM users WHERE name = '#{user_input}'\"]\n)\n\n# GOOD: Use parameterized queries (implementation depends on driver)\n# For now, sanitize inputs\ndef sanitize(input)\n  input.gsub(\"'\", \"''\")\nend\n\nsafe_input = sanitize(user_input)\ndatabase.execute(\n  statements: [\"SELECT * FROM users WHERE name = '#{safe_input}'\"]\n)\n</code></pre>"},{"location":"tools/database/#2-check-results","title":"2. Check Results","text":"<pre><code>results = database.execute(statements: statements)\n\nif results.all? { |r| r[:status] == :ok }\n  puts \"All statements succeeded\"\nelse\n  failed = results.find { |r| r[:status] == :error }\n  puts \"Failed: #{failed[:statement]}\"\n  puts \"Error: #{failed[:result]}\"\nend\n</code></pre>"},{"location":"tools/database/#3-close-connections","title":"3. Close Connections","text":"<pre><code>db = SQLite3::Database.new('./app.db')\ndriver = SharedTools::Tools::Database::SqliteDriver.new(db: db)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n\nbegin\n  # Use database...\nensure\n  db.close  # Always close connection\nend\n</code></pre>"},{"location":"tools/database/#4-use-batch-inserts","title":"4. Use Batch Inserts","text":"<pre><code># For large datasets, batch inserts\nusers = (1..1000).map { |i| { name: \"User#{i}\", email: \"user#{i}@example.com\" } }\n\n# Insert in batches of 100\nusers.each_slice(100) do |batch|\n  statements = batch.map do |user|\n    \"INSERT INTO users (name, email) VALUES ('#{user[:name]}', '#{user[:email]}')\"\n  end\n\n  database.execute(statements: statements)\nend\n</code></pre>"},{"location":"tools/database/#custom-driver","title":"Custom Driver","text":"<p>Create a custom driver for other databases:</p> <pre><code>class MySqlDriver &lt; SharedTools::Tools::Database::BaseDriver\n  def initialize(db:)\n    @db = db\n  end\n\n  def perform(statement:)\n    if statement =~ /^\\s*SELECT/i\n      results = @db.query(statement)\n      { status: :ok, result: results.to_a }\n    else\n      @db.query(statement)\n      { status: :ok, result: \"Success (#{@db.affected_rows} rows)\" }\n    end\n  rescue =&gt; e\n    { status: :error, result: e.message }\n  end\nend\n\n# Use custom driver\nmysql = Mysql2::Client.new(host: \"localhost\", username: \"root\")\ndriver = MySqlDriver.new(db: mysql)\ndatabase = SharedTools::Tools::DatabaseTool.new(driver: driver)\n</code></pre>"},{"location":"tools/database/#see-also","title":"See Also","text":"<ul> <li>Basic Usage - Common patterns</li> <li>Working with Drivers - Custom driver implementation</li> <li>Examples</li> </ul>"},{"location":"tools/disk/","title":"DiskTool","text":"<p>Secure file system operations with path traversal protection for managing files and directories.</p>"},{"location":"tools/disk/#installation","title":"Installation","text":"<p>DiskTool is included with SharedTools and requires no additional dependencies:</p> <pre><code>gem 'shared_tools'\n</code></pre>"},{"location":"tools/disk/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'shared_tools'\n\n# Initialize with default local driver\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create and write a file\ndisk.execute(action: \"file_create\", path: \"./example.txt\")\ndisk.execute(action: \"file_write\", path: \"./example.txt\", text: \"Hello, World!\")\n\n# Read the file\ncontent = disk.execute(action: \"file_read\", path: \"./example.txt\")\nputs content  # =&gt; \"Hello, World!\"\n</code></pre>"},{"location":"tools/disk/#security-features","title":"Security Features","text":"<p>DiskTool includes built-in path traversal protection:</p> <pre><code>require 'tmpdir'\n\n# Create sandboxed disk tool\nDir.mktmpdir do |tmpdir|\n  disk = SharedTools::Tools::DiskTool.new(\n    driver: SharedTools::Tools::Disk::LocalDriver.new(root: tmpdir)\n  )\n\n  # This works (within tmpdir)\n  disk.execute(action: \"file_create\", path: \"./safe.txt\")\n\n  # This raises SecurityError (path traversal attempt)\n  begin\n    disk.execute(action: \"file_read\", path: \"../../etc/passwd\")\n  rescue SecurityError =&gt; e\n    puts \"Blocked: #{e.message}\"\n  end\nend\n</code></pre>"},{"location":"tools/disk/#actions","title":"Actions","text":""},{"location":"tools/disk/#directory-operations","title":"Directory Operations","text":""},{"location":"tools/disk/#directory_create","title":"directory_create","text":"<p>Create a directory (including parent directories).</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"directory_create\"</li> <li><code>path</code>: Directory path to create</li> </ul> <p>Examples:</p> <pre><code># Create single directory\ndisk.execute(action: \"directory_create\", path: \"./data\")\n\n# Create nested directories\ndisk.execute(action: \"directory_create\", path: \"./data/logs/2025\")\n</code></pre>"},{"location":"tools/disk/#directory_delete","title":"directory_delete","text":"<p>Delete an empty directory.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"directory_delete\"</li> <li><code>path</code>: Directory path to delete</li> </ul> <p>Example:</p> <pre><code>disk.execute(action: \"directory_delete\", path: \"./empty_dir\")\n</code></pre> <p>Directory must be empty</p> <p>This action only deletes empty directories. Use file_delete to remove files first.</p>"},{"location":"tools/disk/#directory_list","title":"directory_list","text":"<p>List contents of a directory.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"directory_list\"</li> <li><code>path</code>: Directory path to list (use \".\" for current directory)</li> </ul> <p>Examples:</p> <pre><code># List current directory\nlisting = disk.execute(action: \"directory_list\", path: \".\")\nputs listing\n\n# List specific directory\nlisting = disk.execute(action: \"directory_list\", path: \"./data\")\n</code></pre>"},{"location":"tools/disk/#directory_move","title":"directory_move","text":"<p>Move or rename a directory.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"directory_move\"</li> <li><code>path</code>: Source directory path</li> <li><code>destination</code>: Destination directory path</li> </ul> <p>Example:</p> <pre><code>disk.execute(\n  action: \"directory_move\",\n  path: \"./old_name\",\n  destination: \"./new_name\"\n)\n</code></pre>"},{"location":"tools/disk/#file-operations","title":"File Operations","text":""},{"location":"tools/disk/#file_create","title":"file_create","text":"<p>Create an empty file (if it doesn't exist).</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_create\"</li> <li><code>path</code>: File path to create</li> </ul> <p>Example:</p> <pre><code>disk.execute(action: \"file_create\", path: \"./notes.txt\")\n</code></pre>"},{"location":"tools/disk/#file_delete","title":"file_delete","text":"<p>Delete a file.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_delete\"</li> <li><code>path</code>: File path to delete</li> </ul> <p>Example:</p> <pre><code>disk.execute(action: \"file_delete\", path: \"./temp.txt\")\n</code></pre>"},{"location":"tools/disk/#file_move","title":"file_move","text":"<p>Move or rename a file.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_move\"</li> <li><code>path</code>: Source file path</li> <li><code>destination</code>: Destination file path</li> </ul> <p>Examples:</p> <pre><code># Rename file\ndisk.execute(\n  action: \"file_move\",\n  path: \"./draft.txt\",\n  destination: \"./final.txt\"\n)\n\n# Move to different directory\ndisk.execute(\n  action: \"file_move\",\n  path: \"./document.txt\",\n  destination: \"./archive/document.txt\"\n)\n</code></pre>"},{"location":"tools/disk/#file_read","title":"file_read","text":"<p>Read the contents of a file.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_read\"</li> <li><code>path</code>: File path to read</li> </ul> <p>Example:</p> <pre><code>content = disk.execute(action: \"file_read\", path: \"./config.txt\")\nputs content\n</code></pre>"},{"location":"tools/disk/#file_write","title":"file_write","text":"<p>Write or overwrite file contents.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_write\"</li> <li><code>path</code>: File path to write</li> <li><code>text</code>: Content to write</li> </ul> <p>Example:</p> <pre><code>disk.execute(\n  action: \"file_write\",\n  path: \"./output.txt\",\n  text: \"Line 1\\nLine 2\\nLine 3\"\n)\n</code></pre>"},{"location":"tools/disk/#file_replace","title":"file_replace","text":"<p>Find and replace text in a file.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"file_replace\"</li> <li><code>path</code>: File path</li> <li><code>old_text</code>: Text to find</li> <li><code>new_text</code>: Replacement text</li> </ul> <p>Example:</p> <pre><code># Replace all occurrences\ndisk.execute(\n  action: \"file_replace\",\n  path: \"./config.txt\",\n  old_text: \"localhost\",\n  new_text: \"production.example.com\"\n)\n</code></pre>"},{"location":"tools/disk/#complete-examples","title":"Complete Examples","text":""},{"location":"tools/disk/#example-1-project-setup","title":"Example 1: Project Setup","text":"<pre><code>require 'shared_tools'\n\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create project structure\n[\n  \"./myapp\",\n  \"./myapp/lib\",\n  \"./myapp/spec\",\n  \"./myapp/bin\"\n].each do |dir|\n  disk.execute(action: \"directory_create\", path: dir)\n  puts \"Created #{dir}\"\nend\n\n# Create files with content\nfiles = {\n  \"./myapp/Gemfile\" =&gt; \"source 'https://rubygems.org'\\n\\ngem 'shared_tools'\\n\",\n  \"./myapp/README.md\" =&gt; \"# My App\\n\\nA Ruby application.\\n\",\n  \"./myapp/lib/myapp.rb\" =&gt; \"module MyApp\\n  VERSION = '0.1.0'\\nend\\n\"\n}\n\nfiles.each do |path, content|\n  disk.execute(action: \"file_create\", path: path)\n  disk.execute(action: \"file_write\", path: path, text: content)\n  puts \"Created #{path}\"\nend\n\n# List project structure\nlisting = disk.execute(action: \"directory_list\", path: \"./myapp\")\nputs \"\\nProject structure:\"\nputs listing\n</code></pre>"},{"location":"tools/disk/#example-2-log-file-processor","title":"Example 2: Log File Processor","text":"<pre><code>require 'shared_tools'\n\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create logs directory\ndisk.execute(action: \"directory_create\", path: \"./logs\")\n\n# Generate log file\nlog_content = &lt;&lt;~LOG\n  [2025-10-25 10:00:00] INFO: Application started\n  [2025-10-25 10:00:01] DEBUG: Configuration loaded\n  [2025-10-25 10:00:02] ERROR: Connection failed\n  [2025-10-25 10:00:03] INFO: Retrying connection\nLOG\n\ndisk.execute(action: \"file_create\", path: \"./logs/app.log\")\ndisk.execute(action: \"file_write\", path: \"./logs/app.log\", text: log_content)\n\n# Read and filter errors\ncontent = disk.execute(action: \"file_read\", path: \"./logs/app.log\")\nerrors = content.lines.select { |line| line.include?(\"ERROR\") }\n\n# Save filtered errors\ndisk.execute(action: \"file_create\", path: \"./logs/errors.log\")\ndisk.execute(action: \"file_write\", path: \"./logs/errors.log\", text: errors.join)\n\nputs \"Extracted #{errors.size} errors to errors.log\"\n</code></pre>"},{"location":"tools/disk/#example-3-configuration-file-update","title":"Example 3: Configuration File Update","text":"<pre><code>require 'shared_tools'\n\ndisk = SharedTools::Tools::DiskTool.new\n\n# Create config file\nconfig = &lt;&lt;~CONFIG\n  database_host=localhost\n  database_port=5432\n  api_url=http://localhost:3000\n  debug_mode=true\nCONFIG\n\ndisk.execute(action: \"file_create\", path: \"./config.env\")\ndisk.execute(action: \"file_write\", path: \"./config.env\", text: config)\n\n# Update for production\ndisk.execute(\n  action: \"file_replace\",\n  path: \"./config.env\",\n  old_text: \"localhost\",\n  new_text: \"production.example.com\"\n)\n\ndisk.execute(\n  action: \"file_replace\",\n  path: \"./config.env\",\n  old_text: \"debug_mode=true\",\n  new_text: \"debug_mode=false\"\n)\n\n# Verify changes\nupdated = disk.execute(action: \"file_read\", path: \"./config.env\")\nputs \"Updated configuration:\"\nputs updated\n</code></pre>"},{"location":"tools/disk/#custom-driver","title":"Custom Driver","text":"<p>Implement a custom driver for different storage backends:</p> <pre><code>class S3Driver &lt; SharedTools::Tools::Disk::BaseDriver\n  def initialize(bucket:, root:)\n    @bucket = bucket\n    @root = Pathname.new(root)\n  end\n\n  def file_read(path:)\n    # Read from S3\n    s3_key = resolve!(path: path).to_s\n    @bucket.object(s3_key).get.body.read\n  end\n\n  def file_write(path:, text:)\n    # Write to S3\n    s3_key = resolve!(path: path).to_s\n    @bucket.object(s3_key).put(body: text)\n  end\n\n  # Implement other methods...\nend\n\n# Use custom driver\ns3_bucket = Aws::S3::Bucket.new('my-bucket')\ndisk = SharedTools::Tools::DiskTool.new(\n  driver: S3Driver.new(bucket: s3_bucket, root: '/app-data')\n)\n</code></pre>"},{"location":"tools/disk/#error-handling","title":"Error Handling","text":"<pre><code>disk = SharedTools::Tools::DiskTool.new\n\n# Handle file not found\nbegin\n  disk.execute(action: \"file_read\", path: \"./missing.txt\")\nrescue Errno::ENOENT =&gt; e\n  puts \"File not found: #{e.message}\"\nend\n\n# Handle permission denied\nbegin\n  disk.execute(action: \"file_write\", path: \"/etc/readonly.txt\", text: \"data\")\nrescue Errno::EACCES =&gt; e\n  puts \"Permission denied: #{e.message}\"\nend\n\n# Handle security violations\nbegin\n  disk.execute(action: \"file_read\", path: \"../../../etc/passwd\")\nrescue SecurityError =&gt; e\n  puts \"Security violation: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/disk/#best-practices","title":"Best Practices","text":""},{"location":"tools/disk/#1-use-sandboxed-directories","title":"1. Use Sandboxed Directories","text":"<pre><code>require 'tmpdir'\n\n# All operations restricted to tmpdir\nDir.mktmpdir('myapp') do |tmpdir|\n  disk = SharedTools::Tools::DiskTool.new(\n    driver: SharedTools::Tools::Disk::LocalDriver.new(root: tmpdir)\n  )\n\n  # Safe operations here\n  disk.execute(action: \"file_create\", path: \"./safe.txt\")\nend  # tmpdir automatically cleaned up\n</code></pre>"},{"location":"tools/disk/#2-check-before-operating","title":"2. Check Before Operating","text":"<pre><code># Check if file exists\nif File.exist?(\"./data.txt\")\n  content = disk.execute(action: \"file_read\", path: \"./data.txt\")\nelse\n  puts \"File not found\"\nend\n\n# Check if directory is empty before deleting\nif Dir.empty?(\"./old_dir\")\n  disk.execute(action: \"directory_delete\", path: \"./old_dir\")\nend\n</code></pre>"},{"location":"tools/disk/#3-use-relative-paths","title":"3. Use Relative Paths","text":"<pre><code># Good: Relative path\ndisk.execute(action: \"file_read\", path: \"./config.txt\")\n\n# Avoid: Absolute paths (unless using custom root)\n# disk.execute(action: \"file_read\", path: \"/tmp/data.txt\")\n</code></pre>"},{"location":"tools/disk/#4-handle-large-files-carefully","title":"4. Handle Large Files Carefully","text":"<pre><code># For large files, consider streaming\npath = \"./large_file.txt\"\nFile.open(path, 'r') do |file|\n  file.each_line do |line|\n    # Process line by line\n  end\nend\n</code></pre>"},{"location":"tools/disk/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tools/disk/#permission-denied","title":"Permission Denied","text":"<pre><code>Error: Permission denied\n</code></pre> <p>Solution: Check file/directory permissions:</p> <pre><code>ls -la ./file.txt\nchmod 644 ./file.txt  # Read/write for owner\n</code></pre>"},{"location":"tools/disk/#directory-not-empty","title":"Directory Not Empty","text":"<pre><code>Error: Directory not empty\n</code></pre> <p>Solution: Delete files first:</p> <pre><code># Delete files in directory\nDir.glob(\"./mydir/*\").each do |file|\n  disk.execute(action: \"file_delete\", path: file)\nend\n\n# Then delete directory\ndisk.execute(action: \"directory_delete\", path: \"./mydir\")\n</code></pre>"},{"location":"tools/disk/#path-traversal-blocked","title":"Path Traversal Blocked","text":"<pre><code>SecurityError: unknown path\n</code></pre> <p>Solution: Use paths relative to the driver's root:</p> <pre><code># This works\ndisk.execute(action: \"file_read\", path: \"./data.txt\")\n\n# This raises SecurityError\ndisk.execute(action: \"file_read\", path: \"../../etc/passwd\")\n</code></pre>"},{"location":"tools/disk/#see-also","title":"See Also","text":"<ul> <li>Basic Usage - Common patterns</li> <li>Working with Drivers - Custom driver implementation</li> <li>Examples</li> </ul>"},{"location":"tools/doc/","title":"DocTool","text":"<p>Read and process document formats, currently supporting PDF files for text extraction.</p>"},{"location":"tools/doc/#installation","title":"Installation","text":"<p>DocTool requires the pdf-reader gem:</p> <pre><code>gem 'pdf-reader', '~&gt; 2.0'\n</code></pre>"},{"location":"tools/doc/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\n\n# Read first page\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./document.pdf\",\n  page_numbers: \"1\"\n)\n\nputs result[:pages]  # Array of page content\n</code></pre>"},{"location":"tools/doc/#actions","title":"Actions","text":""},{"location":"tools/doc/#pdf_read","title":"pdf_read","text":"<p>Read specific pages from a PDF document.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"pdf_read\"</li> <li><code>doc_path</code>: Path to PDF file</li> <li><code>page_numbers</code>: Page numbers to read (comma-separated, supports ranges)</li> </ul> <p>Page Number Format:</p> <ul> <li>Single page: <code>\"1\"</code></li> <li>Multiple pages: <code>\"1, 3, 5\"</code></li> <li>Range: <code>\"1-10\"</code></li> <li>Combined: <code>\"1, 5-8, 15\"</code></li> </ul> <p>Examples:</p> <pre><code>doc = SharedTools::Tools::DocTool.new\n\n# Read first page\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./report.pdf\",\n  page_numbers: \"1\"\n)\n\n# Read specific pages\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./book.pdf\",\n  page_numbers: \"1, 10, 20\"\n)\n\n# Read page range\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./manual.pdf\",\n  page_numbers: \"5-15\"\n)\n\n# Read complex selection\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./thesis.pdf\",\n  page_numbers: \"1, 5-8, 15, 20-25\"\n)\n</code></pre>"},{"location":"tools/doc/#return-value","title":"Return Value","text":"<p>The <code>pdf_read</code> action returns a hash with:</p> <pre><code>{\n  pages: [\n    { number: 1, content: \"Page 1 text...\" },\n    { number: 2, content: \"Page 2 text...\" },\n    # ...\n  ],\n  total_pages: 100,\n  requested: \"1-5\"\n}\n</code></pre>"},{"location":"tools/doc/#complete-examples","title":"Complete Examples","text":""},{"location":"tools/doc/#example-1-extract-table-of-contents","title":"Example 1: Extract Table of Contents","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\n\n# Read first 5 pages (usually contains TOC)\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./book.pdf\",\n  page_numbers: \"1-5\"\n)\n\n# Process pages\ntoc_lines = []\nresult[:pages].each do |page|\n  lines = page[:content].lines\n  lines.each do |line|\n    # Find lines that look like TOC entries\n    if line =~ /^(Chapter|Section)\\s+\\d+/\n      toc_lines &lt;&lt; line.strip\n    end\n  end\nend\n\nputs \"Table of Contents:\"\nputs toc_lines.join(\"\\n\")\n</code></pre>"},{"location":"tools/doc/#example-2-search-for-keywords","title":"Example 2: Search for Keywords","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\nkeyword = \"machine learning\"\n\n# Read all pages (adjust range as needed)\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./research_paper.pdf\",\n  page_numbers: \"1-50\"\n)\n\n# Search for keyword\nmatches = []\nresult[:pages].each do |page|\n  if page[:content].downcase.include?(keyword.downcase)\n    matches &lt;&lt; {\n      page: page[:number],\n      excerpt: page[:content][0..200] + \"...\"\n    }\n  end\nend\n\nputs \"Found '#{keyword}' on #{matches.size} pages:\"\nmatches.each do |match|\n  puts \"\\nPage #{match[:page]}:\"\n  puts match[:excerpt]\nend\n</code></pre>"},{"location":"tools/doc/#example-3-extract-and-save-text","title":"Example 3: Extract and Save Text","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\ndisk = SharedTools::Tools::DiskTool.new\n\n# Read PDF pages\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./document.pdf\",\n  page_numbers: \"1-10\"\n)\n\n# Combine all page content\nfull_text = result[:pages].map { |page|\n  \"=== Page #{page[:number]} ===\\n\\n#{page[:content]}\\n\\n\"\n}.join\n\n# Save to text file\ndisk.execute(action: \"file_create\", path: \"./extracted.txt\")\ndisk.execute(action: \"file_write\", path: \"./extracted.txt\", text: full_text)\n\nputs \"Extracted #{result[:pages].size} pages to extracted.txt\"\n</code></pre>"},{"location":"tools/doc/#example-4-pdf-summary-generator","title":"Example 4: PDF Summary Generator","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\n\n# Read document\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./report.pdf\",\n  page_numbers: \"1-#{result[:total_pages]}\"  # All pages\n)\n\n# Generate summary\nsummary = {\n  title: \"PDF Summary\",\n  total_pages: result[:total_pages],\n  total_words: 0,\n  average_words_per_page: 0,\n  pages_with_content: 0\n}\n\nresult[:pages].each do |page|\n  word_count = page[:content].split.size\n  summary[:total_words] += word_count\n  summary[:pages_with_content] += 1 if word_count &gt; 0\nend\n\nsummary[:average_words_per_page] =\n  summary[:total_words] / summary[:pages_with_content]\n\nputs \"Document Summary:\"\nputs \"  Total Pages: #{summary[:total_pages]}\"\nputs \"  Total Words: #{summary[:total_words]}\"\nputs \"  Avg Words/Page: #{summary[:average_words_per_page]}\"\n</code></pre>"},{"location":"tools/doc/#example-5-multi-document-processing","title":"Example 5: Multi-Document Processing","text":"<pre><code>require 'shared_tools'\n\ndoc = SharedTools::Tools::DocTool.new\npdf_files = Dir.glob(\"./documents/*.pdf\")\n\nresults = pdf_files.map do |pdf_path|\n  puts \"Processing #{pdf_path}...\"\n\n  result = doc.execute(\n    action: \"pdf_read\",\n    doc_path: pdf_path,\n    page_numbers: \"1\"  # Read first page only\n  )\n\n  {\n    file: File.basename(pdf_path),\n    pages: result[:total_pages],\n    first_page: result[:pages].first[:content][0..200]\n  }\nend\n\n# Generate report\nputs \"\\n\" + \"=\" * 80\nputs \"Document Processing Report\"\nputs \"=\" * 80\n\nresults.each do |r|\n  puts \"\\nFile: #{r[:file]}\"\n  puts \"  Pages: #{r[:pages]}\"\n  puts \"  Preview: #{r[:first_page]}...\"\nend\n</code></pre>"},{"location":"tools/doc/#working-with-large-pdfs","title":"Working with Large PDFs","text":""},{"location":"tools/doc/#strategy-1-read-in-chunks","title":"Strategy 1: Read in Chunks","text":"<pre><code>doc = SharedTools::Tools::DocTool.new\n\n# For a 1000-page PDF, read in chunks\nchunk_size = 50\ntotal_pages = 1000\n\n(1..total_pages).step(chunk_size) do |start_page|\n  end_page = [start_page + chunk_size - 1, total_pages].min\n\n  result = doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./large_document.pdf\",\n    page_numbers: \"#{start_page}-#{end_page}\"\n  )\n\n  # Process this chunk\n  process_pages(result[:pages])\n\n  puts \"Processed pages #{start_page}-#{end_page}\"\nend\n</code></pre>"},{"location":"tools/doc/#strategy-2-read-specific-sections","title":"Strategy 2: Read Specific Sections","text":"<pre><code># Only read pages you need\nimportant_pages = \"1, 5, 10-15, 50, 100-110\"\n\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./large_document.pdf\",\n  page_numbers: important_pages\n)\n</code></pre>"},{"location":"tools/doc/#error-handling","title":"Error Handling","text":"<pre><code>doc = SharedTools::Tools::DocTool.new\n\n# Handle file not found\nbegin\n  doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./missing.pdf\",\n    page_numbers: \"1\"\n  )\nrescue Errno::ENOENT =&gt; e\n  puts \"PDF not found: #{e.message}\"\nend\n\n# Handle invalid page numbers\nbegin\n  doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./document.pdf\",\n    page_numbers: \"999\"  # Beyond last page\n  )\nrescue StandardError =&gt; e\n  puts \"Invalid page number: #{e.message}\"\nend\n\n# Handle corrupted PDF\nbegin\n  doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./corrupted.pdf\",\n    page_numbers: \"1\"\n  )\nrescue PDF::Reader::MalformedPDFError =&gt; e\n  puts \"Corrupted PDF: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/doc/#text-extraction-limitations","title":"Text Extraction Limitations","text":"<p>DocTool extracts raw text from PDFs, which has some limitations:</p>"},{"location":"tools/doc/#what-works-well","title":"What Works Well:","text":"<ul> <li>Plain text documents</li> <li>Simple formatting</li> <li>Basic tables (as text)</li> <li>Standard fonts</li> </ul>"},{"location":"tools/doc/#limitations","title":"Limitations:","text":"<ul> <li>Images: Not extracted (OCR not supported)</li> <li>Complex layouts: May not preserve exact formatting</li> <li>Tables: Extracted as text, not structured data</li> <li>Fonts: Embedded fonts work, but special characters may vary</li> <li>Encryption: Password-protected PDFs not supported</li> </ul>"},{"location":"tools/doc/#handling-these-limitations","title":"Handling These Limitations:","text":"<pre><code># Check if page has content\nresult[:pages].each do |page|\n  if page[:content].strip.empty?\n    puts \"Page #{page[:number]} appears to be empty (possibly image-only)\"\n  else\n    puts \"Page #{page[:number]} has text content\"\n  end\nend\n</code></pre>"},{"location":"tools/doc/#best-practices","title":"Best Practices","text":""},{"location":"tools/doc/#1-check-file-exists-first","title":"1. Check File Exists First","text":"<pre><code>pdf_path = \"./document.pdf\"\n\nif File.exist?(pdf_path)\n  result = doc.execute(\n    action: \"pdf_read\",\n    doc_path: pdf_path,\n    page_numbers: \"1\"\n  )\nelse\n  puts \"PDF not found: #{pdf_path}\"\nend\n</code></pre>"},{"location":"tools/doc/#2-validate-page-numbers","title":"2. Validate Page Numbers","text":"<pre><code># Get total pages first\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./document.pdf\",\n  page_numbers: \"1\"\n)\n\ntotal_pages = result[:total_pages]\n\n# Now read valid range\ndesired_page = 100\nif desired_page &lt;= total_pages\n  result = doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./document.pdf\",\n    page_numbers: desired_page.to_s\n  )\nelse\n  puts \"Page #{desired_page} exceeds total pages (#{total_pages})\"\nend\n</code></pre>"},{"location":"tools/doc/#3-handle-large-documents-efficiently","title":"3. Handle Large Documents Efficiently","text":"<pre><code># Don't read all pages at once for large PDFs\n# Use ranges to read what you need\nresult = doc.execute(\n  action: \"pdf_read\",\n  doc_path: \"./large.pdf\",\n  page_numbers: \"1-10\"  # Start with first 10 pages\n)\n</code></pre>"},{"location":"tools/doc/#4-clean-extracted-text","title":"4. Clean Extracted Text","text":"<pre><code>result[:pages].each do |page|\n  # Remove extra whitespace\n  cleaned = page[:content].gsub(/\\s+/, ' ').strip\n\n  # Remove page numbers if present\n  cleaned = cleaned.gsub(/^Page \\d+\\s*/, '')\n\n  puts cleaned\nend\n</code></pre>"},{"location":"tools/doc/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tools/doc/#pdf-reader-gem-not-found","title":"PDF-Reader Gem Not Found","text":"<pre><code>Error: cannot load such file -- pdf-reader\n</code></pre> <p>Solution: Install the gem:</p> <pre><code>gem install pdf-reader\n</code></pre>"},{"location":"tools/doc/#corrupted-pdf-error","title":"Corrupted PDF Error","text":"<pre><code>PDF::Reader::MalformedPDFError\n</code></pre> <p>Solution: Try repairing the PDF with external tools:</p> <pre><code># Using Ghostscript\ngs -o repaired.pdf -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress original.pdf\n</code></pre>"},{"location":"tools/doc/#empty-text-extraction","title":"Empty Text Extraction","text":"<p>If text is empty but you know the PDF has content:</p> <ol> <li>PDF might be image-based (scanned document) - requires OCR</li> <li>PDF might use non-standard encoding</li> <li>PDF might be encrypted</li> </ol>"},{"location":"tools/doc/#memory-issues-with-large-pdfs","title":"Memory Issues with Large PDFs","text":"<pre><code>Error: memory allocation failed\n</code></pre> <p>Solution: Read in smaller chunks:</p> <pre><code># Instead of reading all pages\n# Read in chunks of 50 pages\n(1..total_pages).step(50) do |start_page|\n  end_page = [start_page + 49, total_pages].min\n  result = doc.execute(\n    action: \"pdf_read\",\n    doc_path: \"./large.pdf\",\n    page_numbers: \"#{start_page}-#{end_page}\"\n  )\n  # Process and discard before next chunk\nend\n</code></pre>"},{"location":"tools/doc/#see-also","title":"See Also","text":"<ul> <li>Basic Usage - Common patterns</li> <li>DiskTool - Save extracted text to files</li> <li>EvalTool - Process extracted text with code</li> <li>Examples</li> </ul>"},{"location":"tools/eval/","title":"EvalTool","text":"<p>Execute code in multiple languages (Ruby, Python, Shell) with authorization controls for security.</p>"},{"location":"tools/eval/#installation","title":"Installation","text":"<p>EvalTool is included with SharedTools:</p> <pre><code>gem 'shared_tools'\n</code></pre> <p>For Python evaluation, you need Python 3 installed:</p> <pre><code># macOS\nbrew install python3\n\n# Ubuntu/Debian\napt-get install python3\n</code></pre>"},{"location":"tools/eval/#basic-usage","title":"Basic Usage","text":"<pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Execute Ruby code\nresult = eval_tool.execute(action: \"ruby\", code: \"2 + 2\")\nputs result  # =&gt; 4\n\n# Execute Python code\nresult = eval_tool.execute(\n  action: \"python\",\n  code: \"print('Hello from Python')\"\n)\n\n# Execute shell command\nresult = eval_tool.execute(action: \"shell\", command: \"echo 'Hello'\")\n</code></pre>"},{"location":"tools/eval/#authorization-system","title":"Authorization System","text":"<p>Security Notice</p> <p>EvalTool executes arbitrary code. By default, all operations require user authorization.</p> <pre><code># Default behavior: prompts for confirmation\neval_tool = SharedTools::Tools::EvalTool.new\neval_tool.execute(action: \"shell\", command: \"rm file.txt\")\n\n# Output:\n# The AI (tool: eval_tool) wants to do the following ...\n# ==========================================\n# rm file.txt\n# ==========================================\n# Is it okay to proceed? (y/N)\n</code></pre> <p>Disable authorization for automated scripts (use with caution):</p> <pre><code>SharedTools.auto_execute(true)\n\n# Now executes without prompting\neval_tool.execute(action: \"shell\", command: \"ls -la\")\n</code></pre>"},{"location":"tools/eval/#actions","title":"Actions","text":""},{"location":"tools/eval/#ruby","title":"ruby","text":"<p>Execute Ruby code and return the result.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"ruby\"</li> <li><code>code</code>: Ruby code to execute</li> </ul> <p>Examples:</p> <pre><code># Simple calculation\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: \"[1, 2, 3, 4, 5].sum\"\n)\nputs result  # =&gt; 15\n\n# String manipulation\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: \"'hello world'.upcase.reverse\"\n)\nputs result  # =&gt; \"DLROW OLLEH\"\n\n# Data processing\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: &lt;&lt;~RUBY\n    data = [1, 2, 3, 4, 5]\n    data.map { |n| n * 2 }.select { |n| n &gt; 5 }\n  RUBY\n)\nputs result  # =&gt; [6, 8, 10]\n</code></pre>"},{"location":"tools/eval/#python","title":"python","text":"<p>Execute Python code and return the output.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"python\"</li> <li><code>code</code>: Python code to execute</li> </ul> <p>Examples:</p> <pre><code># Print statement\nresult = eval_tool.execute(\n  action: \"python\",\n  code: \"print('Hello from Python')\"\n)\n\n# Mathematical operations\nresult = eval_tool.execute(\n  action: \"python\",\n  code: \"import math; print(math.pi * 2)\"\n)\n\n# Data processing\nresult = eval_tool.execute(\n  action: \"python\",\n  code: &lt;&lt;~PYTHON\n    import json\n    data = {'name': 'SharedTools', 'version': '0.5.1'}\n    print(json.dumps(data, indent=2))\n  PYTHON\n)\n</code></pre>"},{"location":"tools/eval/#shell","title":"shell","text":"<p>Execute shell commands and return the output.</p> <p>Parameters:</p> <ul> <li><code>action</code>: \"shell\"</li> <li><code>command</code>: Shell command to execute</li> </ul> <p>Examples:</p> <pre><code># List files\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"ls -la\"\n)\n\n# System information\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"uname -a\"\n)\n\n# File operations\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"wc -l *.rb\"\n)\n\n# Piped commands\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"ps aux | grep ruby\"\n)\n</code></pre>"},{"location":"tools/eval/#complete-examples","title":"Complete Examples","text":""},{"location":"tools/eval/#example-1-data-processing-pipeline","title":"Example 1: Data Processing Pipeline","text":"<pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# 1. Generate data with Ruby\ndata = eval_tool.execute(\n  action: \"ruby\",\n  code: \"(1..10).map { |n| {id: n, value: rand(100)} }\"\n)\n\nputs \"Generated data: #{data}\"\n\n# 2. Process with Python\njson_data = data.to_json\nresult = eval_tool.execute(\n  action: \"python\",\n  code: &lt;&lt;~PYTHON\n    import json\n    data = json.loads('#{json_data}')\n    total = sum(item['value'] for item in data)\n    print(f\"Total: {total}\")\n  PYTHON\n)\n\nputs \"Python result: #{result}\"\n\n# 3. Save with shell\neval_tool.execute(\n  action: \"shell\",\n  command: \"echo '#{data}' &gt; output.json\"\n)\n</code></pre>"},{"location":"tools/eval/#example-2-system-monitoring","title":"Example 2: System Monitoring","text":"<pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\nSharedTools.auto_execute(true)  # Disable prompts for automation\n\n# Collect system metrics\nmetrics = {}\n\n# CPU info\nmetrics[:cpu] = eval_tool.execute(\n  action: \"shell\",\n  command: \"top -l 1 | grep 'CPU usage'\"\n)\n\n# Memory info\nmetrics[:memory] = eval_tool.execute(\n  action: \"shell\",\n  command: \"vm_stat\"\n)\n\n# Disk usage\nmetrics[:disk] = eval_tool.execute(\n  action: \"shell\",\n  command: \"df -h\"\n)\n\n# Process Ruby metrics\nreport = eval_tool.execute(\n  action: \"ruby\",\n  code: &lt;&lt;~RUBY\n    metrics = #{metrics.inspect}\n    report = \"System Report\\\\n\"\n    report += \"=\" * 40 + \"\\\\n\"\n    metrics.each do |key, value|\n      report += \"\\\\n#{key.upcase}:\\\\n#{value}\\\\n\"\n    end\n    report\n  RUBY\n)\n\nputs report\n</code></pre>"},{"location":"tools/eval/#example-3-code-testing","title":"Example 3: Code Testing","text":"<pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\n\n# Test Ruby code\ntests = [\n  { code: \"2 + 2\", expected: 4 },\n  { code: \"'hello'.upcase\", expected: \"HELLO\" },\n  { code: \"[1,2,3].sum\", expected: 6 }\n]\n\nresults = tests.map do |test|\n  result = eval_tool.execute(action: \"ruby\", code: test[:code])\n  {\n    code: test[:code],\n    expected: test[:expected],\n    actual: result,\n    passed: result == test[:expected]\n  }\nend\n\n# Print results\nresults.each do |r|\n  status = r[:passed] ? \"PASS\" : \"FAIL\"\n  puts \"[#{status}] #{r[:code]} =&gt; #{r[:actual]}\"\nend\n</code></pre>"},{"location":"tools/eval/#example-4-file-analysis","title":"Example 4: File Analysis","text":"<pre><code>require 'shared_tools'\n\neval_tool = SharedTools::Tools::EvalTool.new\nSharedTools.auto_execute(true)\n\n# Count lines in Ruby files\nline_count = eval_tool.execute(\n  action: \"shell\",\n  command: \"find . -name '*.rb' | xargs wc -l | tail -1\"\n)\n\n# Find large files\nlarge_files = eval_tool.execute(\n  action: \"shell\",\n  command: \"find . -type f -size +1M\"\n)\n\n# Analyze with Ruby\nanalysis = eval_tool.execute(\n  action: \"ruby\",\n  code: &lt;&lt;~RUBY\n    total_lines = \"#{line_count}\".split.first.to_i\n    large_count = \"#{large_files}\".lines.count\n\n    \"Analysis:\\\\n\" +\n    \"  Total lines: #{total_lines}\\\\n\" +\n    \"  Large files: #{large_count}\"\n  RUBY\n)\n\nputs analysis\n</code></pre>"},{"location":"tools/eval/#error-handling","title":"Error Handling","text":"<pre><code>eval_tool = SharedTools::Tools::EvalTool.new\n\n# Handle Ruby syntax errors\nbegin\n  eval_tool.execute(action: \"ruby\", code: \"invalid syntax {\")\nrescue StandardError =&gt; e\n  puts \"Ruby error: #{e.message}\"\nend\n\n# Handle Python errors\nbegin\n  eval_tool.execute(action: \"python\", code: \"print(undefined_variable)\")\nrescue StandardError =&gt; e\n  puts \"Python error: #{e.message}\"\nend\n\n# Handle shell command errors\nbegin\n  eval_tool.execute(action: \"shell\", command: \"nonexistent-command\")\nrescue StandardError =&gt; e\n  puts \"Shell error: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/eval/#security-best-practices","title":"Security Best Practices","text":""},{"location":"tools/eval/#1-use-authorization-for-interactive-scripts","title":"1. Use Authorization for Interactive Scripts","text":"<pre><code># Keep authorization enabled by default\neval_tool = SharedTools::Tools::EvalTool.new\n\n# User approves each operation\neval_tool.execute(action: \"shell\", command: \"rm important_file.txt\")\n</code></pre>"},{"location":"tools/eval/#2-sanitize-user-input","title":"2. Sanitize User Input","text":"<pre><code># BAD: Direct user input\nuser_input = gets.chomp\neval_tool.execute(action: \"ruby\", code: user_input)  # Dangerous!\n\n# GOOD: Validate input\nallowed_commands = [\"list\", \"status\", \"version\"]\nif allowed_commands.include?(user_input)\n  eval_tool.execute(action: \"shell\", command: user_input)\nelse\n  puts \"Invalid command\"\nend\n</code></pre>"},{"location":"tools/eval/#3-use-whitelisting-for-commands","title":"3. Use Whitelisting for Commands","text":"<pre><code>SAFE_SHELL_COMMANDS = {\n  \"list\" =&gt; \"ls -la\",\n  \"date\" =&gt; \"date\",\n  \"whoami\" =&gt; \"whoami\"\n}.freeze\n\ncommand_key = \"list\"\nif SAFE_SHELL_COMMANDS.key?(command_key)\n  eval_tool.execute(action: \"shell\", command: SAFE_SHELL_COMMANDS[command_key])\nend\n</code></pre>"},{"location":"tools/eval/#4-limit-execution-time","title":"4. Limit Execution Time","text":"<pre><code>require 'timeout'\n\nbegin\n  Timeout.timeout(5) do\n    eval_tool.execute(\n      action: \"ruby\",\n      code: \"sleep 10\"  # Will timeout after 5 seconds\n    )\n  end\nrescue Timeout::Error\n  puts \"Execution timed out\"\nend\n</code></pre>"},{"location":"tools/eval/#5-sandbox-ruby-code","title":"5. Sandbox Ruby Code","text":"<pre><code># Use a separate process for untrusted code\ncode = \"potentially_dangerous_code\"\n\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: &lt;&lt;~RUBY\n    require 'open3'\n    stdout, stderr, status = Open3.capture3(\"ruby\", \"-e\", #{code.inspect})\n    stdout\n  RUBY\n)\n</code></pre>"},{"location":"tools/eval/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tools/eval/#python-not-found","title":"Python Not Found","text":"<pre><code>Error: python3: command not found\n</code></pre> <p>Solution: Install Python 3:</p> <pre><code># macOS\nbrew install python3\n\n# Ubuntu/Debian\napt-get install python3\n</code></pre>"},{"location":"tools/eval/#shell-command-fails","title":"Shell Command Fails","text":"<pre><code>Error: command not found\n</code></pre> <p>Solution: Check if command exists:</p> <pre><code># Check if command exists\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"which some-command\"\n)\n\nif result.empty?\n  puts \"Command not found\"\nelse\n  # Run command\nend\n</code></pre>"},{"location":"tools/eval/#ruby-syntax-error","title":"Ruby Syntax Error","text":"<pre><code>Error: syntax error, unexpected ...\n</code></pre> <p>Solution: Validate Ruby code before execution:</p> <pre><code>code = \"puts 'hello\"  # Invalid syntax\n\nbegin\n  RubyVM::InstructionSequence.compile(code)\n  # Code is valid\n  eval_tool.execute(action: \"ruby\", code: code)\nrescue SyntaxError =&gt; e\n  puts \"Invalid Ruby syntax: #{e.message}\"\nend\n</code></pre>"},{"location":"tools/eval/#performance-tips","title":"Performance Tips","text":""},{"location":"tools/eval/#1-minimize-shell-invocations","title":"1. Minimize Shell Invocations","text":"<pre><code># Less efficient: Multiple shell calls\nresult1 = eval_tool.execute(action: \"shell\", command: \"ls\")\nresult2 = eval_tool.execute(action: \"shell\", command: \"pwd\")\n\n# More efficient: Single shell call\nresult = eval_tool.execute(\n  action: \"shell\",\n  command: \"ls &amp;&amp; pwd\"\n)\n</code></pre>"},{"location":"tools/eval/#2-use-ruby-for-complex-logic","title":"2. Use Ruby for Complex Logic","text":"<pre><code># Instead of complex shell scripting\nresult = eval_tool.execute(\n  action: \"ruby\",\n  code: &lt;&lt;~RUBY\n    Dir.glob(\"*.rb\").select { |f| File.size(f) &gt; 1000 }\n  RUBY\n)\n</code></pre>"},{"location":"tools/eval/#3-cache-results","title":"3. Cache Results","text":"<pre><code># Cache expensive operations\n@system_info ||= eval_tool.execute(\n  action: \"shell\",\n  command: \"uname -a\"\n)\n</code></pre>"},{"location":"tools/eval/#see-also","title":"See Also","text":"<ul> <li>Authorization Guide - Control operation approval</li> <li>Basic Usage - Common patterns</li> <li>Examples</li> </ul>"}]}